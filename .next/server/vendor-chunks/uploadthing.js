"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/uploadthing";
exports.ids = ["vendor-chunks/uploadthing"];
exports.modules = {

/***/ "(ssr)/./node_modules/uploadthing/dist/chunk-4QCB7YXI.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/uploadthing/dist/chunk-4QCB7YXI.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getFullApiUrl: () => (/* binding */ getFullApiUrl),\n/* harmony export */   resolveMaybeUrlArg: () => (/* binding */ resolveMaybeUrlArg)\n/* harmony export */ });\n/* harmony import */ var std_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! std-env */ \"(ssr)/./node_modules/std-env/dist/index.mjs\");\n// src/internal/get-full-api-url.ts\n\nfunction getFullApiUrl(maybeUrl) {\n    const base = (()=>{\n        var _a;\n        if (false) {}\n        if ((_a = process.env) == null ? void 0 : _a.VERCEL_URL) return `https://${std_env__WEBPACK_IMPORTED_MODULE_0__.process.env.VERCEL_URL}`;\n        return \"http://localhost:3000\";\n    })();\n    try {\n        const url = new URL(maybeUrl ?? \"/api/uploadthing\", base);\n        if (url.pathname === \"/\") {\n            url.pathname = \"/api/uploadthing\";\n        }\n        return url;\n    } catch (err) {\n        throw new Error(`Failed to parse '${maybeUrl}' as a URL. Make sure it's a valid URL or path`);\n    }\n}\nfunction resolveMaybeUrlArg(maybeUrl) {\n    return maybeUrl instanceof URL ? maybeUrl : getFullApiUrl(maybeUrl);\n}\n //# sourceMappingURL=chunk-4QCB7YXI.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9jaHVuay00UUNCN1lYSS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsbUNBQW1DO0FBQ0Q7QUFDbEMsU0FBU0MsY0FBY0MsUUFBUTtJQUM3QixNQUFNQyxPQUFPLENBQUM7UUFDWixJQUFJQztRQUNKLElBQUksS0FBNkIsRUFDL0IsRUFBOEI7UUFDaEMsSUFBSSxDQUFDQSxLQUFLSixRQUFRUSxHQUFHLEtBQUssT0FBTyxLQUFLLElBQUlKLEdBQUdLLFVBQVUsRUFDckQsT0FBTyxDQUFDLFFBQVEsRUFBRVQsNENBQU9BLENBQUNRLEdBQUcsQ0FBQ0MsVUFBVSxDQUFDLENBQUM7UUFDNUMsT0FBTztJQUNUO0lBQ0EsSUFBSTtRQUNGLE1BQU1DLE1BQU0sSUFBSUMsSUFBSVQsWUFBWSxvQkFBb0JDO1FBQ3BELElBQUlPLElBQUlFLFFBQVEsS0FBSyxLQUFLO1lBQ3hCRixJQUFJRSxRQUFRLEdBQUc7UUFDakI7UUFDQSxPQUFPRjtJQUNULEVBQUUsT0FBT0csS0FBSztRQUNaLE1BQU0sSUFBSUMsTUFDUixDQUFDLGlCQUFpQixFQUFFWixTQUFTLDhDQUE4QyxDQUFDO0lBRWhGO0FBQ0Y7QUFDQSxTQUFTYSxtQkFBbUJiLFFBQVE7SUFDbEMsT0FBT0Esb0JBQW9CUyxNQUFNVCxXQUFXRCxjQUFjQztBQUM1RDtBQUtFLENBQ0YsMkNBQTJDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3luY2NoYXQvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9jaHVuay00UUNCN1lYSS5tanM/MGUzMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvaW50ZXJuYWwvZ2V0LWZ1bGwtYXBpLXVybC50c1xuaW1wb3J0IHsgcHJvY2VzcyB9IGZyb20gXCJzdGQtZW52XCI7XG5mdW5jdGlvbiBnZXRGdWxsQXBpVXJsKG1heWJlVXJsKSB7XG4gIGNvbnN0IGJhc2UgPSAoKCkgPT4ge1xuICAgIHZhciBfYTtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIilcbiAgICAgIHJldHVybiB3aW5kb3cubG9jYXRpb24ub3JpZ2luO1xuICAgIGlmICgoX2EgPSBwcm9jZXNzLmVudikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLlZFUkNFTF9VUkwpXG4gICAgICByZXR1cm4gYGh0dHBzOi8vJHtwcm9jZXNzLmVudi5WRVJDRUxfVVJMfWA7XG4gICAgcmV0dXJuIFwiaHR0cDovL2xvY2FsaG9zdDozMDAwXCI7XG4gIH0pKCk7XG4gIHRyeSB7XG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChtYXliZVVybCA/PyBcIi9hcGkvdXBsb2FkdGhpbmdcIiwgYmFzZSk7XG4gICAgaWYgKHVybC5wYXRobmFtZSA9PT0gXCIvXCIpIHtcbiAgICAgIHVybC5wYXRobmFtZSA9IFwiL2FwaS91cGxvYWR0aGluZ1wiO1xuICAgIH1cbiAgICByZXR1cm4gdXJsO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgRmFpbGVkIHRvIHBhcnNlICcke21heWJlVXJsfScgYXMgYSBVUkwuIE1ha2Ugc3VyZSBpdCdzIGEgdmFsaWQgVVJMIG9yIHBhdGhgXG4gICAgKTtcbiAgfVxufVxuZnVuY3Rpb24gcmVzb2x2ZU1heWJlVXJsQXJnKG1heWJlVXJsKSB7XG4gIHJldHVybiBtYXliZVVybCBpbnN0YW5jZW9mIFVSTCA/IG1heWJlVXJsIDogZ2V0RnVsbEFwaVVybChtYXliZVVybCk7XG59XG5cbmV4cG9ydCB7XG4gIGdldEZ1bGxBcGlVcmwsXG4gIHJlc29sdmVNYXliZVVybEFyZ1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNodW5rLTRRQ0I3WVhJLm1qcy5tYXAiXSwibmFtZXMiOlsicHJvY2VzcyIsImdldEZ1bGxBcGlVcmwiLCJtYXliZVVybCIsImJhc2UiLCJfYSIsIndpbmRvdyIsImxvY2F0aW9uIiwib3JpZ2luIiwiZW52IiwiVkVSQ0VMX1VSTCIsInVybCIsIlVSTCIsInBhdGhuYW1lIiwiZXJyIiwiRXJyb3IiLCJyZXNvbHZlTWF5YmVVcmxBcmciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/uploadthing/dist/chunk-4QCB7YXI.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/uploadthing/dist/chunk-JW5CQVQS.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/uploadthing/dist/chunk-JW5CQVQS.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   __require: () => (/* binding */ __require)\n/* harmony export */ });\nvar __require = /* @__PURE__ */ ((x)=>typeof require !== \"undefined\" ? require : typeof Proxy !== \"undefined\" ? new Proxy(x, {\n        get: (a, b)=>(typeof require !== \"undefined\" ? require : a)[b]\n    }) : x)(function(x) {\n    if (typeof require !== \"undefined\") return require.apply(this, arguments);\n    throw new Error('Dynamic require of \"' + x + '\" is not supported');\n});\n //# sourceMappingURL=chunk-JW5CQVQS.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9jaHVuay1KVzVDUVZRUy5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLElBQUlBLFlBQTRCLGFBQUgsR0FBSSxFQUFDQyxJQUFNLE9BQU9DLFlBQVksY0FBY0EsVUFBVSxPQUFPQyxVQUFVLGNBQWMsSUFBSUEsTUFBTUYsR0FBRztRQUM3SEcsS0FBSyxDQUFDQyxHQUFHQyxJQUFNLENBQUMsT0FBT0osWUFBWSxjQUFjQSxVQUFVRyxDQUFBQSxDQUFFLENBQUNDLEVBQUU7SUFDbEUsS0FBS0wsQ0FBQUEsRUFBRyxTQUFTQSxDQUFDO0lBQ2hCLElBQUksT0FBT0MsWUFBWSxhQUNyQixPQUFPQSxRQUFRSyxLQUFLLENBQUMsSUFBSSxFQUFFQztJQUM3QixNQUFNLElBQUlDLE1BQU0seUJBQXlCUixJQUFJO0FBQy9DO0FBSUUsQ0FDRiwyQ0FBMkMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zeW5jY2hhdC8uL25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9kaXN0L2NodW5rLUpXNUNRVlFTLm1qcz8wZDI3Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBfX3JlcXVpcmUgPSAvKiBAX19QVVJFX18gKi8gKCh4KSA9PiB0eXBlb2YgcmVxdWlyZSAhPT0gXCJ1bmRlZmluZWRcIiA/IHJlcXVpcmUgOiB0eXBlb2YgUHJveHkgIT09IFwidW5kZWZpbmVkXCIgPyBuZXcgUHJveHkoeCwge1xuICBnZXQ6IChhLCBiKSA9PiAodHlwZW9mIHJlcXVpcmUgIT09IFwidW5kZWZpbmVkXCIgPyByZXF1aXJlIDogYSlbYl1cbn0pIDogeCkoZnVuY3Rpb24oeCkge1xuICBpZiAodHlwZW9mIHJlcXVpcmUgIT09IFwidW5kZWZpbmVkXCIpXG4gICAgcmV0dXJuIHJlcXVpcmUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgdGhyb3cgbmV3IEVycm9yKCdEeW5hbWljIHJlcXVpcmUgb2YgXCInICsgeCArICdcIiBpcyBub3Qgc3VwcG9ydGVkJyk7XG59KTtcblxuZXhwb3J0IHtcbiAgX19yZXF1aXJlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2h1bmstSlc1Q1FWUVMubWpzLm1hcCJdLCJuYW1lcyI6WyJfX3JlcXVpcmUiLCJ4IiwicmVxdWlyZSIsIlByb3h5IiwiZ2V0IiwiYSIsImIiLCJhcHBseSIsImFyZ3VtZW50cyIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/uploadthing/dist/chunk-JW5CQVQS.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/uploadthing/dist/chunk-S3R3VXRK.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/uploadthing/dist/chunk-S3R3VXRK.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   maybeParseResponseXML: () => (/* binding */ maybeParseResponseXML),\n/* harmony export */   uploadPart: () => (/* binding */ uploadPart),\n/* harmony export */   uploadPartWithProgress: () => (/* binding */ uploadPartWithProgress)\n/* harmony export */ });\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @uploadthing/shared */ \"(ssr)/./node_modules/@uploadthing/shared/dist/index.mjs\");\n// src/internal/multi-part.ts\n\n// src/internal/s3-error-parser.ts\nvar maybeParseResponseXML = (maybeXml)=>{\n    const codeMatch = maybeXml.match(/<Code>(.*?)<\\/Code>/s);\n    const messageMatch = maybeXml.match(/<Message>(.*?)<\\/Message>/s);\n    const code = codeMatch == null ? void 0 : codeMatch[1];\n    const message = messageMatch == null ? void 0 : messageMatch[1];\n    if (!code || !message) return null;\n    return {\n        code: s3CodeToUploadThingCode[code] ?? DEFAULT_ERROR_CODE,\n        message\n    };\n};\nvar DEFAULT_ERROR_CODE = \"UPLOAD_FAILED\";\nvar s3CodeToUploadThingCode = {\n    AccessDenied: \"FORBIDDEN\",\n    // 403 Forbidden\n    EntityTooSmall: \"TOO_SMALL\",\n    // 400 Bad Request\n    EntityTooLarge: \"TOO_LARGE\",\n    // 400 Bad Request\n    ExpiredToken: \"FORBIDDEN\",\n    // 400 Bad Request\n    IncorrectNumberOfFilesInPostRequest: \"TOO_MANY_FILES\",\n    // 400 Bad Request\n    InternalError: \"INTERNAL_SERVER_ERROR\",\n    // 500 Internal Server Error\n    KeyTooLongError: \"KEY_TOO_LONG\",\n    // 400 Bad Request\n    MaxMessageLengthExceeded: \"TOO_LARGE\"\n};\n// src/internal/multi-part.ts\nasync function uploadPart(opts, retryCount = 0) {\n    const s3Res = await opts.fetch(opts.url, {\n        method: \"PUT\",\n        body: opts.chunk,\n        headers: {\n            \"Content-Type\": opts.contentType,\n            \"Content-Disposition\": [\n                opts.contentDisposition,\n                `filename=\"${encodeURI(opts.fileName)}\"`,\n                `filename*=UTF-8''${encodeURI(opts.fileName)}`\n            ].join(\"; \")\n        }\n    });\n    if (s3Res.ok) {\n        const etag = s3Res.headers.get(\"Etag\");\n        if (!etag) {\n            throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                code: \"UPLOAD_FAILED\",\n                message: \"Missing Etag header from uploaded part\"\n            });\n        }\n        return etag.replace(/\"/g, \"\");\n    }\n    if (retryCount < opts.maxRetries) {\n        const delay = 2 ** retryCount * 1e3;\n        await new Promise((r)=>setTimeout(r, delay));\n        return uploadPart(opts, retryCount++);\n    }\n    await opts.fetch((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.generateUploadThingURL)(\"/api/failureCallback\"), {\n        method: \"POST\",\n        body: JSON.stringify({\n            fileKey: opts.key\n        }),\n        headers: opts.utRequestHeaders\n    });\n    const text = await s3Res.text();\n    const parsed = maybeParseResponseXML(text);\n    if (parsed == null ? void 0 : parsed.message) {\n        throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n            code: \"UPLOAD_FAILED\",\n            message: parsed.message\n        });\n    }\n    throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n        code: \"UPLOAD_FAILED\",\n        message: \"Failed to upload file to storage provider\",\n        cause: s3Res\n    });\n}\nasync function uploadPartWithProgress(opts, retryCount = 0) {\n    return new Promise((resolve, reject)=>{\n        const xhr = new XMLHttpRequest();\n        xhr.open(\"PUT\", opts.url, true);\n        xhr.setRequestHeader(\"Content-Type\", opts.fileType);\n        xhr.setRequestHeader(\"Content-Disposition\", [\n            opts.contentDisposition,\n            `filename=\"${encodeURI(opts.fileName)}\"`,\n            `filename*=UTF-8''${encodeURI(opts.fileName)}`\n        ].join(\"; \"));\n        xhr.onload = async ()=>{\n            if (xhr.status >= 200 && xhr.status < 300) {\n                const etag = xhr.getResponseHeader(\"Etag\");\n                etag ? resolve(etag) : reject(\"NO ETAG\");\n            } else if (retryCount < opts.maxRetries) {\n                const delay = Math.pow(2, retryCount) * 1e3;\n                await new Promise((res)=>setTimeout(res, delay));\n                await uploadPartWithProgress(opts, retryCount + 1);\n            } else {\n                reject(\"Max retries exceeded\");\n            }\n        };\n        let lastProgress = 0;\n        xhr.onerror = async ()=>{\n            lastProgress = 0;\n            if (retryCount < opts.maxRetries) {\n                const delay = Math.pow(2, retryCount) * 100;\n                await new Promise((res)=>setTimeout(res, delay));\n                await uploadPartWithProgress(opts, retryCount + 1);\n            } else {\n                reject(\"Max retries exceeded\");\n            }\n        };\n        xhr.upload.onprogress = (e)=>{\n            const delta = e.loaded - lastProgress;\n            lastProgress += delta;\n            opts.onProgress(delta);\n        };\n        xhr.send(opts.chunk);\n    });\n}\n //# sourceMappingURL=chunk-S3R3VXRK.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9jaHVuay1TM1IzVlhSSy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLDZCQUE2QjtBQUNrRDtBQUUvRSxrQ0FBa0M7QUFDbEMsSUFBSUUsd0JBQXdCLENBQUNDO0lBQzNCLE1BQU1DLFlBQVlELFNBQVNFLEtBQUssQ0FBQztJQUNqQyxNQUFNQyxlQUFlSCxTQUFTRSxLQUFLLENBQUM7SUFDcEMsTUFBTUUsT0FBT0gsYUFBYSxPQUFPLEtBQUssSUFBSUEsU0FBUyxDQUFDLEVBQUU7SUFDdEQsTUFBTUksVUFBVUYsZ0JBQWdCLE9BQU8sS0FBSyxJQUFJQSxZQUFZLENBQUMsRUFBRTtJQUMvRCxJQUFJLENBQUNDLFFBQVEsQ0FBQ0MsU0FDWixPQUFPO0lBQ1QsT0FBTztRQUFFRCxNQUFNRSx1QkFBdUIsQ0FBQ0YsS0FBSyxJQUFJRztRQUFvQkY7SUFBUTtBQUM5RTtBQUNBLElBQUlFLHFCQUFxQjtBQUN6QixJQUFJRCwwQkFBMEI7SUFDNUJFLGNBQWM7SUFDZCxnQkFBZ0I7SUFDaEJDLGdCQUFnQjtJQUNoQixrQkFBa0I7SUFDbEJDLGdCQUFnQjtJQUNoQixrQkFBa0I7SUFDbEJDLGNBQWM7SUFDZCxrQkFBa0I7SUFDbEJDLHFDQUFxQztJQUNyQyxrQkFBa0I7SUFDbEJDLGVBQWU7SUFDZiw0QkFBNEI7SUFDNUJDLGlCQUFpQjtJQUNqQixrQkFBa0I7SUFDbEJDLDBCQUEwQjtBQUU1QjtBQUVBLDZCQUE2QjtBQUM3QixlQUFlQyxXQUFXQyxJQUFJLEVBQUVDLGFBQWEsQ0FBQztJQUM1QyxNQUFNQyxRQUFRLE1BQU1GLEtBQUtHLEtBQUssQ0FBQ0gsS0FBS0ksR0FBRyxFQUFFO1FBQ3ZDQyxRQUFRO1FBQ1JDLE1BQU1OLEtBQUtPLEtBQUs7UUFDaEJDLFNBQVM7WUFDUCxnQkFBZ0JSLEtBQUtTLFdBQVc7WUFDaEMsdUJBQXVCO2dCQUNyQlQsS0FBS1Usa0JBQWtCO2dCQUN2QixDQUFDLFVBQVUs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Z0JBQzNDLE1BQU1ZLHVCQUF1Qi9CLE1BQU1DLGFBQWE7WUFDbEQsT0FBTztnQkFDTGdDLE9BQU87WUFDVDtRQUNGO1FBQ0FDLElBQUlhLE1BQU0sQ0FBQ0MsVUFBVSxHQUFHLENBQUNDO1lBQ3ZCLE1BQU1DLFFBQVFELEVBQUVFLE1BQU0sR0FBR047WUFDekJBLGdCQUFnQks7WUFDaEJsRCxLQUFLb0QsVUFBVSxDQUFDRjtRQUNsQjtRQUNBaEIsSUFBSW1CLElBQUksQ0FBQ3JELEtBQUtPLEtBQUs7SUFDckI7QUFDRjtBQU1FLENBQ0YsMkNBQTJDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3luY2NoYXQvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9jaHVuay1TM1IzVlhSSy5tanM/YTQ0ZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvaW50ZXJuYWwvbXVsdGktcGFydC50c1xuaW1wb3J0IHsgZ2VuZXJhdGVVcGxvYWRUaGluZ1VSTCwgVXBsb2FkVGhpbmdFcnJvciB9IGZyb20gXCJAdXBsb2FkdGhpbmcvc2hhcmVkXCI7XG5cbi8vIHNyYy9pbnRlcm5hbC9zMy1lcnJvci1wYXJzZXIudHNcbnZhciBtYXliZVBhcnNlUmVzcG9uc2VYTUwgPSAobWF5YmVYbWwpID0+IHtcbiAgY29uc3QgY29kZU1hdGNoID0gbWF5YmVYbWwubWF0Y2goLzxDb2RlPiguKj8pPFxcL0NvZGU+L3MpO1xuICBjb25zdCBtZXNzYWdlTWF0Y2ggPSBtYXliZVhtbC5tYXRjaCgvPE1lc3NhZ2U+KC4qPyk8XFwvTWVzc2FnZT4vcyk7XG4gIGNvbnN0IGNvZGUgPSBjb2RlTWF0Y2ggPT0gbnVsbCA/IHZvaWQgMCA6IGNvZGVNYXRjaFsxXTtcbiAgY29uc3QgbWVzc2FnZSA9IG1lc3NhZ2VNYXRjaCA9PSBudWxsID8gdm9pZCAwIDogbWVzc2FnZU1hdGNoWzFdO1xuICBpZiAoIWNvZGUgfHwgIW1lc3NhZ2UpXG4gICAgcmV0dXJuIG51bGw7XG4gIHJldHVybiB7IGNvZGU6IHMzQ29kZVRvVXBsb2FkVGhpbmdDb2RlW2NvZGVdID8/IERFRkFVTFRfRVJST1JfQ09ERSwgbWVzc2FnZSB9O1xufTtcbnZhciBERUZBVUxUX0VSUk9SX0NPREUgPSBcIlVQTE9BRF9GQUlMRURcIjtcbnZhciBzM0NvZGVUb1VwbG9hZFRoaW5nQ29kZSA9IHtcbiAgQWNjZXNzRGVuaWVkOiBcIkZPUkJJRERFTlwiLFxuICAvLyA0MDMgRm9yYmlkZGVuXG4gIEVudGl0eVRvb1NtYWxsOiBcIlRPT19TTUFMTFwiLFxuICAvLyA0MDAgQmFkIFJlcXVlc3RcbiAgRW50aXR5VG9vTGFyZ2U6IFwiVE9PX0xBUkdFXCIsXG4gIC8vIDQwMCBCYWQgUmVxdWVzdFxuICBFeHBpcmVkVG9rZW46IFwiRk9SQklEREVOXCIsXG4gIC8vIDQwMCBCYWQgUmVxdWVzdFxuICBJbmNvcnJlY3ROdW1iZXJPZkZpbGVzSW5Qb3N0UmVxdWVzdDogXCJUT09fTUFOWV9GSUxFU1wiLFxuICAvLyA0MDAgQmFkIFJlcXVlc3RcbiAgSW50ZXJuYWxFcnJvcjogXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIixcbiAgLy8gNTAwIEludGVybmFsIFNlcnZlciBFcnJvclxuICBLZXlUb29Mb25nRXJyb3I6IFwiS0VZX1RPT19MT05HXCIsXG4gIC8vIDQwMCBCYWQgUmVxdWVzdFxuICBNYXhNZXNzYWdlTGVuZ3RoRXhjZWVkZWQ6IFwiVE9PX0xBUkdFXCJcbiAgLy8gNDAwIEJhZCBSZXF1ZXN0XG59O1xuXG4vLyBzcmMvaW50ZXJuYWwvbXVsdGktcGFydC50c1xuYXN5bmMgZnVuY3Rpb24gdXBsb2FkUGFydChvcHRzLCByZXRyeUNvdW50ID0gMCkge1xuICBjb25zdCBzM1JlcyA9IGF3YWl0IG9wdHMuZmV0Y2gob3B0cy51cmwsIHtcbiAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgYm9keTogb3B0cy5jaHVuayxcbiAgICBoZWFkZXJzOiB7XG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBvcHRzLmNvbnRlbnRUeXBlLFxuICAgICAgXCJDb250ZW50LURpc3Bvc2l0aW9uXCI6IFtcbiAgICAgICAgb3B0cy5jb250ZW50RGlzcG9zaXRpb24sXG4gICAgICAgIGBmaWxlbmFtZT1cIiR7ZW5jb2RlVVJJKG9wdHMuZmlsZU5hbWUpfVwiYCxcbiAgICAgICAgYGZpbGVuYW1lKj1VVEYtOCcnJHtlbmNvZGVVUkkob3B0cy5maWxlTmFtZSl9YFxuICAgICAgXS5qb2luKFwiOyBcIilcbiAgICB9XG4gIH0pO1xuICBpZiAoczNSZXMub2spIHtcbiAgICBjb25zdCBldGFnID0gczNSZXMuaGVhZGVycy5nZXQoXCJFdGFnXCIpO1xuICAgIGlmICghZXRhZykge1xuICAgICAgdGhyb3cgbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICBjb2RlOiBcIlVQTE9BRF9GQUlMRURcIixcbiAgICAgICAgbWVzc2FnZTogXCJNaXNzaW5nIEV0YWcgaGVhZGVyIGZyb20gdXBsb2FkZWQgcGFydFwiXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGV0YWcucmVwbGFjZSgvXCIvZywgXCJcIik7XG4gIH1cbiAgaWYgKHJldHJ5Q291bnQgPCBvcHRzLm1heFJldHJpZXMpIHtcbiAgICBjb25zdCBkZWxheSA9IDIgKiogcmV0cnlDb3VudCAqIDFlMztcbiAgICBhd2FpdCBuZXcgUHJvbWlzZSgocikgPT4gc2V0VGltZW91dChyLCBkZWxheSkpO1xuICAgIHJldHVybiB1cGxvYWRQYXJ0KG9wdHMsIHJldHJ5Q291bnQrKyk7XG4gIH1cbiAgYXdhaXQgb3B0cy5mZXRjaChnZW5lcmF0ZVVwbG9hZFRoaW5nVVJMKFwiL2FwaS9mYWlsdXJlQ2FsbGJhY2tcIiksIHtcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIGZpbGVLZXk6IG9wdHMua2V5XG4gICAgfSksXG4gICAgaGVhZGVyczogb3B0cy51dFJlcXVlc3RIZWFkZXJzXG4gIH0pO1xuICBjb25zdCB0ZXh0ID0gYXdhaXQgczNSZXMudGV4dCgpO1xuICBjb25zdCBwYXJzZWQgPSBtYXliZVBhcnNlUmVzcG9uc2VYTUwodGV4dCk7XG4gIGlmIChwYXJzZWQgPT0gbnVsbCA/IHZvaWQgMCA6IHBhcnNlZC5tZXNzYWdlKSB7XG4gICAgdGhyb3cgbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgY29kZTogXCJVUExPQURfRkFJTEVEXCIsXG4gICAgICBtZXNzYWdlOiBwYXJzZWQubWVzc2FnZVxuICAgIH0pO1xuICB9XG4gIHRocm93IG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICBjb2RlOiBcIlVQTE9BRF9GQUlMRURcIixcbiAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byB1cGxvYWQgZmlsZSB0byBzdG9yYWdlIHByb3ZpZGVyXCIsXG4gICAgY2F1c2U6IHMzUmVzXG4gIH0pO1xufVxuYXN5bmMgZnVuY3Rpb24gdXBsb2FkUGFydFdpdGhQcm9ncmVzcyhvcHRzLCByZXRyeUNvdW50ID0gMCkge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIHhoci5vcGVuKFwiUFVUXCIsIG9wdHMudXJsLCB0cnVlKTtcbiAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBvcHRzLmZpbGVUeXBlKTtcbiAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcbiAgICAgIFwiQ29udGVudC1EaXNwb3NpdGlvblwiLFxuICAgICAgW1xuICAgICAgICBvcHRzLmNvbnRlbnREaXNwb3NpdGlvbixcbiAgICAgICAgYGZpbGVuYW1lPVwiJHtlbmNvZGVVUkkob3B0cy5maWxlTmFtZSl9XCJgLFxuICAgICAgICBgZmlsZW5hbWUqPVVURi04Jycke2VuY29kZVVSSShvcHRzLmZpbGVOYW1lKX1gXG4gICAgICBdLmpvaW4oXCI7IFwiKVxuICAgICk7XG4gICAgeGhyLm9ubG9hZCA9IGFzeW5jICgpID0+IHtcbiAgICAgIGlmICh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDwgMzAwKSB7XG4gICAgICAgIGNvbnN0IGV0YWcgPSB4aHIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJFdGFnXCIpO1xuICAgICAgICBldGFnID8gcmVzb2x2ZShldGFnKSA6IHJlamVjdChcIk5PIEVUQUdcIik7XG4gICAgICB9IGVsc2UgaWYgKHJldHJ5Q291bnQgPCBvcHRzLm1heFJldHJpZXMpIHtcbiAgICAgICAgY29uc3QgZGVsYXkgPSBNYXRoLnBvdygyLCByZXRyeUNvdW50KSAqIDFlMztcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlcykgPT4gc2V0VGltZW91dChyZXMsIGRlbGF5KSk7XG4gICAgICAgIGF3YWl0IHVwbG9hZFBhcnRXaXRoUHJvZ3Jlc3Mob3B0cywgcmV0cnlDb3VudCArIDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVqZWN0KFwiTWF4IHJldHJpZXMgZXhjZWVkZWRcIik7XG4gICAgICB9XG4gICAgfTtcbiAgICBsZXQgbGFzdFByb2dyZXNzID0gMDtcbiAgICB4aHIub25lcnJvciA9IGFzeW5jICgpID0+IHtcbiAgICAgIGxhc3RQcm9ncmVzcyA9IDA7XG4gICAgICBpZiAocmV0cnlDb3VudCA8IG9wdHMubWF4UmV0cmllcykge1xuICAgICAgICBjb25zdCBkZWxheSA9IE1hdGgucG93KDIsIHJldHJ5Q291bnQpICogMTAwO1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzKSA9PiBzZXRUaW1lb3V0KHJlcywgZGVsYXkpKTtcbiAgICAgICAgYXdhaXQgdXBsb2FkUGFydFdpdGhQcm9ncmVzcyhvcHRzLCByZXRyeUNvdW50ICsgMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZWplY3QoXCJNYXggcmV0cmllcyBleGNlZWRlZFwiKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHhoci51cGxvYWQub25wcm9ncmVzcyA9IChlKSA9PiB7XG4gICAgICBjb25zdCBkZWx0YSA9IGUubG9hZGVkIC0gbGFzdFByb2dyZXNzO1xuICAgICAgbGFzdFByb2dyZXNzICs9IGRlbHRhO1xuICAgICAgb3B0cy5vblByb2dyZXNzKGRlbHRhKTtcbiAgICB9O1xuICAgIHhoci5zZW5kKG9wdHMuY2h1bmspO1xuICB9KTtcbn1cblxuZXhwb3J0IHtcbiAgbWF5YmVQYXJzZVJlc3BvbnNlWE1MLFxuICB1cGxvYWRQYXJ0LFxuICB1cGxvYWRQYXJ0V2l0aFByb2dyZXNzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2h1bmstUzNSM1ZYUksubWpzLm1hcCJdLCJuYW1lcyI6WyJnZW5lcmF0ZVVwbG9hZFRoaW5nVVJMIiwiVXBsb2FkVGhpbmdFcnJvciIsIm1heWJlUGFyc2VSZXNwb25zZVhNTCIsIm1heWJlWG1sIiwiY29kZU1hdGNoIiwibWF0Y2giLCJtZXNzYWdlTWF0Y2giLCJjb2RlIiwibWVzc2FnZSIsInMzQ29kZVRvVXBsb2FkVGhpbmdDb2RlIiwiREVGQVVMVF9FUlJPUl9DT0RFIiwiQWNjZXNzRGVuaWVkIiwiRW50aXR5VG9vU21hbGwiLCJFbnRpdHlUb29MYXJnZSIsIkV4cGlyZWRUb2tlbiIsIkluY29ycmVjdE51bWJlck9mRmlsZXNJblBvc3RSZXF1ZXN0IiwiSW50ZXJuYWxFcnJvciIsIktleVRvb0xvbmdFcnJvciIsIk1heE1lc3NhZ2VMZW5ndGhFeGNlZWRlZCIsInVwbG9hZFBhcnQiLCJvcHRzIiwicmV0cnlDb3VudCIsInMzUmVzIiwiZmV0Y2giLCJ1cmwiLCJtZXRob2QiLCJib2R5IiwiY2h1bmsiLCJoZWFkZXJzIiwiY29udGVudFR5cGUiLCJjb250ZW50RGlzcG9zaXRpb24iLCJlbmNvZGVVUkkiLCJmaWxlTmFtZSIsImpvaW4iLCJvayIsImV0YWciLCJnZXQiLCJyZXBsYWNlIiwibWF4UmV0cmllcyIsImRlbGF5IiwiUHJvbWlzZSIsInIiLCJzZXRUaW1lb3V0IiwiSlNPTiIsInN0cmluZ2lmeSIsImZpbGVLZXkiLCJrZXkiLCJ1dFJlcXVlc3RIZWFkZXJzIiwidGV4dCIsInBhcnNlZCIsImNhdXNlIiwidXBsb2FkUGFydFdpdGhQcm9ncmVzcyIsInJlc29sdmUiLCJyZWplY3QiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJzZXRSZXF1ZXN0SGVhZGVyIiwiZmlsZVR5cGUiLCJvbmxvYWQiLCJzdGF0dXMiLCJnZXRSZXNwb25zZUhlYWRlciIsIk1hdGgiLCJwb3ciLCJyZXMiLCJsYXN0UHJvZ3Jlc3MiLCJvbmVycm9yIiwidXBsb2FkIiwib25wcm9ncmVzcyIsImUiLCJkZWx0YSIsImxvYWRlZCIsIm9uUHJvZ3Jlc3MiLCJzZW5kIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/uploadthing/dist/chunk-S3R3VXRK.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/uploadthing/dist/client.mjs":
/*!**************************************************!*\
  !*** ./node_modules/uploadthing/dist/client.mjs ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DANGEROUS__uploadFiles: () => (/* binding */ DANGEROUS__uploadFiles),\n/* harmony export */   INTERNAL_DO_NOT_USE__fatalClientError: () => (/* binding */ INTERNAL_DO_NOT_USE__fatalClientError),\n/* harmony export */   INTERNAL_doFormatting: () => (/* binding */ INTERNAL_doFormatting),\n/* harmony export */   allowedContentTextLabelGenerator: () => (/* binding */ allowedContentTextLabelGenerator),\n/* harmony export */   capitalizeStart: () => (/* binding */ capitalizeStart),\n/* harmony export */   classNames: () => (/* binding */ classNames),\n/* harmony export */   contentFieldToContent: () => (/* binding */ contentFieldToContent),\n/* harmony export */   genUploader: () => (/* binding */ genUploader),\n/* harmony export */   generateClientDropzoneAccept: () => (/* binding */ generateClientDropzoneAccept),\n/* harmony export */   generateMimeTypes: () => (/* binding */ generateMimeTypes),\n/* harmony export */   generatePermittedFileTypes: () => (/* binding */ generatePermittedFileTypes),\n/* harmony export */   resolveMaybeUrlArg: () => (/* reexport safe */ _chunk_4QCB7YXI_mjs__WEBPACK_IMPORTED_MODULE_1__.resolveMaybeUrlArg),\n/* harmony export */   styleFieldToClassName: () => (/* binding */ styleFieldToClassName),\n/* harmony export */   styleFieldToCssObject: () => (/* binding */ styleFieldToCssObject)\n/* harmony export */ });\n/* harmony import */ var _chunk_S3R3VXRK_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-S3R3VXRK.mjs */ \"(ssr)/./node_modules/uploadthing/dist/chunk-S3R3VXRK.mjs\");\n/* harmony import */ var _chunk_4QCB7YXI_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-4QCB7YXI.mjs */ \"(ssr)/./node_modules/uploadthing/dist/chunk-4QCB7YXI.mjs\");\n/* harmony import */ var _chunk_JW5CQVQS_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chunk-JW5CQVQS.mjs */ \"(ssr)/./node_modules/uploadthing/dist/chunk-JW5CQVQS.mjs\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @uploadthing/shared */ \"(ssr)/./node_modules/@uploadthing/shared/dist/index.mjs\");\n\n\n\n// src/client.ts\n\n// src/internal/ut-reporter.ts\n\nvar createAPIRequestUrl = (config)=>{\n    const url = new URL(config.url);\n    const queryParams = new URLSearchParams(url.search);\n    queryParams.set(\"actionType\", config.actionType);\n    queryParams.set(\"slug\", config.slug);\n    url.search = queryParams.toString();\n    return url;\n};\nvar createUTReporter = (cfg)=>{\n    return async (type, payload)=>{\n        const url = createAPIRequestUrl({\n            url: cfg.url,\n            slug: cfg.endpoint,\n            actionType: type\n        });\n        const response = await cfg.fetch(url, {\n            method: \"POST\",\n            body: JSON.stringify(payload),\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"x-uploadthing-package\": cfg.package\n            }\n        });\n        switch(type){\n            case \"failure\":\n                {\n                    const p = payload;\n                    const parsed = (0,_chunk_S3R3VXRK_mjs__WEBPACK_IMPORTED_MODULE_0__.maybeParseResponseXML)(p.s3Error ?? \"\");\n                    if (parsed == null ? void 0 : parsed.message) {\n                        throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                            code: parsed.code,\n                            message: parsed.message\n                        });\n                    } else {\n                        throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                            code: \"UPLOAD_FAILED\",\n                            message: `Failed to upload file ${p.fileName} to S3`,\n                            cause: p.s3Error\n                        });\n                    }\n                }\n        }\n        return response.ok;\n    };\n};\n// src/internal/component-theming.ts\n\nvar generatePermittedFileTypes = (config)=>{\n    const fileTypes = config ? (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.objectKeys)(config) : [];\n    const maxFileCount = config ? Object.values(config).map((v)=>v.maxFileCount) : [];\n    return {\n        fileTypes,\n        multiple: maxFileCount.some((v)=>v && v > 1)\n    };\n};\nvar capitalizeStart = (str)=>{\n    return str.charAt(0).toUpperCase() + str.slice(1);\n};\nvar INTERNAL_doFormatting = (config)=>{\n    if (!config) return \"\";\n    const allowedTypes = (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.objectKeys)(config);\n    const formattedTypes = allowedTypes.map((f)=>f === \"blob\" ? \"file\" : f);\n    if (formattedTypes.length > 1) {\n        const lastType = formattedTypes.pop();\n        return `${formattedTypes.join(\"s, \")} and ${lastType}s`;\n    }\n    const key = allowedTypes[0];\n    const formattedKey = formattedTypes[0];\n    const { maxFileSize, maxFileCount } = config[key];\n    if (maxFileCount && maxFileCount > 1) {\n        return `${formattedKey}s up to ${maxFileSize}, max ${maxFileCount}`;\n    } else {\n        return `${formattedKey} (${maxFileSize})`;\n    }\n};\nvar allowedContentTextLabelGenerator = (config)=>{\n    return capitalizeStart(INTERNAL_doFormatting(config));\n};\nvar styleFieldToClassName = (styleField, args)=>{\n    if (typeof styleField === \"string\") return styleField;\n    if (typeof styleField === \"function\") {\n        const result = styleField(args);\n        if (typeof result === \"string\") return result;\n    }\n    return \"\";\n};\nvar styleFieldToCssObject = (styleField, args)=>{\n    if (typeof styleField === \"object\") return styleField;\n    if (typeof styleField === \"function\") {\n        const result = styleField(args);\n        if (typeof result === \"object\") return result;\n    }\n    return {};\n};\nvar contentFieldToContent = (contentField, arg)=>{\n    if (!contentField) return null;\n    if (typeof contentField !== \"function\") return contentField;\n    if (typeof contentField === \"function\") {\n        const result = contentField(arg);\n        return result;\n    }\n};\n// src/client.ts\nvar INTERNAL_DO_NOT_USE__fatalClientError = (e)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n        code: \"INTERNAL_CLIENT_ERROR\",\n        message: \"Something went wrong. Please report this to UploadThing.\",\n        cause: e\n    });\nvar DANGEROUS__uploadFiles = async (endpoint, opts)=>{\n    const fetch = globalThis.fetch.bind(globalThis);\n    const reportEventToUT = createUTReporter({\n        endpoint: String(endpoint),\n        url: opts.url,\n        package: opts.package,\n        fetch\n    });\n    const s3ConnectionRes = await fetch(createAPIRequestUrl({\n        url: opts.url,\n        slug: String(endpoint),\n        actionType: \"upload\"\n    }), {\n        method: \"POST\",\n        body: JSON.stringify({\n            input: \"input\" in opts ? opts.input : null,\n            files: opts.files.map((f)=>({\n                    name: f.name,\n                    size: f.size\n                }))\n        }),\n        // Express requires Content-Type to be explicitly set to parse body properly\n        headers: {\n            \"Content-Type\": \"application/json\",\n            \"x-uploadthing-package\": opts.package\n        }\n    }).then(async (res)=>{\n        if (!res.ok) {\n            const error = await _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError.fromResponse(res);\n            throw error;\n        }\n        const jsonOrError = await (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.safeParseJSON)(res);\n        if (jsonOrError instanceof Error) {\n            throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: jsonOrError.message,\n                cause: res\n            });\n        }\n        return jsonOrError;\n    });\n    if (!s3ConnectionRes || !Array.isArray(s3ConnectionRes)) {\n        throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n            code: \"BAD_REQUEST\",\n            message: \"No URL. How did you even get here?\",\n            cause: s3ConnectionRes\n        });\n    }\n    const fileUploadPromises = s3ConnectionRes.map(async (presigned)=>{\n        var _a;\n        const file = opts.files.find((f)=>f.name === presigned.fileName);\n        if (!file) {\n            console.error(\"No file found for presigned URL\", presigned);\n            throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                code: \"NOT_FOUND\",\n                message: \"No file found for presigned URL\",\n                cause: `Expected file with name ${presigned.fileName} but got '${opts.files.join(\",\")}'`\n            });\n        }\n        const { presignedUrls, uploadId, chunkSize, contentDisposition, key, pollingUrl, pollingJwt } = presigned;\n        let uploadedBytes = 0;\n        let etags;\n        (_a = opts.onUploadBegin) == null ? void 0 : _a.call(opts, {\n            file: file.name\n        });\n        try {\n            etags = await Promise.all(presignedUrls.map(async (url, index)=>{\n                const offset = chunkSize * index;\n                const end = Math.min(offset + chunkSize, file.size);\n                const chunk = file.slice(offset, end);\n                const etag = await (0,_chunk_S3R3VXRK_mjs__WEBPACK_IMPORTED_MODULE_0__.uploadPartWithProgress)({\n                    url,\n                    chunk,\n                    contentDisposition,\n                    fileType: file.type,\n                    fileName: file.name,\n                    maxRetries: 10,\n                    onProgress: (delta)=>{\n                        var _a2;\n                        uploadedBytes += delta;\n                        const percent = uploadedBytes / file.size * 100;\n                        (_a2 = opts.onUploadProgress) == null ? void 0 : _a2.call(opts, {\n                            file: file.name,\n                            progress: percent\n                        });\n                    }\n                });\n                return {\n                    tag: etag,\n                    partNumber: index + 1\n                };\n            }));\n        } catch (error) {\n            await reportEventToUT(\"failure\", {\n                fileKey: key,\n                uploadId,\n                fileName: file.name,\n                s3Error: error.toString()\n            });\n            throw \"unreachable\";\n        }\n        const uploadOk = await reportEventToUT(\"multipart-complete\", {\n            uploadId,\n            fileKey: key,\n            etags\n        });\n        if (!uploadOk) {\n            console.log(\"Failed to alert UT of upload completion\");\n            throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                code: \"UPLOAD_FAILED\",\n                message: \"Failed to alert UT of upload completion\"\n            });\n        }\n        await new Promise((r)=>setTimeout(r, 750));\n        const serverData = await (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.withExponentialBackoff)(async ()=>{\n            const res = await fetch(pollingUrl, {\n                headers: {\n                    authorization: pollingJwt\n                }\n            }).then((r)=>r.json());\n            return res.status === \"done\" ? res.callbackData : void 0;\n        });\n        return {\n            name: file.name,\n            size: file.size,\n            key: presigned.key,\n            serverData,\n            url: \"https://utfs.io/f/\" + key\n        };\n    });\n    return Promise.all(fileUploadPromises);\n};\nvar genUploader = (initOpts)=>{\n    const url = (0,_chunk_4QCB7YXI_mjs__WEBPACK_IMPORTED_MODULE_1__.resolveMaybeUrlArg)(initOpts == null ? void 0 : initOpts.url);\n    const utPkg = initOpts.package;\n    return (endpoint, opts)=>// eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        DANGEROUS__uploadFiles(endpoint, {\n            ...opts,\n            url,\n            package: utPkg\n        });\n};\nvar classNames = (...classes)=>{\n    return classes.filter(Boolean).join(\" \");\n};\nvar generateMimeTypes = (fileTypes)=>{\n    const accepted = fileTypes.map((type)=>{\n        if (type === \"blob\") return \"blob\";\n        if (type === \"pdf\") return \"application/pdf\";\n        if (type.includes(\"/\")) return type;\n        else return `${type}/*`;\n    });\n    if (accepted.includes(\"blob\")) {\n        return void 0;\n    }\n    return accepted;\n};\nvar generateClientDropzoneAccept = (fileTypes)=>{\n    const mimeTypes = generateMimeTypes(fileTypes);\n    if (!mimeTypes) return void 0;\n    return Object.fromEntries(mimeTypes.map((type)=>[\n            type,\n            []\n        ]));\n};\n //# sourceMappingURL=client.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9jbGllbnQubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUc4QjtBQUdBO0FBQ0E7QUFFOUIsZ0JBQWdCO0FBS2E7QUFFN0IsOEJBQThCO0FBQ3lCO0FBQ3ZELElBQUlPLHNCQUFzQixDQUFDQztJQUN6QixNQUFNQyxNQUFNLElBQUlDLElBQUlGLE9BQU9DLEdBQUc7SUFDOUIsTUFBTUUsY0FBYyxJQUFJQyxnQkFBZ0JILElBQUlJLE1BQU07SUFDbERGLFlBQVlHLEdBQUcsQ0FBQyxjQUFjTixPQUFPTyxVQUFVO0lBQy9DSixZQUFZRyxHQUFHLENBQUMsUUFBUU4sT0FBT1EsSUFBSTtJQUNuQ1AsSUFBSUksTUFBTSxHQUFHRixZQUFZTSxRQUFRO0lBQ2pDLE9BQU9SO0FBQ1Q7QUFDQSxJQUFJUyxtQkFBbUIsQ0FBQ0M7SUFDdEIsT0FBTyxPQUFPQyxNQUFNQztRQUNsQixNQUFNWixNQUFNRixvQkFBb0I7WUFDOUJFLEtBQUtVLElBQUlWLEdBQUc7WUFDWk8sTUFBTUcsSUFBSUcsUUFBUTtZQUNsQlAsWUFBWUs7UUFDZDtRQUNBLE1BQU1HLFdBQVcsTUFBTUosSUFBSUssS0FBSyxDQUFDZixLQUFLO1lBQ3BDZ0IsUUFBUTtZQUNSQyxNQUFNQyxLQUFLQyxTQUFTLENBQUNQO1lBQ3JCUSxTQUFTO2dCQUNQLGdCQUFnQjtnQkFDaEIseUJBQXlCVixJQUFJVyxPQUFPO1lBQ3RDO1FBQ0Y7UUFDQSxPQUFRVjtZQUNOLEtBQUs7Z0JBQVc7b0JBQ2QsTUFBTVcsSUFBSVY7b0JBQ1YsTUFBTVcsU0FBU2hDLDBFQUFxQkEsQ0FBQytCLEVBQUVFLE9BQU8sSUFBSTtvQkFDbEQsSUFBSUQsVUFBVSxPQUFPLEtBQUssSUFBSUEsT0FBT0UsT0FBTyxFQUFFO3dCQUM1QyxNQUFNLElBQUk5QixpRUFBZ0JBLENBQUM7NEJBQ3pCK0IsTUFBTUgsT0FBT0csSUFBSTs0QkFDakJELFNBQVNGLE9B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LElBQUlFLCtCQUErQixDQUFDN0c7SUFDbEMsTUFBTThHLFlBQVlKLGtCQUFrQjFHO0lBQ3BDLElBQUksQ0FBQzhHLFdBQ0gsT0FBTyxLQUFLO0lBQ2QsT0FBTzVHLE9BQU82RyxXQUFXLENBQUNELFVBQVUxRyxHQUFHLENBQUMsQ0FBQ3pCLE9BQVM7WUFBQ0E7WUFBTSxFQUFFO1NBQUM7QUFDOUQ7QUFnQkUsQ0FDRixtQ0FBbUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zeW5jY2hhdC8uL25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9kaXN0L2NsaWVudC5tanM/YTQ1NyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBtYXliZVBhcnNlUmVzcG9uc2VYTUwsXG4gIHVwbG9hZFBhcnRXaXRoUHJvZ3Jlc3Ncbn0gZnJvbSBcIi4vY2h1bmstUzNSM1ZYUksubWpzXCI7XG5pbXBvcnQge1xuICByZXNvbHZlTWF5YmVVcmxBcmdcbn0gZnJvbSBcIi4vY2h1bmstNFFDQjdZWEkubWpzXCI7XG5pbXBvcnQgXCIuL2NodW5rLUpXNUNRVlFTLm1qc1wiO1xuXG4vLyBzcmMvY2xpZW50LnRzXG5pbXBvcnQge1xuICBzYWZlUGFyc2VKU09OLFxuICBVcGxvYWRUaGluZ0Vycm9yIGFzIFVwbG9hZFRoaW5nRXJyb3IyLFxuICB3aXRoRXhwb25lbnRpYWxCYWNrb2ZmXG59IGZyb20gXCJAdXBsb2FkdGhpbmcvc2hhcmVkXCI7XG5cbi8vIHNyYy9pbnRlcm5hbC91dC1yZXBvcnRlci50c1xuaW1wb3J0IHsgVXBsb2FkVGhpbmdFcnJvciB9IGZyb20gXCJAdXBsb2FkdGhpbmcvc2hhcmVkXCI7XG52YXIgY3JlYXRlQVBJUmVxdWVzdFVybCA9IChjb25maWcpID0+IHtcbiAgY29uc3QgdXJsID0gbmV3IFVSTChjb25maWcudXJsKTtcbiAgY29uc3QgcXVlcnlQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHVybC5zZWFyY2gpO1xuICBxdWVyeVBhcmFtcy5zZXQoXCJhY3Rpb25UeXBlXCIsIGNvbmZpZy5hY3Rpb25UeXBlKTtcbiAgcXVlcnlQYXJhbXMuc2V0KFwic2x1Z1wiLCBjb25maWcuc2x1Zyk7XG4gIHVybC5zZWFyY2ggPSBxdWVyeVBhcmFtcy50b1N0cmluZygpO1xuICByZXR1cm4gdXJsO1xufTtcbnZhciBjcmVhdGVVVFJlcG9ydGVyID0gKGNmZykgPT4ge1xuICByZXR1cm4gYXN5bmMgKHR5cGUsIHBheWxvYWQpID0+IHtcbiAgICBjb25zdCB1cmwgPSBjcmVhdGVBUElSZXF1ZXN0VXJsKHtcbiAgICAgIHVybDogY2ZnLnVybCxcbiAgICAgIHNsdWc6IGNmZy5lbmRwb2ludCxcbiAgICAgIGFjdGlvblR5cGU6IHR5cGVcbiAgICB9KTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNmZy5mZXRjaCh1cmwsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgIFwieC11cGxvYWR0aGluZy1wYWNrYWdlXCI6IGNmZy5wYWNrYWdlXG4gICAgICB9XG4gICAgfSk7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlIFwiZmFpbHVyZVwiOiB7XG4gICAgICAgIGNvbnN0IHAgPSBwYXlsb2FkO1xuICAgICAgICBjb25zdCBwYXJzZWQgPSBtYXliZVBhcnNlUmVzcG9uc2VYTUwocC5zM0Vycm9yID8/IFwiXCIpO1xuICAgICAgICBpZiAocGFyc2VkID09IG51bGwgPyB2b2lkIDAgOiBwYXJzZWQubWVzc2FnZSkge1xuICAgICAgICAgIHRocm93IG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgIGNvZGU6IHBhcnNlZC5jb2RlLFxuICAgICAgICAgICAgbWVzc2FnZTogcGFyc2VkLm1lc3NhZ2VcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICBjb2RlOiBcIlVQTE9BRF9GQUlMRURcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBGYWlsZWQgdG8gdXBsb2FkIGZpbGUgJHtwLmZpbGVOYW1lfSB0byBTM2AsXG4gICAgICAgICAgICBjYXVzZTogcC5zM0Vycm9yXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3BvbnNlLm9rO1xuICB9O1xufTtcblxuLy8gc3JjL2ludGVybmFsL2NvbXBvbmVudC10aGVtaW5nLnRzXG5pbXBvcnQgeyBvYmplY3RLZXlzIH0gZnJvbSBcIkB1cGxvYWR0aGluZy9zaGFyZWRcIjtcbnZhciBnZW5lcmF0ZVBlcm1pdHRlZEZpbGVUeXBlcyA9IChjb25maWcpID0+IHtcbiAgY29uc3QgZmlsZVR5cGVzID0gY29uZmlnID8gb2JqZWN0S2V5cyhjb25maWcpIDogW107XG4gIGNvbnN0IG1heEZpbGVDb3VudCA9IGNvbmZpZyA/IE9iamVjdC52YWx1ZXMoY29uZmlnKS5tYXAoKHYpID0+IHYubWF4RmlsZUNvdW50KSA6IFtdO1xuICByZXR1cm4geyBmaWxlVHlwZXMsIG11bHRpcGxlOiBtYXhGaWxlQ291bnQuc29tZSgodikgPT4gdiAmJiB2ID4gMSkgfTtcbn07XG52YXIgY2FwaXRhbGl6ZVN0YXJ0ID0gKHN0cikgPT4ge1xuICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnNsaWNlKDEpO1xufTtcbnZhciBJTlRFUk5BTF9kb0Zvcm1hdHRpbmcgPSAoY29uZmlnKSA9PiB7XG4gIGlmICghY29uZmlnKVxuICAgIHJldHVybiBcIlwiO1xuICBjb25zdCBhbGxvd2VkVHlwZXMgPSBvYmplY3RLZXlzKGNvbmZpZyk7XG4gIGNvbnN0IGZvcm1hdHRlZFR5cGVzID0gYWxsb3dlZFR5cGVzLm1hcCgoZikgPT4gZiA9PT0gXCJibG9iXCIgPyBcImZpbGVcIiA6IGYpO1xuICBpZiAoZm9ybWF0dGVkVHlwZXMubGVuZ3RoID4gMSkge1xuICAgIGNvbnN0IGxhc3RUeXBlID0gZm9ybWF0dGVkVHlwZXMucG9wKCk7XG4gICAgcmV0dXJuIGAke2Zvcm1hdHRlZFR5cGVzLmpvaW4oXCJzLCBcIil9IGFuZCAke2xhc3RUeXBlfXNgO1xuICB9XG4gIGNvbnN0IGtleSA9IGFsbG93ZWRUeXBlc1swXTtcbiAgY29uc3QgZm9ybWF0dGVkS2V5ID0gZm9ybWF0dGVkVHlwZXNbMF07XG4gIGNvbnN0IHsgbWF4RmlsZVNpemUsIG1heEZpbGVDb3VudCB9ID0gY29uZmlnW2tleV07XG4gIGlmIChtYXhGaWxlQ291bnQgJiYgbWF4RmlsZUNvdW50ID4gMSkge1xuICAgIHJldHVybiBgJHtmb3JtYXR0ZWRLZXl9cyB1cCB0byAke21heEZpbGVTaXplfSwgbWF4ICR7bWF4RmlsZUNvdW50fWA7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGAke2Zvcm1hdHRlZEtleX0gKCR7bWF4RmlsZVNpemV9KWA7XG4gIH1cbn07XG52YXIgYWxsb3dlZENvbnRlbnRUZXh0TGFiZWxHZW5lcmF0b3IgPSAoY29uZmlnKSA9PiB7XG4gIHJldHVybiBjYXBpdGFsaXplU3RhcnQoSU5URVJOQUxfZG9Gb3JtYXR0aW5nKGNvbmZpZykpO1xufTtcbnZhciBzdHlsZUZpZWxkVG9DbGFzc05hbWUgPSAoc3R5bGVGaWVsZCwgYXJncykgPT4ge1xuICBpZiAodHlwZW9mIHN0eWxlRmllbGQgPT09IFwic3RyaW5nXCIpXG4gICAgcmV0dXJuIHN0eWxlRmllbGQ7XG4gIGlmICh0eXBlb2Ygc3R5bGVGaWVsZCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gc3R5bGVGaWVsZChhcmdzKTtcbiAgICBpZiAodHlwZW9mIHJlc3VsdCA9PT0gXCJzdHJpbmdcIilcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgcmV0dXJuIFwiXCI7XG59O1xudmFyIHN0eWxlRmllbGRUb0Nzc09iamVjdCA9IChzdHlsZUZpZWxkLCBhcmdzKSA9PiB7XG4gIGlmICh0eXBlb2Ygc3R5bGVGaWVsZCA9PT0gXCJvYmplY3RcIilcbiAgICByZXR1cm4gc3R5bGVGaWVsZDtcbiAgaWYgKHR5cGVvZiBzdHlsZUZpZWxkID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBjb25zdCByZXN1bHQgPSBzdHlsZUZpZWxkKGFyZ3MpO1xuICAgIGlmICh0eXBlb2YgcmVzdWx0ID09PSBcIm9iamVjdFwiKVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICByZXR1cm4ge307XG59O1xudmFyIGNvbnRlbnRGaWVsZFRvQ29udGVudCA9IChjb250ZW50RmllbGQsIGFyZykgPT4ge1xuICBpZiAoIWNvbnRlbnRGaWVsZClcbiAgICByZXR1cm4gbnVsbDtcbiAgaWYgKHR5cGVvZiBjb250ZW50RmllbGQgIT09IFwiZnVuY3Rpb25cIilcbiAgICByZXR1cm4gY29udGVudEZpZWxkO1xuICBpZiAodHlwZW9mIGNvbnRlbnRGaWVsZCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gY29udGVudEZpZWxkKGFyZyk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufTtcblxuLy8gc3JjL2NsaWVudC50c1xudmFyIElOVEVSTkFMX0RPX05PVF9VU0VfX2ZhdGFsQ2xpZW50RXJyb3IgPSAoZSkgPT4gbmV3IFVwbG9hZFRoaW5nRXJyb3IyKHtcbiAgY29kZTogXCJJTlRFUk5BTF9DTElFTlRfRVJST1JcIixcbiAgbWVzc2FnZTogXCJTb21ldGhpbmcgd2VudCB3cm9uZy4gUGxlYXNlIHJlcG9ydCB0aGlzIHRvIFVwbG9hZFRoaW5nLlwiLFxuICBjYXVzZTogZVxufSk7XG52YXIgREFOR0VST1VTX191cGxvYWRGaWxlcyA9IGFzeW5jIChlbmRwb2ludCwgb3B0cykgPT4ge1xuICBjb25zdCBmZXRjaCA9IGdsb2JhbFRoaXMuZmV0Y2guYmluZChnbG9iYWxUaGlzKTtcbiAgY29uc3QgcmVwb3J0RXZlbnRUb1VUID0gY3JlYXRlVVRSZXBvcnRlcih7XG4gICAgZW5kcG9pbnQ6IFN0cmluZyhlbmRwb2ludCksXG4gICAgdXJsOiBvcHRzLnVybCxcbiAgICBwYWNrYWdlOiBvcHRzLnBhY2thZ2UsXG4gICAgZmV0Y2hcbiAgfSk7XG4gIGNvbnN0IHMzQ29ubmVjdGlvblJlcyA9IGF3YWl0IGZldGNoKFxuICAgIGNyZWF0ZUFQSVJlcXVlc3RVcmwoe1xuICAgICAgdXJsOiBvcHRzLnVybCxcbiAgICAgIHNsdWc6IFN0cmluZyhlbmRwb2ludCksXG4gICAgICBhY3Rpb25UeXBlOiBcInVwbG9hZFwiXG4gICAgfSksXG4gICAge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgaW5wdXQ6IFwiaW5wdXRcIiBpbiBvcHRzID8gb3B0cy5pbnB1dCA6IG51bGwsXG4gICAgICAgIGZpbGVzOiBvcHRzLmZpbGVzLm1hcCgoZikgPT4gKHsgbmFtZTogZi5uYW1lLCBzaXplOiBmLnNpemUgfSkpXG4gICAgICB9KSxcbiAgICAgIC8vIEV4cHJlc3MgcmVxdWlyZXMgQ29udGVudC1UeXBlIHRvIGJlIGV4cGxpY2l0bHkgc2V0IHRvIHBhcnNlIGJvZHkgcHJvcGVybHlcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgIFwieC11cGxvYWR0aGluZy1wYWNrYWdlXCI6IG9wdHMucGFja2FnZVxuICAgICAgfVxuICAgIH1cbiAgKS50aGVuKGFzeW5jIChyZXMpID0+IHtcbiAgICBpZiAoIXJlcy5vaykge1xuICAgICAgY29uc3QgZXJyb3IgPSBhd2FpdCBVcGxvYWRUaGluZ0Vycm9yMi5mcm9tUmVzcG9uc2UocmVzKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgICBjb25zdCBqc29uT3JFcnJvciA9IGF3YWl0IHNhZmVQYXJzZUpTT04ocmVzKTtcbiAgICBpZiAoanNvbk9yRXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgdGhyb3cgbmV3IFVwbG9hZFRoaW5nRXJyb3IyKHtcbiAgICAgICAgY29kZTogXCJCQURfUkVRVUVTVFwiLFxuICAgICAgICBtZXNzYWdlOiBqc29uT3JFcnJvci5tZXNzYWdlLFxuICAgICAgICBjYXVzZTogcmVzXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGpzb25PckVycm9yO1xuICB9KTtcbiAgaWYgKCFzM0Nvbm5lY3Rpb25SZXMgfHwgIUFycmF5LmlzQXJyYXkoczNDb25uZWN0aW9uUmVzKSkge1xuICAgIHRocm93IG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICBtZXNzYWdlOiBcIk5vIFVSTC4gSG93IGRpZCB5b3UgZXZlbiBnZXQgaGVyZT9cIixcbiAgICAgIGNhdXNlOiBzM0Nvbm5lY3Rpb25SZXNcbiAgICB9KTtcbiAgfVxuICBjb25zdCBmaWxlVXBsb2FkUHJvbWlzZXMgPSBzM0Nvbm5lY3Rpb25SZXMubWFwKGFzeW5jIChwcmVzaWduZWQpID0+IHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgZmlsZSA9IG9wdHMuZmlsZXMuZmluZCgoZikgPT4gZi5uYW1lID09PSBwcmVzaWduZWQuZmlsZU5hbWUpO1xuICAgIGlmICghZmlsZSkge1xuICAgICAgY29uc29sZS5lcnJvcihcIk5vIGZpbGUgZm91bmQgZm9yIHByZXNpZ25lZCBVUkxcIiwgcHJlc2lnbmVkKTtcbiAgICAgIHRocm93IG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgIGNvZGU6IFwiTk9UX0ZPVU5EXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiTm8gZmlsZSBmb3VuZCBmb3IgcHJlc2lnbmVkIFVSTFwiLFxuICAgICAgICBjYXVzZTogYEV4cGVjdGVkIGZpbGUgd2l0aCBuYW1lICR7cHJlc2lnbmVkLmZpbGVOYW1lfSBidXQgZ290ICcke29wdHMuZmlsZXMuam9pbihcIixcIil9J2BcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCB7XG4gICAgICBwcmVzaWduZWRVcmxzLFxuICAgICAgdXBsb2FkSWQsXG4gICAgICBjaHVua1NpemUsXG4gICAgICBjb250ZW50RGlzcG9zaXRpb24sXG4gICAgICBrZXksXG4gICAgICBwb2xsaW5nVXJsLFxuICAgICAgcG9sbGluZ0p3dFxuICAgIH0gPSBwcmVzaWduZWQ7XG4gICAgbGV0IHVwbG9hZGVkQnl0ZXMgPSAwO1xuICAgIGxldCBldGFncztcbiAgICAoX2EgPSBvcHRzLm9uVXBsb2FkQmVnaW4pID09IG51bGwgPyB2b2lkIDAgOiBfYS5jYWxsKG9wdHMsIHsgZmlsZTogZmlsZS5uYW1lIH0pO1xuICAgIHRyeSB7XG4gICAgICBldGFncyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICBwcmVzaWduZWRVcmxzLm1hcChhc3luYyAodXJsLCBpbmRleCkgPT4ge1xuICAgICAgICAgIGNvbnN0IG9mZnNldCA9IGNodW5rU2l6ZSAqIGluZGV4O1xuICAgICAgICAgIGNvbnN0IGVuZCA9IE1hdGgubWluKG9mZnNldCArIGNodW5rU2l6ZSwgZmlsZS5zaXplKTtcbiAgICAgICAgICBjb25zdCBjaHVuayA9IGZpbGUuc2xpY2Uob2Zmc2V0LCBlbmQpO1xuICAgICAgICAgIGNvbnN0IGV0YWcgPSBhd2FpdCB1cGxvYWRQYXJ0V2l0aFByb2dyZXNzKHtcbiAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgIGNodW5rLFxuICAgICAgICAgICAgY29udGVudERpc3Bvc2l0aW9uLFxuICAgICAgICAgICAgZmlsZVR5cGU6IGZpbGUudHlwZSxcbiAgICAgICAgICAgIGZpbGVOYW1lOiBmaWxlLm5hbWUsXG4gICAgICAgICAgICBtYXhSZXRyaWVzOiAxMCxcbiAgICAgICAgICAgIG9uUHJvZ3Jlc3M6IChkZWx0YSkgPT4ge1xuICAgICAgICAgICAgICB2YXIgX2EyO1xuICAgICAgICAgICAgICB1cGxvYWRlZEJ5dGVzICs9IGRlbHRhO1xuICAgICAgICAgICAgICBjb25zdCBwZXJjZW50ID0gdXBsb2FkZWRCeXRlcyAvIGZpbGUuc2l6ZSAqIDEwMDtcbiAgICAgICAgICAgICAgKF9hMiA9IG9wdHMub25VcGxvYWRQcm9ncmVzcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5jYWxsKG9wdHMsIHsgZmlsZTogZmlsZS5uYW1lLCBwcm9ncmVzczogcGVyY2VudCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4geyB0YWc6IGV0YWcsIHBhcnROdW1iZXI6IGluZGV4ICsgMSB9O1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYXdhaXQgcmVwb3J0RXZlbnRUb1VUKFwiZmFpbHVyZVwiLCB7XG4gICAgICAgIGZpbGVLZXk6IGtleSxcbiAgICAgICAgdXBsb2FkSWQsXG4gICAgICAgIGZpbGVOYW1lOiBmaWxlLm5hbWUsXG4gICAgICAgIHMzRXJyb3I6IGVycm9yLnRvU3RyaW5nKClcbiAgICAgIH0pO1xuICAgICAgdGhyb3cgXCJ1bnJlYWNoYWJsZVwiO1xuICAgIH1cbiAgICBjb25zdCB1cGxvYWRPayA9IGF3YWl0IHJlcG9ydEV2ZW50VG9VVChcIm11bHRpcGFydC1jb21wbGV0ZVwiLCB7XG4gICAgICB1cGxvYWRJZCxcbiAgICAgIGZpbGVLZXk6IGtleSxcbiAgICAgIGV0YWdzXG4gICAgfSk7XG4gICAgaWYgKCF1cGxvYWRPaykge1xuICAgICAgY29uc29sZS5sb2coXCJGYWlsZWQgdG8gYWxlcnQgVVQgb2YgdXBsb2FkIGNvbXBsZXRpb25cIik7XG4gICAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcjIoe1xuICAgICAgICBjb2RlOiBcIlVQTE9BRF9GQUlMRURcIixcbiAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gYWxlcnQgVVQgb2YgdXBsb2FkIGNvbXBsZXRpb25cIlxuICAgICAgfSk7XG4gICAgfVxuICAgIGF3YWl0IG5ldyBQcm9taXNlKChyKSA9PiBzZXRUaW1lb3V0KHIsIDc1MCkpO1xuICAgIGNvbnN0IHNlcnZlckRhdGEgPSBhd2FpdCB3aXRoRXhwb25lbnRpYWxCYWNrb2ZmKGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHBvbGxpbmdVcmwsIHtcbiAgICAgICAgaGVhZGVyczogeyBhdXRob3JpemF0aW9uOiBwb2xsaW5nSnd0IH1cbiAgICAgIH0pLnRoZW4oKHIpID0+IHIuanNvbigpKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzID09PSBcImRvbmVcIiA/IHJlcy5jYWxsYmFja0RhdGEgOiB2b2lkIDA7XG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IGZpbGUubmFtZSxcbiAgICAgIHNpemU6IGZpbGUuc2l6ZSxcbiAgICAgIGtleTogcHJlc2lnbmVkLmtleSxcbiAgICAgIHNlcnZlckRhdGEsXG4gICAgICB1cmw6IFwiaHR0cHM6Ly91dGZzLmlvL2YvXCIgKyBrZXlcbiAgICB9O1xuICB9KTtcbiAgcmV0dXJuIFByb21pc2UuYWxsKGZpbGVVcGxvYWRQcm9taXNlcyk7XG59O1xudmFyIGdlblVwbG9hZGVyID0gKGluaXRPcHRzKSA9PiB7XG4gIGNvbnN0IHVybCA9IHJlc29sdmVNYXliZVVybEFyZyhpbml0T3B0cyA9PSBudWxsID8gdm9pZCAwIDogaW5pdE9wdHMudXJsKTtcbiAgY29uc3QgdXRQa2cgPSBpbml0T3B0cy5wYWNrYWdlO1xuICByZXR1cm4gKGVuZHBvaW50LCBvcHRzKSA9PiAoXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXJndW1lbnRcbiAgICBEQU5HRVJPVVNfX3VwbG9hZEZpbGVzKGVuZHBvaW50LCB7XG4gICAgICAuLi5vcHRzLFxuICAgICAgdXJsLFxuICAgICAgcGFja2FnZTogdXRQa2dcbiAgICB9KVxuICApO1xufTtcbnZhciBjbGFzc05hbWVzID0gKC4uLmNsYXNzZXMpID0+IHtcbiAgcmV0dXJuIGNsYXNzZXMuZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCIgXCIpO1xufTtcbnZhciBnZW5lcmF0ZU1pbWVUeXBlcyA9IChmaWxlVHlwZXMpID0+IHtcbiAgY29uc3QgYWNjZXB0ZWQgPSBmaWxlVHlwZXMubWFwKCh0eXBlKSA9PiB7XG4gICAgaWYgKHR5cGUgPT09IFwiYmxvYlwiKVxuICAgICAgcmV0dXJuIFwiYmxvYlwiO1xuICAgIGlmICh0eXBlID09PSBcInBkZlwiKVxuICAgICAgcmV0dXJuIFwiYXBwbGljYXRpb24vcGRmXCI7XG4gICAgaWYgKHR5cGUuaW5jbHVkZXMoXCIvXCIpKVxuICAgICAgcmV0dXJuIHR5cGU7XG4gICAgZWxzZVxuICAgICAgcmV0dXJuIGAke3R5cGV9LypgO1xuICB9KTtcbiAgaWYgKGFjY2VwdGVkLmluY2x1ZGVzKFwiYmxvYlwiKSkge1xuICAgIHJldHVybiB2b2lkIDA7XG4gIH1cbiAgcmV0dXJuIGFjY2VwdGVkO1xufTtcbnZhciBnZW5lcmF0ZUNsaWVudERyb3B6b25lQWNjZXB0ID0gKGZpbGVUeXBlcykgPT4ge1xuICBjb25zdCBtaW1lVHlwZXMgPSBnZW5lcmF0ZU1pbWVUeXBlcyhmaWxlVHlwZXMpO1xuICBpZiAoIW1pbWVUeXBlcylcbiAgICByZXR1cm4gdm9pZCAwO1xuICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKG1pbWVUeXBlcy5tYXAoKHR5cGUpID0+IFt0eXBlLCBbXV0pKTtcbn07XG5leHBvcnQge1xuICBEQU5HRVJPVVNfX3VwbG9hZEZpbGVzLFxuICBJTlRFUk5BTF9ET19OT1RfVVNFX19mYXRhbENsaWVudEVycm9yLFxuICBJTlRFUk5BTF9kb0Zvcm1hdHRpbmcsXG4gIGFsbG93ZWRDb250ZW50VGV4dExhYmVsR2VuZXJhdG9yLFxuICBjYXBpdGFsaXplU3RhcnQsXG4gIGNsYXNzTmFtZXMsXG4gIGNvbnRlbnRGaWVsZFRvQ29udGVudCxcbiAgZ2VuVXBsb2FkZXIsXG4gIGdlbmVyYXRlQ2xpZW50RHJvcHpvbmVBY2NlcHQsXG4gIGdlbmVyYXRlTWltZVR5cGVzLFxuICBnZW5lcmF0ZVBlcm1pdHRlZEZpbGVUeXBlcyxcbiAgcmVzb2x2ZU1heWJlVXJsQXJnLFxuICBzdHlsZUZpZWxkVG9DbGFzc05hbWUsXG4gIHN0eWxlRmllbGRUb0Nzc09iamVjdFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNsaWVudC5tanMubWFwIl0sIm5hbWVzIjpbIm1heWJlUGFyc2VSZXNwb25zZVhNTCIsInVwbG9hZFBhcnRXaXRoUHJvZ3Jlc3MiLCJyZXNvbHZlTWF5YmVVcmxBcmciLCJzYWZlUGFyc2VKU09OIiwiVXBsb2FkVGhpbmdFcnJvciIsIlVwbG9hZFRoaW5nRXJyb3IyIiwid2l0aEV4cG9uZW50aWFsQmFja29mZiIsImNyZWF0ZUFQSVJlcXVlc3RVcmwiLCJjb25maWciLCJ1cmwiLCJVUkwiLCJxdWVyeVBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsInNlYXJjaCIsInNldCIsImFjdGlvblR5cGUiLCJzbHVnIiwidG9TdHJpbmciLCJjcmVhdGVVVFJlcG9ydGVyIiwiY2ZnIiwidHlwZSIsInBheWxvYWQiLCJlbmRwb2ludCIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImhlYWRlcnMiLCJwYWNrYWdlIiwicCIsInBhcnNlZCIsInMzRXJyb3IiLCJtZXNzYWdlIiwiY29kZSIsImZpbGVOYW1lIiwiY2F1c2UiLCJvayIsIm9iamVjdEtleXMiLCJnZW5lcmF0ZVBlcm1pdHRlZEZpbGVUeXBlcyIsImZpbGVUeXBlcyIsIm1heEZpbGVDb3VudCIsIk9iamVjdCIsInZhbHVlcyIsIm1hcCIsInYiLCJtdWx0aXBsZSIsInNvbWUiLCJjYXBpdGFsaXplU3RhcnQiLCJzdHIiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInNsaWNlIiwiSU5URVJOQUxfZG9Gb3JtYXR0aW5nIiwiYWxsb3dlZFR5cGVzIiwiZm9ybWF0dGVkVHlwZXMiLCJmIiwibGVuZ3RoIiwibGFzdFR5cGUiLCJwb3AiLCJqb2luIiwia2V5IiwiZm9ybWF0dGVkS2V5IiwibWF4RmlsZVNpemUiLCJhbGxvd2VkQ29udGVudFRleHRMYWJlbEdlbmVyYXRvciIsInN0eWxlRmllbGRUb0NsYXNzTmFtZSIsInN0eWxlRmllbGQiLCJhcmdzIiwicmVzdWx0Iiwic3R5bGVGaWVsZFRvQ3NzT2JqZWN0IiwiY29udGVudEZpZWxkVG9Db250ZW50IiwiY29udGVudEZpZWxkIiwiYXJnIiwiSU5URVJOQUxfRE9fTk9UX1VTRV9fZmF0YWxDbGllbnRFcnJvciIsImUiLCJEQU5HRVJPVVNfX3VwbG9hZEZpbGVzIiwib3B0cyIsImdsb2JhbFRoaXMiLCJiaW5kIiwicmVwb3J0RXZlbnRUb1VUIiwiU3RyaW5nIiwiczNDb25uZWN0aW9uUmVzIiwiaW5wdXQiLCJmaWxlcyIsIm5hbWUiLCJzaXplIiwidGhlbiIsInJlcyIsImVycm9yIiwiZnJvbVJlc3BvbnNlIiwianNvbk9yRXJyb3IiLCJFcnJvciIsIkFycmF5IiwiaXNBcnJheSIsImZpbGVVcGxvYWRQcm9taXNlcyIsInByZXNpZ25lZCIsIl9hIiwiZmlsZSIsImZpbmQiLCJjb25zb2xlIiwicHJlc2lnbmVkVXJscyIsInVwbG9hZElkIiwiY2h1bmtTaXplIiwiY29udGVudERpc3Bvc2l0aW9uIiwicG9sbGluZ1VybCIsInBvbGxpbmdKd3QiLCJ1cGxvYWRlZEJ5dGVzIiwiZXRhZ3MiLCJvblVwbG9hZEJlZ2luIiwiY2FsbCIsIlByb21pc2UiLCJhbGwiLCJpbmRleCIsIm9mZnNldCIsImVuZCIsIk1hdGgiLCJtaW4iLCJjaHVuayIsImV0YWciLCJmaWxlVHlwZSIsIm1heFJldHJpZXMiLCJvblByb2dyZXNzIiwiZGVsdGEiLCJfYTIiLCJwZXJjZW50Iiwib25VcGxvYWRQcm9ncmVzcyIsInByb2dyZXNzIiwidGFnIiwicGFydE51bWJlciIsImZpbGVLZXkiLCJ1cGxvYWRPayIsImxvZyIsInIiLCJzZXRUaW1lb3V0Iiwic2VydmVyRGF0YSIsImF1dGhvcml6YXRpb24iLCJqc29uIiwic3RhdHVzIiwiY2FsbGJhY2tEYXRhIiwiZ2VuVXBsb2FkZXIiLCJpbml0T3B0cyIsInV0UGtnIiwiY2xhc3NOYW1lcyIsImNsYXNzZXMiLCJmaWx0ZXIiLCJCb29sZWFuIiwiZ2VuZXJhdGVNaW1lVHlwZXMiLCJhY2NlcHRlZCIsImluY2x1ZGVzIiwiZ2VuZXJhdGVDbGllbnREcm9wem9uZUFjY2VwdCIsIm1pbWVUeXBlcyIsImZyb21FbnRyaWVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/uploadthing/dist/client.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/chunk-4QCB7YXI.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/uploadthing/dist/chunk-4QCB7YXI.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getFullApiUrl: () => (/* binding */ getFullApiUrl),\n/* harmony export */   resolveMaybeUrlArg: () => (/* binding */ resolveMaybeUrlArg)\n/* harmony export */ });\n/* harmony import */ var std_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! std-env */ \"(rsc)/./node_modules/std-env/dist/index.mjs\");\n// src/internal/get-full-api-url.ts\n\nfunction getFullApiUrl(maybeUrl) {\n    const base = (()=>{\n        var _a;\n        if (false) {}\n        if ((_a = process.env) == null ? void 0 : _a.VERCEL_URL) return `https://${std_env__WEBPACK_IMPORTED_MODULE_0__.process.env.VERCEL_URL}`;\n        return \"http://localhost:3000\";\n    })();\n    try {\n        const url = new URL(maybeUrl ?? \"/api/uploadthing\", base);\n        if (url.pathname === \"/\") {\n            url.pathname = \"/api/uploadthing\";\n        }\n        return url;\n    } catch (err) {\n        throw new Error(`Failed to parse '${maybeUrl}' as a URL. Make sure it's a valid URL or path`);\n    }\n}\nfunction resolveMaybeUrlArg(maybeUrl) {\n    return maybeUrl instanceof URL ? maybeUrl : getFullApiUrl(maybeUrl);\n}\n //# sourceMappingURL=chunk-4QCB7YXI.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9jaHVuay00UUNCN1lYSS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsbUNBQW1DO0FBQ0Q7QUFDbEMsU0FBU0MsY0FBY0MsUUFBUTtJQUM3QixNQUFNQyxPQUFPLENBQUM7UUFDWixJQUFJQztRQUNKLElBQUksS0FBNkIsRUFDL0IsRUFBOEI7UUFDaEMsSUFBSSxDQUFDQSxLQUFLSixRQUFRUSxHQUFHLEtBQUssT0FBTyxLQUFLLElBQUlKLEdBQUdLLFVBQVUsRUFDckQsT0FBTyxDQUFDLFFBQVEsRUFBRVQsNENBQU9BLENBQUNRLEdBQUcsQ0FBQ0MsVUFBVSxDQUFDLENBQUM7UUFDNUMsT0FBTztJQUNUO0lBQ0EsSUFBSTtRQUNGLE1BQU1DLE1BQU0sSUFBSUMsSUFBSVQsWUFBWSxvQkFBb0JDO1FBQ3BELElBQUlPLElBQUlFLFFBQVEsS0FBSyxLQUFLO1lBQ3hCRixJQUFJRSxRQUFRLEdBQUc7UUFDakI7UUFDQSxPQUFPRjtJQUNULEVBQUUsT0FBT0csS0FBSztRQUNaLE1BQU0sSUFBSUMsTUFDUixDQUFDLGlCQUFpQixFQUFFWixTQUFTLDhDQUE4QyxDQUFDO0lBRWhGO0FBQ0Y7QUFDQSxTQUFTYSxtQkFBbUJiLFFBQVE7SUFDbEMsT0FBT0Esb0JBQW9CUyxNQUFNVCxXQUFXRCxjQUFjQztBQUM1RDtBQUtFLENBQ0YsMkNBQTJDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3luY2NoYXQvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9jaHVuay00UUNCN1lYSS5tanM/MGUzMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvaW50ZXJuYWwvZ2V0LWZ1bGwtYXBpLXVybC50c1xuaW1wb3J0IHsgcHJvY2VzcyB9IGZyb20gXCJzdGQtZW52XCI7XG5mdW5jdGlvbiBnZXRGdWxsQXBpVXJsKG1heWJlVXJsKSB7XG4gIGNvbnN0IGJhc2UgPSAoKCkgPT4ge1xuICAgIHZhciBfYTtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIilcbiAgICAgIHJldHVybiB3aW5kb3cubG9jYXRpb24ub3JpZ2luO1xuICAgIGlmICgoX2EgPSBwcm9jZXNzLmVudikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLlZFUkNFTF9VUkwpXG4gICAgICByZXR1cm4gYGh0dHBzOi8vJHtwcm9jZXNzLmVudi5WRVJDRUxfVVJMfWA7XG4gICAgcmV0dXJuIFwiaHR0cDovL2xvY2FsaG9zdDozMDAwXCI7XG4gIH0pKCk7XG4gIHRyeSB7XG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChtYXliZVVybCA/PyBcIi9hcGkvdXBsb2FkdGhpbmdcIiwgYmFzZSk7XG4gICAgaWYgKHVybC5wYXRobmFtZSA9PT0gXCIvXCIpIHtcbiAgICAgIHVybC5wYXRobmFtZSA9IFwiL2FwaS91cGxvYWR0aGluZ1wiO1xuICAgIH1cbiAgICByZXR1cm4gdXJsO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgRmFpbGVkIHRvIHBhcnNlICcke21heWJlVXJsfScgYXMgYSBVUkwuIE1ha2Ugc3VyZSBpdCdzIGEgdmFsaWQgVVJMIG9yIHBhdGhgXG4gICAgKTtcbiAgfVxufVxuZnVuY3Rpb24gcmVzb2x2ZU1heWJlVXJsQXJnKG1heWJlVXJsKSB7XG4gIHJldHVybiBtYXliZVVybCBpbnN0YW5jZW9mIFVSTCA/IG1heWJlVXJsIDogZ2V0RnVsbEFwaVVybChtYXliZVVybCk7XG59XG5cbmV4cG9ydCB7XG4gIGdldEZ1bGxBcGlVcmwsXG4gIHJlc29sdmVNYXliZVVybEFyZ1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNodW5rLTRRQ0I3WVhJLm1qcy5tYXAiXSwibmFtZXMiOlsicHJvY2VzcyIsImdldEZ1bGxBcGlVcmwiLCJtYXliZVVybCIsImJhc2UiLCJfYSIsIndpbmRvdyIsImxvY2F0aW9uIiwib3JpZ2luIiwiZW52IiwiVkVSQ0VMX1VSTCIsInVybCIsIlVSTCIsInBhdGhuYW1lIiwiZXJyIiwiRXJyb3IiLCJyZXNvbHZlTWF5YmVVcmxBcmciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/chunk-4QCB7YXI.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/chunk-HDSWJLNP.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/uploadthing/dist/chunk-HDSWJLNP.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   INTERNAL_DO_NOT_USE_createRouteHandlerCore: () => (/* binding */ INTERNAL_DO_NOT_USE_createRouteHandlerCore),\n/* harmony export */   UTApi: () => (/* binding */ UTApi),\n/* harmony export */   UploadThingError: () => (/* reexport safe */ _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError),\n/* harmony export */   createRouteHandler: () => (/* binding */ createRouteHandler),\n/* harmony export */   createServerHandler: () => (/* binding */ createServerHandler),\n/* harmony export */   createUploadthing: () => (/* binding */ createUploadthing),\n/* harmony export */   extractRouterConfig: () => (/* binding */ extractRouterConfig)\n/* harmony export */ });\n/* harmony import */ var _chunk_S3R3VXRK_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-S3R3VXRK.mjs */ \"(rsc)/./node_modules/uploadthing/dist/chunk-S3R3VXRK.mjs\");\n/* harmony import */ var _chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-VF56OB6T.mjs */ \"(rsc)/./node_modules/uploadthing/dist/chunk-VF56OB6T.mjs\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.mjs\");\n/* harmony import */ var std_env__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! std-env */ \"(rsc)/./node_modules/std-env/dist/index.mjs\");\n\n\n// src/server.ts\n\n// src/sdk/index.ts\n\n\n// src/sdk/utils.ts\n\n\nfunction guardServerOnly() {\n    if (false) {}\n}\nfunction getApiKeyOrThrow(apiKey) {\n    if (apiKey) return apiKey;\n    if (std_env__WEBPACK_IMPORTED_MODULE_3__.process.env.UPLOADTHING_SECRET) return std_env__WEBPACK_IMPORTED_MODULE_3__.process.env.UPLOADTHING_SECRET;\n    throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError({\n        code: \"MISSING_ENV\",\n        message: \"Missing `UPLOADTHING_SECRET` env variable.\"\n    });\n}\nvar uploadFilesInternal = async (data, opts)=>{\n    const fileData = data.files.map((file)=>({\n            name: file.name ?? \"unnamed-blob\",\n            type: file.type,\n            size: file.size\n        }));\n    _chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"Getting presigned URLs for files\", fileData);\n    const res = await opts.fetch((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.generateUploadThingURL)(\"/api/uploadFiles\"), {\n        method: \"POST\",\n        headers: opts.utRequestHeaders,\n        cache: \"no-store\",\n        body: JSON.stringify({\n            files: fileData,\n            metadata: data.metadata,\n            contentDisposition: data.contentDisposition,\n            acl: data.acl\n        })\n    });\n    if (!res.ok) {\n        const error = await _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError.fromResponse(res);\n        _chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"Failed getting presigned URLs:\", error);\n        throw error;\n    }\n    if (!res.ok) {\n        const error = await _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError.fromResponse(res);\n        _chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"Failed getting presigned URLs:\", error);\n        throw error;\n    }\n    const json = await res.json();\n    _chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"Got presigned URLs:\", json.data);\n    _chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"Starting uploads...\");\n    const uploads = await Promise.allSettled(data.files.map(async (file, i)=>{\n        const { presignedUrls, key, fileUrl, uploadId, chunkSize } = json.data[i];\n        if (!presignedUrls || !Array.isArray(presignedUrls)) {\n            _chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.error(\"Failed to generate presigned URL for file:\", file, json.data[i]);\n            throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError({\n                code: \"URL_GENERATION_FAILED\",\n                message: \"Failed to generate presigned URL\",\n                cause: JSON.stringify(json.data[i])\n            });\n        }\n        _chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"Uploading file\", file.name, \"with\", presignedUrls.length, \"chunks of size\", chunkSize, \"bytes each\");\n        const etags = await Promise.all(presignedUrls.map(async (url, index)=>{\n            const offset = chunkSize * index;\n            const end = Math.min(offset + chunkSize, file.size);\n            const chunk = file.slice(offset, end);\n            const etag = await (0,_chunk_S3R3VXRK_mjs__WEBPACK_IMPORTED_MODULE_0__.uploadPart)({\n                fetch: opts.fetch,\n                url,\n                chunk,\n                contentDisposition: data.contentDisposition,\n                contentType: file.type,\n                fileName: file.name,\n                maxRetries: 10,\n                key,\n                utRequestHeaders: opts.utRequestHeaders\n            });\n            _chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"Part\", index + 1, \"uploaded successfully:\", etag);\n            return {\n                tag: etag,\n                partNumber: index + 1\n            };\n        }));\n        _chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"File\", file.name, \"uploaded successfully. Notifying UploadThing to complete multipart upload.\");\n        const completionRes = await opts.fetch((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.generateUploadThingURL)(\"/api/completeMultipart\"), {\n            method: \"POST\",\n            body: JSON.stringify({\n                fileKey: key,\n                uploadId,\n                etags\n            }),\n            headers: opts.utRequestHeaders\n        });\n        _chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"UploadThing responsed with status:\", completionRes.status);\n        _chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"Polling for file data...\");\n        await (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.pollForFileData)({\n            url: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.generateUploadThingURL)(`/api/pollUpload/${key}`),\n            apiKey: opts.utRequestHeaders[\"x-uploadthing-api-key\"],\n            sdkVersion: _chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.UPLOADTHING_VERSION,\n            fetch: opts.fetch\n        });\n        _chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"Polling complete.\");\n        return {\n            key,\n            url: fileUrl,\n            name: file.name,\n            size: file.size\n        };\n    }));\n    _chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"All uploads complete, aggregating results...\");\n    return uploads.map((upload)=>{\n        if (upload.status === \"fulfilled\") {\n            const data2 = upload.value;\n            return {\n                data: data2,\n                error: null\n            };\n        }\n        const reason = upload.reason;\n        const error = _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError.toObject(reason);\n        return {\n            data: null,\n            error\n        };\n    });\n};\nfunction parseTimeToSeconds(time) {\n    const match = time.toString().split(/(\\d+)/).filter(Boolean);\n    const num = Number(match[0]);\n    const unit = (match[1] ?? \"s\").trim().slice(0, 1);\n    const multiplier = {\n        s: 1,\n        m: 60,\n        h: 3600,\n        d: 86400\n    }[unit];\n    return num * multiplier;\n}\n// src/sdk/index.ts\nvar UTApi = class {\n    constructor(opts){\n        /** @deprecated Use {@link renameFiles} instead. */ // eslint-disable-next-line @typescript-eslint/unbound-method\n        this.renameFile = this.renameFiles;\n        var _a;\n        this.fetch = (opts == null ? void 0 : opts.fetch) ?? globalThis.fetch;\n        this.apiKey = (opts == null ? void 0 : opts.apiKey) ?? std_env__WEBPACK_IMPORTED_MODULE_3__.process.env.UPLOADTHING_SECRET;\n        this.defaultHeaders = {\n            \"Content-Type\": \"application/json\",\n            \"x-uploadthing-api-key\": this.apiKey,\n            \"x-uploadthing-version\": _chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.UPLOADTHING_VERSION,\n            \"x-uploadthing-be-adapter\": \"server-sdk\"\n        };\n        (0,_chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.initLogger)(opts == null ? void 0 : opts.logLevel);\n        guardServerOnly();\n        getApiKeyOrThrow(this.apiKey);\n        if (!((_a = this.apiKey) == null ? void 0 : _a.startsWith(\"sk_\"))) {\n            throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError({\n                code: \"MISSING_ENV\",\n                message: \"Invalid API key. API keys must start with `sk_`.\"\n            });\n        }\n        (0,_chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.incompatibleNodeGuard)();\n    }\n    async requestUploadThing(pathname, body, fallbackErrorMessage) {\n        const url = (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.generateUploadThingURL)(pathname);\n        _chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"Requesting UploadThing:\", {\n            url,\n            body,\n            headers: this.defaultHeaders\n        });\n        const res = await this.fetch(url, {\n            method: \"POST\",\n            cache: \"no-store\",\n            headers: this.defaultHeaders,\n            body: JSON.stringify(body)\n        });\n        _chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"UploadThing responsed with status:\", res.status);\n        const json = await res.json();\n        if (!res.ok || \"error\" in json) {\n            _chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.error(\"Error:\", json);\n            throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError({\n                code: \"INTERNAL_SERVER_ERROR\",\n                message: \"error\" in json && typeof json.error === \"string\" ? json.error : fallbackErrorMessage\n            });\n        }\n        _chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"UploadThing response:\", json);\n        return json;\n    }\n    /**\n   * Upload files to UploadThing storage.\n   *\n   * @example\n   * await uploadFiles(new File([\"foo\"], \"foo.txt\"));\n   *\n   * @example\n   * await uploadFiles([\n   *   new File([\"foo\"], \"foo.txt\"),\n   *   new File([\"bar\"], \"bar.txt\"),\n   * ]);\n   */ async uploadFiles(files, opts) {\n        guardServerOnly();\n        const filesToUpload = Array.isArray(files) ? files : [\n            files\n        ];\n        _chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"Uploading files:\", filesToUpload);\n        const uploads = await uploadFilesInternal({\n            files: filesToUpload,\n            metadata: (opts == null ? void 0 : opts.metadata) ?? {},\n            contentDisposition: (opts == null ? void 0 : opts.contentDisposition) ?? \"inline\",\n            acl: opts == null ? void 0 : opts.acl\n        }, {\n            fetch: this.fetch,\n            utRequestHeaders: this.defaultHeaders\n        });\n        const uploadFileResponse = Array.isArray(files) ? uploads : uploads[0];\n        _chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"Finished uploading:\", uploadFileResponse);\n        return uploadFileResponse;\n    }\n    /**\n   * @param {string} url The URL of the file to upload\n   * @param {Json} metadata JSON-parseable metadata to attach to the uploaded file(s)\n   *\n   * @example\n   * await uploadFileFromUrl(\"https://uploadthing.com/f/2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\");\n   *\n   * @example\n   * await uploadFileFromUrl([\n   *   \"https://uploadthing.com/f/2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\",\n   *   \"https://uploadthing.com/f/1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\"\n   * ])\n   */ async uploadFilesFromUrl(urls, opts) {\n        guardServerOnly();\n        const fileUrls = Array.isArray(urls) ? urls : [\n            urls\n        ];\n        const formData = new FormData();\n        formData.append(\"metadata\", JSON.stringify((opts == null ? void 0 : opts.metadata) ?? {}));\n        const filesToUpload = await Promise.all(fileUrls.map(async (url)=>{\n            if (typeof url === \"string\") url = new URL(url);\n            const filename = url.pathname.split(\"/\").pop() ?? \"unknown-filename\";\n            _chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"Downloading file:\", url);\n            const fileResponse = await this.fetch(url);\n            if (!fileResponse.ok) {\n                throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError({\n                    code: \"BAD_REQUEST\",\n                    message: \"Failed to download requested file.\",\n                    cause: fileResponse\n                });\n            }\n            _chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"Finished downloading file. Reading blob...\");\n            const blob = await fileResponse.blob();\n            _chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"Finished reading blob.\");\n            return Object.assign(blob, {\n                name: filename\n            });\n        }));\n        _chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"All files downloaded, uploading...\");\n        const uploads = await uploadFilesInternal({\n            files: filesToUpload,\n            metadata: (opts == null ? void 0 : opts.metadata) ?? {},\n            contentDisposition: (opts == null ? void 0 : opts.contentDisposition) ?? \"inline\",\n            acl: opts == null ? void 0 : opts.acl\n        }, {\n            fetch: this.fetch,\n            utRequestHeaders: this.defaultHeaders\n        });\n        const uploadFileResponse = Array.isArray(urls) ? uploads : uploads[0];\n        _chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"Finished uploading:\", uploadFileResponse);\n        return uploadFileResponse;\n    }\n    /**\n   * Request to delete files from UploadThing storage.\n   * @param {string | string[]} fileKeys\n   *\n   * @example\n   * await deleteFiles(\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\");\n   *\n   * @example\n   * await deleteFiles([\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\",\"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\"])\n   */ async deleteFiles(fileKeys) {\n        guardServerOnly();\n        if (!Array.isArray(fileKeys)) fileKeys = [\n            fileKeys\n        ];\n        return this.requestUploadThing(\"/api/deleteFile\", {\n            fileKeys\n        }, \"An unknown error occured while deleting files.\");\n    }\n    /**\n   * Request file URLs from UploadThing storage.\n   * @param {string | string[]} fileKeys\n   *\n   * @example\n   * const data = await getFileUrls(\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\");\n   * console.log(data); // [{key: \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", url: \"https://uploadthing.com/f/2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\"}]\n   *\n   * @example\n   * const data = await getFileUrls([\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\",\"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\"])\n   * console.log(data) // [{key: \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", url: \"https://uploadthing.com/f/2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\" },{key: \"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\", url: \"https://uploadthing.com/f/1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\"}]\n   */ async getFileUrls(fileKeys) {\n        guardServerOnly();\n        if (!Array.isArray(fileKeys)) fileKeys = [\n            fileKeys\n        ];\n        const json = await this.requestUploadThing(\"/api/getFileUrl\", {\n            fileKeys\n        }, \"An unknown error occured while retrieving file URLs.\");\n        return json.data;\n    }\n    /**\n   * Request file list from UploadThing storage.\n   * @param {object} opts\n   * @param {number} opts.limit The maximum number of files to return\n   * @param {number} opts.offset The number of files to skip\n   *\n   * @example\n   * const data = await listFiles({ limit: 1 });\n   * console.log(data); // { key: \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", id: \"2e0fdb64-9957-4262-8e45-f372ba903ac8\" }\n   */ async listFiles(opts) {\n        guardServerOnly();\n        const json = await this.requestUploadThing(\"/api/listFiles\", opts, \"An unknown error occured while listing files.\");\n        return json.files;\n    }\n    async renameFiles(updates) {\n        guardServerOnly();\n        if (!Array.isArray(updates)) updates = [\n            updates\n        ];\n        return this.requestUploadThing(\"/api/renameFiles\", {\n            updates\n        }, \"An unknown error occured while renaming files.\");\n    }\n    async getUsageInfo() {\n        guardServerOnly();\n        return this.requestUploadThing(\"/api/getUsageInfo\", {}, \"An unknown error occured while getting usage info.\");\n    }\n    /** Request a presigned url for a private file(s) */ async getSignedURL(fileKey, opts) {\n        guardServerOnly();\n        const expiresIn = (opts == null ? void 0 : opts.expiresIn) ? parseTimeToSeconds(opts.expiresIn) : void 0;\n        if ((opts == null ? void 0 : opts.expiresIn) && isNaN(expiresIn)) {\n            throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"expiresIn must be a valid time string, for example '1d', '2 days', or a number of seconds.\"\n            });\n        }\n        if (expiresIn && expiresIn > 86400 * 7) {\n            throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"expiresIn must be less than 7 days (604800 seconds).\"\n            });\n        }\n        const json = await this.requestUploadThing(\"/api/requestFileAccess\", {\n            fileKey,\n            expiresIn\n        }, \"An unknown error occured while retrieving presigned URLs.\");\n        return json.url;\n    }\n};\n// src/server.ts\nvar createUploadthing = (opts)=>(0,_chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.createBuilder)(opts);\nvar INTERNAL_DO_NOT_USE_createRouteHandlerCore = (opts, adapter)=>{\n    var _a;\n    (0,_chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.initLogger)((_a = opts.config) == null ? void 0 : _a.logLevel);\n    (0,_chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.incompatibleNodeGuard)();\n    const requestHandler = (0,_chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.buildRequestHandler)(opts, adapter);\n    const getBuildPerms = (0,_chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.buildPermissionsInfoHandler)(opts);\n    const POST = async (request)=>{\n        const req = request instanceof Request ? request : request.request;\n        const response = await requestHandler({\n            nativeRequest: req,\n            originalRequest: req,\n            event: void 0,\n            res: void 0\n        });\n        if (response instanceof _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError) {\n            return new Response(JSON.stringify((0,_chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.formatError)(response, opts.router)), {\n                status: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.getStatusCodeFromError)(response),\n                headers: {\n                    \"x-uploadthing-version\": _chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.UPLOADTHING_VERSION\n                }\n            });\n        }\n        if (response.status !== 200) {\n            return new Response(\"An unknown error occured\", {\n                status: 500,\n                headers: {\n                    \"x-uploadthing-version\": _chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.UPLOADTHING_VERSION\n                }\n            });\n        }\n        const res = new Response(JSON.stringify(response.body), {\n            status: response.status,\n            headers: {\n                \"x-uploadthing-version\": _chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.UPLOADTHING_VERSION\n            }\n        });\n        res.cleanup = response.cleanup;\n        return res;\n    };\n    const GET = (request)=>{\n        const _req = request instanceof Request ? request : request.request;\n        return new Response(JSON.stringify(getBuildPerms()), {\n            status: 200,\n            headers: {\n                \"x-uploadthing-version\": _chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.UPLOADTHING_VERSION\n            }\n        });\n    };\n    return {\n        GET,\n        POST\n    };\n};\nvar createRouteHandler = (opts)=>INTERNAL_DO_NOT_USE_createRouteHandlerCore(opts, \"server\");\nvar extractRouterConfig = (router)=>(0,_chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_1__.buildPermissionsInfoHandler)({\n        router\n    })();\nvar createServerHandler = createRouteHandler;\n //# sourceMappingURL=chunk-HDSWJLNP.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9jaHVuay1IRFNXSkxOUC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFFOEI7QUFVQTtBQUU5QixnQkFBZ0I7QUFDb0Y7QUFFcEcsbUJBQW1CO0FBQzJCO0FBQ2lGO0FBRS9ILG1CQUFtQjtBQUNlO0FBS0w7QUFDN0IsU0FBU2tCO0lBQ1AsSUFBSSxLQUE2QixFQUFFLEVBS2xDO0FBQ0g7QUFDQSxTQUFTRyxpQkFBaUJDLE1BQU07SUFDOUIsSUFBSUEsUUFDRixPQUFPQTtJQUNULElBQUlWLDRDQUFPQSxDQUFDVyxHQUFHLENBQUNDLGtCQUFrQixFQUNoQyxPQUFPWiw0Q0FBT0EsQ0FBQ1csR0FBRyxDQUFDQyxrQkFBa0I7SUFDdkMsTUFBTSxJQUFJZCxpRUFBZ0JBLENBQUM7UUFDekJTLE1BQU07UUFDTkMsU0FBUztJQUNYO0FBQ0Y7QUFDQSxJQUFJSyxzQkFBc0IsT0FBT0MsTUFBTUM7SUFDckMsTUFBTUMsV0FBV0YsS0FBS0csS0FBSyxDQUFDQyxHQUFHLENBQUMsQ0FBQ0MsT0FBVTtZQUN6Q0MsTUFBTUQsS0FBS0MsSUFBSSxJQUFJO1lBQ25CQyxNQUFNRixLQUFLRSxJQUFJO1lBQ2ZDLE1BQU1ILEtBQUtHLElBQUk7UUFDakI7SUFDQTFCLHVEQUFNQSxDQUFDMkIsS0FBSyxDQUFDLG9DQUFvQ1A7SUFDakQsTUFBTVEsTUFBTSxNQUFNVCxLQUFLVSxLQUFLLENBQUN2QiwyRUFBc0JBLENBQUMscUJBQXFCO1FBQ3ZFd0IsUUFBUTtRQUNSQyxTQUFTWixLQUFLYSxnQkFBZ0I7UUFDOUJDLE9BQU87UUFDUEMsTUFBTUMsS0FBS0MsU0FBUyxDQUFDO1lBQ25CZixPQUFPRDtZQUNQaUIsVUFBVW5CLEtBQUttQixRQUFRO1lBQ3ZCQyxvQkFBb0JwQixLQUFLb0Isa0JBQWtCO1lBQzNDQyxLQUFLckIsS0FBS3FCLEdBQUc7UUFDZjtJQUNGO0lBQ0EsSUFBSSxDQUFDWCxJQUFJWSxFQUFFLEVBQUU7UUFDWCxNQUFNQyxRQUFRLE1BQU12QyxpRUFBZ0JBLENBQUN3QyxZQUFZLENBQUNkO1FBQ2xENUIsdURBQU1BLENBQUMyQixLQUFLLENBQUMsa0NBQWtDYztRQUMvQyxNQUFNQTtJQUNSO0lBQ0EsSUFBSSxDQUFDYixJQUFJWSxFQUFFLEVBQUU7UUFDWCxNQUFNQyxRQUFRLE1BQU12QyxpRUFBZ0JBLENBQUN3QyxZQUFZLENBQUNkO1FBQ2xENUIsdURBQU1BLENBQUMyQixLQUFLLENBQUMsa0NBQWtDYztRQUMvQyxNQUFNQTtJQUNSO0lBQ0EsTUFBTUUsT0FBTyxNQUFNZixJQUFJZSxJQUFJO0lBQzNCM0MsdURBQU1BLENBQUMyQixLQUFLLENBQUMsdUJBQXVCZ0IsS0FBS3pCLElBQUk7SUFDN0NsQix1REFBTUEsQ0FBQzJCLEtBQUssQ0FBQztJQUNiLE1BQU1pQixVQUFVLE1BQU1DLFFBQVFDLFVBQVUsQ0FDdEM1QixLQUFLRyxLQUFLLENBQUNDLEdBQUcsQ0FBQyxPQUFPQyxNQUFNd0I7UUFDMUIsTUFBTSxFQUFFQyxhQUFhLEVBQUVDLEdBQUcsRUFBRUMsT0FBTyxFQUFFQyxRQUFRLEVBQUVDLFNBQVMsRUFBRSxHQUFHVCxLQUFLekIsSUFBSSxDQUFDNkIsRUFBRTtRQUN6RSxJQUFJLENBQUNDLGlCQUFpQixDQUFDSyxNQUFNQyxPQUFPLENBQUNOLGdCQUFnQjtZQUNuRGhELHVEQUFNQSxDQUFDeUMsS0FBSyxDQUNWLDhDQUNBbEIsTUFDQW9CLEtBQUt6QixJQUFJLENBQUM2QixFQUFFO1lBRWQsTUFBTSxJQUFJN0MsaUVBQWdCQSxDQUFDO2dCQUN6QlMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVDJDLE9BQU9wQixLQUFLQyxTQUFTLENBQUNPLEtBQUt6QixJQUFJLENBQUM2QixFQUFFO1lBQ3BDO1FBQ0Y7UUFDQS9DLHVEQUFNQSxDQUFDMkIsS0FBSyxDQUNWLGtCQUNBSixLQUFLQyxJQUFJLEVBQ1QsUUFDQXdCLGNBQWNRLE1BQU0sRUFDcEIsa0JBQ0FKLFdBQ0E7UUFFRixNQUFNSyxRQUFRLE1BQU1aLFFBQVFhLEdBQUcsQ0FDN0JWLGNBQWMxQixHQUFHLENBQUMsT0FBT3FDLEtBQUtDO1lBQzVCLE1BQU1DLFNBQVNULFlBQVlRO1lBQzNCLE1BQU1FLE1BQU1DLEtBQUtDLEdBQUcsQ0FBQ0gsU0FBU1QsV0FBVzdCLEtBQUtHLElBQUk7WUFDbEQsTUFBTXVDLFFBQVExQyxLQUFLMkMsS0FBSyxDQUFDTCxRQUFRQztZQUNqQyxNQUFNSyxPQUFPLE1BQU0zRSwrREFBVUEsQ0FBQztnQkFDNUJxQyxPQUFPVixLQUFLVSxLQUFLO2dCQUNqQjhCO2dCQUNBTTtnQkFDQTNCLG9CQUFvQnBCLEtBQUtvQixrQkFBa0I7Z0JBQzNDOEIsYUFBYTdDLEtBQUtFLElBQUk7Z0JBQ3RCNEMsVUFBVTlDLEtBQUtDLElBQUk7Z0JBQ25COEMsWUFBWTtnQkFDWnJCO2dCQUNBakIsa0JBQWtCYixLQUFLYSxnQkFBZ0I7WUFDekM7WUFDQWhDLHVEQUFNQSxDQUFDMkIsS0FBSyxDQUFDLFFBQVFpQyxRQUFRLEdBQUcsMEJBQTBCTztZQUMxRCxPQUFPO2dCQUFFSSxLQUFLSjtnQkFBTUssWUFBWVosUUFBUTtZQUFFO1FBQzVDO1FBRUY1RCx1REFBTUEsQ0FBQzJCLEtBQUssQ0FDVixRQUNBSixLQUFLQyxJQUFJLEVBQ1Q7UUFFRixNQUFNaUQsZ0JBQWdCLE1BQU10RCxLQUFLVSxLQUFLLENBQ3BDdkIsMkVBQXNCQSxDQUFDLDJCQUN2QjtZQUNFd0IsUUFBUTtZQUNSSSxNQUFNQyxLQUFLQyxTQUFTLENBQUM7Z0JBQ25Cc0MsU0FBU3pCO2dCQUNURTtnQkFDQU07WUFDRjtZQUNBMUIsU0FBU1osS0FBS2EsZ0JBQWdCO1FBQ2hDO1FBRUZoQyx1REFBTUEsQ0FBQzJCLEtBQUssQ0FBQyxzQ0FBc0M4QyxjQUFjRSxNQUFNO1FBQ3ZFM0UsdURBQU1BLENBQUMyQixLQUFLLENBQUM7UUFDYixNQUFNbEIsb0VBQWVBLENBQUM7WUFDcEJrRCxLQUFLckQsMkVBQXNCQSxDQUFDLENBQUMsZ0JBQWdCLEVBQUUyQyxJQUFJLENBQUM7WUFDcERuQyxRQUFRSyxLQUFLYSxnQkFBZ0IsQ0FBQyx3QkFBd0I7WUFDdEQ0QyxZQUFZbkYsb0VBQW1CQTtZQUMvQm9DLE9BQU9WLEtBQUtVLEtBQUs7UUFDbkI7UUFDQTdCLHVEQUFNQSxDQUFDMkIsS0FBSyxDQUFDO1FBQ2IsT0FBTztZQUNMc0I7WUFDQVUsS0FBS1Q7WUFDTDFCLE1BQU1ELEtBQUtDLElBQUk7WUFDZkUsTUFBTUgsS0FBS0csSUFBSTtRQUNqQjtJQUNGO0lBRUYxQix1REFBTUEsQ0FBQzJCLEtBQUssQ0FBQztJQUNiLE9BQU9pQixRQUFRdEIsR0FBRyxDQUFDLENBQUN1RDtRQUNsQixJQUFJQSxPQUFPRixNQUFNLEtBQUssYUFBYTtZQUNqQyxNQUFNRyxRQUFRRCxPQUFPRSxLQUFLO1lBQzFCLE9BQU87Z0JBQUU3RCxNQUFNNEQ7Z0JBQU9yQyxPQUFPO1lBQUs7UUFDcEM7UUFDQSxNQUFNdUMsU0FBU0gsT0FBT0csTUFBTTtRQUM1QixNQUFNdkMsUUFBUXZDLGlFQUFnQkEsQ0FBQytFLFFBQVEsQ0FBQ0Q7UUFDeEMsT0FBTztZQUFFOUQsTUFBTTtZQUFNdUI7UUFBTTtJQUM3QjtBQUNGO0FBQ0EsU0FBU3lDLG1CQUFtQkMsSUFBSTtJQUM5QixNQUFNQyxRQUFRRCxLQUFLRSxRQUFRLEdBQUdDLEtBQUssQ0FBQyxTQUFTQyxNQUFNLENBQUNDO0lBQ3BELE1BQU1DLE1BQU1DLE9BQU9OLEtBQUssQ0FBQyxFQUFFO0lBQzNCLE1BQU1PLE9BQU8sQ0FBQ1AsS0FBSyxDQUFDLEVBQUUsSUFBSSxHQUFFLEVBQUdRLElBQUksR0FBRzFCLEtBQUssQ0FBQyxHQUFHO0lBQy9DLE1BQU0yQixhQUFhO1FBQ2pCQyxHQUFHO1FBQ0hDLEdBQUc7UUFDSEMsR0FBRztRQUNIQyxHQUFHO0lBQ0wsQ0FBQyxDQUFDTixLQUFLO0lBQ1AsT0FBT0YsTUFBTUk7QUFDZjtBQUVBLG1CQUFtQjtBQUNuQixJQUFJSyxRQUFRO0lBQ1ZDLFlBQVloRixJQUFJLENBQUU7UUFDaEIsaURBQWlELEdBQ2pELDZEQUE2RDtRQUM3RCxJQUFJLENBQUNpRixVQUFVLEdBQUcsSUFBSSxDQUFDQyxXQUFXO1FBQ2xDLElBQUlDO1FBQ0osSUFBSSxDQUFDekUsS0FBSyxHQUFHLENBQUNWLFFBQVEsT0FBTyxLQUFLLElBQUlBLEtBQUtVLEtBQUssS0FBSzBFLFdBQVcxRSxLQUFLO1FBQ3JFLElBQUksQ0FBQ2YsTUFBTSxHQUFHLENBQUNLLFFBQVEsT0FBTyxLQUFLLElBQUlBLEtBQUtMLE1BQU0sS0FBS1QsNENBQVFBLENBQUNVLEdBQUcsQ0FBQ0Msa0JBQWtCO1FBQ3RGLElBQUksQ0FBQ3dGLGNBQWMsR0FBRztZQUNwQixnQkFBZ0I7WUFDaEIseUJBQXlCLElBQUksQ0FBQzFGLE1BQU07WUFDcEMseUJBQXlCckIsb0VBQW1CQTtZQUM1Qyw0QkFBNEI7UUFDOUI7UUFDQU0sK0RBQVVBLENBQUNvQixRQUFRLE9BQU8sS0FBSyxJQUFJQSxLQUFLc0YsUUFBUTtRQUNoRC9GO1FBQ0FHLGlCQUFpQixJQUFJLENBQUNDLE1BQU07UUFDNUIsSUFBSSxDQUFFLEVBQUN3RixLQUFLLElBQUksQ0FBQ3hGLE1BQU0sS0FBSyxPQUFPLEtBQUssSUFBSXdGLEdBQUdJLFVBQVUsQ0FBQyxNQUFLLEdBQUk7WUFDakUsTUFBTSxJQUFJbEcsaUVBQWlCQSxDQUFDO2dCQUMxQkcsTUFBTTtnQkFDTkMsU0FBUztZQUNYO1FBQ0Y7UUFDQWQsMEVBQXFCQTtJQUN2QjtJQUNBLE1BQU02RyxtQkFBbUJDLFFBQVEsRUFBRTFFLElBQUksRUFBRTJFLG9CQUFvQixFQUFFO1FBQzdELE1BQU1sRCxNQUFNcEQsMkVBQXVCQSxDQUFDcUc7UUFDcEM1Ryx1REFBTUEsQ0FBQzJCLEtBQUssQ0FBQywyQkFBMkI7WUFDdENnQztZQUNBekI7WUFDQUgsU0FBUyxJQUFJLENBQUN5RSxjQUFjO1FBQzlCO1FBQ0EsTUFBTTVFLE1BQU0sTUFBTSxJQUFJLENBQUNDLEtBQUssQ0FBQzhCLEtBQUs7WUFDaEM3QixRQUFRO1lBQ1JHLE9BQU87WUFDUEYsU0FBUyxJQUFJLENBQUN5RSxjQUFjO1lBQzVCdEUsTUFBTUMsS0FBS0MsU0FBUyxDQUFDRjtRQUN2QjtRQUNBbEMsdURBQU1BLENBQUMyQixLQUFLLENBQUMsc0NBQXNDQyxJQUFJK0MsTUFBTTtRQUM3RCxNQUFNaEMsT0FBTyxNQUFNZixJQUFJZSxJQUFJO1FBQzNCLElBQUksQ0FBQ2YsSUFBSVksRUFBRSxJQUFJLFdBQVdHLE1BQU07WUFDOUIzQyx1REFBTUEsQ0FBQ3lDLEtBQUssQ0FBQyxVQUFVRTtZQUN2QixNQUFNLElBQUluQyxpRUFBaUJBLENBQUM7Z0JBQzFCRyxNQUFNO2dCQUNOQyxTQUFTLFdBQVcrQixRQUFRLE9BQU9BLEtBQUtGLEtBQUssS0FBSyxXQUFXRSxLQUFLRixLQUFLLEdBQUdvRTtZQUM1RTtRQUNGO1FBQ0E3Ryx1REFBTUEsQ0FBQzJCLEtBQUssQ0FBQyx5QkFBeUJnQjtRQUN0QyxPQUFPQTtJQUNUO0lBQ0E7Ozs7Ozs7Ozs7O0dBV0MsR0FDRCxNQUFNbUUsWUFBWXpGLEtBQUssRUFBRUYsSUFBSSxFQUFFO1FBQzdCVDtRQUNBLE1BQU1xRyxnQkFBZ0IxRCxNQUFNQyxPQUFPLENBQUNqQyxTQUFTQSxRQUFRO1lBQUNBO1NBQU07UUFDNURyQix1REFBTUEsQ0FBQzJCLEtBQUssQ0FBQyxvQkFBb0JvRjtRQUNqQyxNQUFNbkUsVUFBVSxNQUFNM0Isb0JBQ3BCO1lBQ0VJLE9BQU8wRjtZQUNQMUUsVUFBVSxDQUFDbEIsUUFBUSxPQUFPLEtBQUssSUFBSUEsS0FBS2tCLFFBQVEsS0FBSyxDQUFDO1lBQ3REQyxvQkFBb0IsQ0FBQ25CLFFBQVEsT0FBTyxLQUFLLElBQUlBLEtBQUttQixrQkFBa0IsS0FBSztZQUN6RUMsS0FBS3BCLFFBQVEsT0FBTyxLQUFLLElBQUlBLEtBQUtvQixHQUFHO1FBQ3ZDLEdBQ0E7WUFDRVYsT0FBTyxJQUFJLENBQUNBLEtBQUs7WUFDakJHLGtCQUFrQixJQUFJLENBQUN3RSxjQUFjO1FBQ3ZDO1FBRUYsTUFBTVEscUJBQXFCM0QsTUFBTUMsT0FBTyxDQUFDakMsU0FBU3VCLFVBQVVBLE9BQU8sQ0FBQyxFQUFFO1FBQ3RFNUMsdURBQU1BLENBQUMyQixLQUFLLENBQUMsdUJBQXVCcUY7UUFDcEMsT0FBT0E7SUFDVDtJQUNBOzs7Ozs7Ozs7Ozs7R0FZQyxHQUNELE1BQU1DLG1CQUFtQkMsSUFBSSxFQUFFL0YsSUFBSSxFQUFFO1FBQ25DVDtRQUNBLE1BQU15RyxXQUFXOUQsTUFBTUMsT0FBTyxDQUFDNEQsUUFBUUEsT0FBTztZQUFDQTtTQUFLO1FBQ3BELE1BQU1FLFdBQVcsSUFBSUM7UUFDckJELFNBQVNFLE1BQU0sQ0FBQyxZQUFZbkYsS0FBS0MsU0FBUyxDQUFDLENBQUNqQixRQUFRLE9BQU8sS0FBSyxJQUFJQSxLQUFLa0IsUUFBUSxLQUFLLENBQUM7UUFDdkYsTUFBTTBFLGdCQUFnQixNQUFNbEUsUUFBUWEsR0FBRyxDQUNyQ3lELFNBQVM3RixHQUFHLENBQUMsT0FBT3FDO1lBQ2xCLElBQUksT0FBT0EsUUFBUSxVQUNqQkEsTUFBTSxJQUFJNEQsSUFBSTVEO1lBQ2hCLE1BQU02RCxXQUFXN0QsSUFBSWlELFFBQVEsQ0FBQ3RCLEtBQUssQ0FBQyxLQUFLbUMsR0FBRyxNQUFNO1lBQ2xEekgsdURBQU1BLENBQUMyQixLQUFLLENBQUMscUJBQXFCZ0M7WUFDbEMsTUFBTStELGVBQWUsTUFBTSxJQUFJLENBQUM3RixLQUFLLENBQUM4QjtZQUN0QyxJQUFJLENBQUMrRCxhQUFhbEYsRUFBRSxFQUFFO2dCQUNwQixNQUFNLElBQUloQyxpRUFBaUJBLENBQUM7b0JBQzFCRyxNQUFNO29CQUNOQyxTQUFTO29CQUNUMkMsT0FBT21FO2dCQUNUO1lBQ0Y7WUFDQTFILHVEQUFNQSxDQUFDMkIsS0FBSyxDQUFDO1lBQ2IsTUFBTWdHLE9BQU8sTUFBTUQsYUFBYUMsSUFBSTtZQUNwQzNILHVEQUFNQSxDQUFDMkIsS0FBSyxDQUFDO1lBQ2IsT0FBT2lHLE9BQU9DLE1BQU0sQ0FBQ0YsTUFBTTtnQkFBRW5HLE1BQU1nRztZQUFTO1FBQzlDO1FBRUZ4SCx1REFBTUEsQ0FBQzJCLEtBQUssQ0FBQztRQUNiLE1BQU1pQixVQUFVLE1BQU0zQixvQkFDcEI7WUFDRUksT0FBTzBGO1lBQ1AxRSxVQUFVLENBQUNsQixRQUFRLE9BQU8sS0FBSyxJQUFJQSxLQUFLa0IsUUFBUSxLQUFLLENBQUM7WUFDdERDLG9CQUFvQixDQUFDbkIsUUFBUSxPQUFPLEtBQUssSUFBSUEsS0FBS21CLGtCQUFrQixLQUFLO1lBQ3pFQyxLQUFLcEIsUUFBUSxPQUFPLEtBQUssSUFBSUEsS0FBS29CLEdBQUc7UUFDdkMsR0FDQTtZQUNFVixPQUFPLElBQUksQ0FBQ0EsS0FBSztZQUNqQkcsa0JBQWtCLElBQUksQ0FBQ3dFLGNBQWM7UUFDdkM7UUFFRixNQUFNUSxxQkFBcUIzRCxNQUFNQyxPQUFPLENBQUM0RCxRQUFRdEUsVUFBVUEsT0FBTyxDQUFDLEVBQUU7UUFDckU1Qyx1REFBTUEsQ0FBQzJCLEtBQUssQ0FBQyx1QkFBdUJxRjtRQUNwQyxPQUFPQTtJQUNUO0lBQ0E7Ozs7Ozs7OztHQVNDLEdBQ0QsTUFBTWMsWUFBWUMsUUFBUSxFQUFFO1FBQzFCckg7UUFDQSxJQUFJLENBQUMyQyxNQUFNQyxPQUFPLENBQUN5RSxXQUNqQkEsV0FBVztZQUFDQTtTQUFTO1FBQ3ZCLE9BQU8sSUFBSSxDQUFDcEIsa0JBQWtCLENBQzVCLG1CQUNBO1lBQUVvQjtRQUFTLEdBQ1g7SUFFSjtJQUNBOzs7Ozs7Ozs7OztHQVdDLEdBQ0QsTUFBTUMsWUFBWUQsUUFBUSxFQUFFO1FBQzFCckg7UUFDQSxJQUFJLENBQUMyQyxNQUFNQyxPQUFPLENBQUN5RSxXQUNqQkEsV0FBVztZQUFDQTtTQUFTO1FBQ3ZCLE1BQU1wRixPQUFPLE1BQU0sSUFBSSxDQUFDZ0Usa0JBQWtCLENBQ3hDLG1CQUNBO1lBQUVvQjtRQUFTLEdBQ1g7UUFFRixPQUFPcEYsS0FBS3pCLElBQUk7SUFDbEI7SUFDQTs7Ozs7Ozs7O0dBU0MsR0FDRCxNQUFNK0csVUFBVTlHLElBQUksRUFBRTtRQUNwQlQ7UUFDQSxNQUFNaUMsT0FBTyxNQUFNLElBQUksQ0FBQ2dFLGtCQUFrQixDQUFDLGtCQUFrQnhGLE1BQU07UUFDbkUsT0FBT3dCLEtBQUt0QixLQUFLO0lBQ25CO0lBQ0EsTUFBTWdGLFlBQVk2QixPQUFPLEVBQUU7UUFDekJ4SDtRQUNBLElBQUksQ0FBQzJDLE1BQU1DLE9BQU8sQ0FBQzRFLFVBQ2pCQSxVQUFVO1lBQUNBO1NBQVE7UUFDckIsT0FBTyxJQUFJLENBQUN2QixrQkFBa0IsQ0FDNUIsb0JBQ0E7WUFBRXVCO1FBQVEsR0FDVjtJQUVKO0lBQ0EsTUFBTUMsZUFBZTtRQUNuQnpIO1FBQ0EsT0FBTyxJQUFJLENBQUNpRyxrQkFBa0IsQ0FDNUIscUJBQ0EsQ0FBQyxHQUNEO0lBRUo7SUFDQSxrREFBa0QsR0FDbEQsTUFBTXlCLGFBQWExRCxPQUFPLEVBQUV2RCxJQUFJLEVBQUU7UUFDaENUO1FBQ0EsTUFBTTJILFlBQVksQ0FBQ2xILFFBQVEsT0FBTyxLQUFLLElBQUlBLEtBQUtrSCxTQUFTLElBQUluRCxtQkFBbUIvRCxLQUFLa0gsU0FBUyxJQUFJLEtBQUs7UUFDdkcsSUFBSSxDQUFDbEgsUUFBUSxPQUFPLEtBQUssSUFBSUEsS0FBS2tILFNBQVMsS0FBS0MsTUFBTUQsWUFBWTtZQUNoRSxNQUFNLElBQUk3SCxpRUFBaUJBLENBQUM7Z0JBQzFCRyxNQUFNO2dCQUNOQyxTQUFTO1lBQ1g7UUFDRjtRQUNBLElBQUl5SCxhQUFhQSxZQUFZLFFBQVEsR0FBRztZQUN0QyxNQUFNLElBQUk3SCxpRUFBaUJBLENBQUM7Z0JBQzFCRyxNQUFNO2dCQUNOQyxTQUFTO1lBQ1g7UUFDRjtRQUNBLE1BQU0rQixPQUFPLE1BQU0sSUFBSSxDQUFDZ0Usa0JBQWtCLENBQ3hDLDBCQUNBO1lBQUVqQztZQUFTMkQ7UUFBVSxHQUNyQjtRQUVGLE9BQU8xRixLQUFLZ0IsR0FBRztJQUNqQjtBQUNGO0FBRUEsZ0JBQWdCO0FBQ2hCLElBQUk0RSxvQkFBb0IsQ0FBQ3BILE9BQVN2QixrRUFBYUEsQ0FBQ3VCO0FBQ2hELElBQUlxSCw2Q0FBNkMsQ0FBQ3JILE1BQU1zSDtJQUN0RCxJQUFJbkM7SUFDSnZHLCtEQUFVQSxDQUFDLENBQUN1RyxLQUFLbkYsS0FBS3VILE1BQU0sS0FBSyxPQUFPLEtBQUssSUFBSXBDLEdBQUdHLFFBQVE7SUFDNUQzRywwRUFBcUJBO0lBQ3JCLE1BQU02SSxpQkFBaUJoSix3RUFBbUJBLENBQ3hDd0IsTUFDQXNIO0lBRUYsTUFBTUcsZ0JBQWdCbEosZ0ZBQTJCQSxDQUFDeUI7SUFDbEQsTUFBTTBILE9BQU8sT0FBT0M7UUFDbEIsTUFBTUMsTUFBTUQsbUJBQW1CRSxVQUFVRixVQUFVQSxRQUFRQSxPQUFPO1FBQ2xFLE1BQU1HLFdBQVcsTUFBTU4sZUFBZTtZQUNwQ08sZUFBZUg7WUFDZkksaUJBQWlCSjtZQUNqQkssT0FBTyxLQUFLO1lBQ1p4SCxLQUFLLEtBQUs7UUFDWjtRQUNBLElBQUlxSCxvQkFBb0I5SSxpRUFBaUJBLEVBQUU7WUFDekMsT0FBTyxJQUFJa0osU0FBU2xILEtBQUtDLFNBQVMsQ0FBQ3ZDLGdFQUFXQSxDQUFDb0osVUFBVTlILEtBQUttSSxNQUFNLElBQUk7Z0JBQ3RFM0UsUUFBUTFFLDJFQUFzQkEsQ0FBQ2dKO2dCQUMvQmxILFNBQVM7b0JBQ1AseUJBQXlCdEMsb0VBQW1CQTtnQkFDOUM7WUFDRjtRQUNGO1FBQ0EsSUFBSXdKLFNBQVN0RSxNQUFNLEtBQUssS0FBSztZQUMzQixPQUFPLElBQUkwRSxTQUFTLDRCQUE0QjtnQkFDOUMxRSxRQUFRO2dCQUNSNUMsU0FBUztvQkFDUCx5QkFBeUJ0QyxvRUFBbUJBO2dCQUM5QztZQUNGO1FBQ0Y7UUFDQSxNQUFNbUMsTUFBTSxJQUFJeUgsU0FBU2xILEtBQUtDLFNBQVMsQ0FBQzZHLFNBQVMvRyxJQUFJLEdBQUc7WUFDdER5QyxRQUFRc0UsU0FBU3RFLE1BQU07WUFDdkI1QyxTQUFTO2dCQUNQLHlCQUF5QnRDLG9FQUFtQkE7WUFDOUM7UUFDRjtRQUNBbUMsSUFBSTJILE9BQU8sR0FBR04sU0FBU00sT0FBTztRQUM5QixPQUFPM0g7SUFDVDtJQUNBLE1BQU00SCxNQUFNLENBQUNWO1FBQ1gsTUFBTVcsT0FBT1gsbUJBQW1CRSxVQUFVRixVQUFVQSxRQUFRQSxPQUFPO1FBQ25FLE9BQU8sSUFBSU8sU0FBU2xILEtBQUtDLFNBQVMsQ0FBQ3dHLGtCQUFrQjtZQUNuRGpFLFFBQVE7WUFDUjVDLFNBQVM7Z0JBQ1AseUJBQXlCdEMsb0VBQW1CQTtZQUM5QztRQUNGO0lBQ0Y7SUFDQSxPQUFPO1FBQUUrSjtRQUFLWDtJQUFLO0FBQ3JCO0FBQ0EsSUFBSWEscUJBQXFCLENBQUN2SSxPQUFTcUgsMkNBQTJDckgsTUFBTTtBQUNwRixJQUFJd0ksc0JBQXNCLENBQUNMLFNBQVc1SixnRkFBMkJBLENBQUM7UUFBRTRKO0lBQU87QUFDM0UsSUFBSU0sc0JBQXNCRjtBQVV4QixDQUNGLDJDQUEyQyIsInNvdXJjZXMiOlsid2VicGFjazovL3N5bmNjaGF0Ly4vbm9kZV9tb2R1bGVzL3VwbG9hZHRoaW5nL2Rpc3QvY2h1bmstSERTV0pMTlAubWpzP2EzZTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgdXBsb2FkUGFydFxufSBmcm9tIFwiLi9jaHVuay1TM1IzVlhSSy5tanNcIjtcbmltcG9ydCB7XG4gIFVQTE9BRFRISU5HX1ZFUlNJT04sXG4gIGJ1aWxkUGVybWlzc2lvbnNJbmZvSGFuZGxlcixcbiAgYnVpbGRSZXF1ZXN0SGFuZGxlcixcbiAgY3JlYXRlQnVpbGRlcixcbiAgZm9ybWF0RXJyb3IsXG4gIGluY29tcGF0aWJsZU5vZGVHdWFyZCxcbiAgaW5pdExvZ2dlcixcbiAgbG9nZ2VyXG59IGZyb20gXCIuL2NodW5rLVZGNTZPQjZULm1qc1wiO1xuXG4vLyBzcmMvc2VydmVyLnRzXG5pbXBvcnQgeyBnZXRTdGF0dXNDb2RlRnJvbUVycm9yLCBVcGxvYWRUaGluZ0Vycm9yIGFzIFVwbG9hZFRoaW5nRXJyb3IzIH0gZnJvbSBcIkB1cGxvYWR0aGluZy9zaGFyZWRcIjtcblxuLy8gc3JjL3Nkay9pbmRleC50c1xuaW1wb3J0IHsgcHJvY2VzcyBhcyBwcm9jZXNzMiB9IGZyb20gXCJzdGQtZW52XCI7XG5pbXBvcnQgeyBnZW5lcmF0ZVVwbG9hZFRoaW5nVVJMIGFzIGdlbmVyYXRlVXBsb2FkVGhpbmdVUkwyLCBVcGxvYWRUaGluZ0Vycm9yIGFzIFVwbG9hZFRoaW5nRXJyb3IyIH0gZnJvbSBcIkB1cGxvYWR0aGluZy9zaGFyZWRcIjtcblxuLy8gc3JjL3Nkay91dGlscy50c1xuaW1wb3J0IHsgcHJvY2VzcyB9IGZyb20gXCJzdGQtZW52XCI7XG5pbXBvcnQge1xuICBnZW5lcmF0ZVVwbG9hZFRoaW5nVVJMLFxuICBwb2xsRm9yRmlsZURhdGEsXG4gIFVwbG9hZFRoaW5nRXJyb3Jcbn0gZnJvbSBcIkB1cGxvYWR0aGluZy9zaGFyZWRcIjtcbmZ1bmN0aW9uIGd1YXJkU2VydmVyT25seSgpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICBjb2RlOiBcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLFxuICAgICAgbWVzc2FnZTogXCJUaGUgYHV0YXBpYCBjYW4gb25seSBiZSB1c2VkIG9uIHRoZSBzZXJ2ZXIuXCJcbiAgICB9KTtcbiAgfVxufVxuZnVuY3Rpb24gZ2V0QXBpS2V5T3JUaHJvdyhhcGlLZXkpIHtcbiAgaWYgKGFwaUtleSlcbiAgICByZXR1cm4gYXBpS2V5O1xuICBpZiAocHJvY2Vzcy5lbnYuVVBMT0FEVEhJTkdfU0VDUkVUKVxuICAgIHJldHVybiBwcm9jZXNzLmVudi5VUExPQURUSElOR19TRUNSRVQ7XG4gIHRocm93IG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICBjb2RlOiBcIk1JU1NJTkdfRU5WXCIsXG4gICAgbWVzc2FnZTogXCJNaXNzaW5nIGBVUExPQURUSElOR19TRUNSRVRgIGVudiB2YXJpYWJsZS5cIlxuICB9KTtcbn1cbnZhciB1cGxvYWRGaWxlc0ludGVybmFsID0gYXN5bmMgKGRhdGEsIG9wdHMpID0+IHtcbiAgY29uc3QgZmlsZURhdGEgPSBkYXRhLmZpbGVzLm1hcCgoZmlsZSkgPT4gKHtcbiAgICBuYW1lOiBmaWxlLm5hbWUgPz8gXCJ1bm5hbWVkLWJsb2JcIixcbiAgICB0eXBlOiBmaWxlLnR5cGUsXG4gICAgc2l6ZTogZmlsZS5zaXplXG4gIH0pKTtcbiAgbG9nZ2VyLmRlYnVnKFwiR2V0dGluZyBwcmVzaWduZWQgVVJMcyBmb3IgZmlsZXNcIiwgZmlsZURhdGEpO1xuICBjb25zdCByZXMgPSBhd2FpdCBvcHRzLmZldGNoKGdlbmVyYXRlVXBsb2FkVGhpbmdVUkwoXCIvYXBpL3VwbG9hZEZpbGVzXCIpLCB7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICBoZWFkZXJzOiBvcHRzLnV0UmVxdWVzdEhlYWRlcnMsXG4gICAgY2FjaGU6IFwibm8tc3RvcmVcIixcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICBmaWxlczogZmlsZURhdGEsXG4gICAgICBtZXRhZGF0YTogZGF0YS5tZXRhZGF0YSxcbiAgICAgIGNvbnRlbnREaXNwb3NpdGlvbjogZGF0YS5jb250ZW50RGlzcG9zaXRpb24sXG4gICAgICBhY2w6IGRhdGEuYWNsXG4gICAgfSlcbiAgfSk7XG4gIGlmICghcmVzLm9rKSB7XG4gICAgY29uc3QgZXJyb3IgPSBhd2FpdCBVcGxvYWRUaGluZ0Vycm9yLmZyb21SZXNwb25zZShyZXMpO1xuICAgIGxvZ2dlci5kZWJ1ZyhcIkZhaWxlZCBnZXR0aW5nIHByZXNpZ25lZCBVUkxzOlwiLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbiAgaWYgKCFyZXMub2spIHtcbiAgICBjb25zdCBlcnJvciA9IGF3YWl0IFVwbG9hZFRoaW5nRXJyb3IuZnJvbVJlc3BvbnNlKHJlcyk7XG4gICAgbG9nZ2VyLmRlYnVnKFwiRmFpbGVkIGdldHRpbmcgcHJlc2lnbmVkIFVSTHM6XCIsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxuICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgbG9nZ2VyLmRlYnVnKFwiR290IHByZXNpZ25lZCBVUkxzOlwiLCBqc29uLmRhdGEpO1xuICBsb2dnZXIuZGVidWcoXCJTdGFydGluZyB1cGxvYWRzLi4uXCIpO1xuICBjb25zdCB1cGxvYWRzID0gYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKFxuICAgIGRhdGEuZmlsZXMubWFwKGFzeW5jIChmaWxlLCBpKSA9PiB7XG4gICAgICBjb25zdCB7IHByZXNpZ25lZFVybHMsIGtleSwgZmlsZVVybCwgdXBsb2FkSWQsIGNodW5rU2l6ZSB9ID0ganNvbi5kYXRhW2ldO1xuICAgICAgaWYgKCFwcmVzaWduZWRVcmxzIHx8ICFBcnJheS5pc0FycmF5KHByZXNpZ25lZFVybHMpKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcbiAgICAgICAgICBcIkZhaWxlZCB0byBnZW5lcmF0ZSBwcmVzaWduZWQgVVJMIGZvciBmaWxlOlwiLFxuICAgICAgICAgIGZpbGUsXG4gICAgICAgICAganNvbi5kYXRhW2ldXG4gICAgICAgICk7XG4gICAgICAgIHRocm93IG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICBjb2RlOiBcIlVSTF9HRU5FUkFUSU9OX0ZBSUxFRFwiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGdlbmVyYXRlIHByZXNpZ25lZCBVUkxcIixcbiAgICAgICAgICBjYXVzZTogSlNPTi5zdHJpbmdpZnkoanNvbi5kYXRhW2ldKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGxvZ2dlci5kZWJ1ZyhcbiAgICAgICAgXCJVcGxvYWRpbmcgZmlsZVwiLFxuICAgICAgICBmaWxlLm5hbWUsXG4gICAgICAgIFwid2l0aFwiLFxuICAgICAgICBwcmVzaWduZWRVcmxzLmxlbmd0aCxcbiAgICAgICAgXCJjaHVua3Mgb2Ygc2l6ZVwiLFxuICAgICAgICBjaHVua1NpemUsXG4gICAgICAgIFwiYnl0ZXMgZWFjaFwiXG4gICAgICApO1xuICAgICAgY29uc3QgZXRhZ3MgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgcHJlc2lnbmVkVXJscy5tYXAoYXN5bmMgKHVybCwgaW5kZXgpID0+IHtcbiAgICAgICAgICBjb25zdCBvZmZzZXQgPSBjaHVua1NpemUgKiBpbmRleDtcbiAgICAgICAgICBjb25zdCBlbmQgPSBNYXRoLm1pbihvZmZzZXQgKyBjaHVua1NpemUsIGZpbGUuc2l6ZSk7XG4gICAgICAgICAgY29uc3QgY2h1bmsgPSBmaWxlLnNsaWNlKG9mZnNldCwgZW5kKTtcbiAgICAgICAgICBjb25zdCBldGFnID0gYXdhaXQgdXBsb2FkUGFydCh7XG4gICAgICAgICAgICBmZXRjaDogb3B0cy5mZXRjaCxcbiAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgIGNodW5rLFxuICAgICAgICAgICAgY29udGVudERpc3Bvc2l0aW9uOiBkYXRhLmNvbnRlbnREaXNwb3NpdGlvbixcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBmaWxlLnR5cGUsXG4gICAgICAgICAgICBmaWxlTmFtZTogZmlsZS5uYW1lLFxuICAgICAgICAgICAgbWF4UmV0cmllczogMTAsXG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICB1dFJlcXVlc3RIZWFkZXJzOiBvcHRzLnV0UmVxdWVzdEhlYWRlcnNcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBsb2dnZXIuZGVidWcoXCJQYXJ0XCIsIGluZGV4ICsgMSwgXCJ1cGxvYWRlZCBzdWNjZXNzZnVsbHk6XCIsIGV0YWcpO1xuICAgICAgICAgIHJldHVybiB7IHRhZzogZXRhZywgcGFydE51bWJlcjogaW5kZXggKyAxIH07XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgICAgbG9nZ2VyLmRlYnVnKFxuICAgICAgICBcIkZpbGVcIixcbiAgICAgICAgZmlsZS5uYW1lLFxuICAgICAgICBcInVwbG9hZGVkIHN1Y2Nlc3NmdWxseS4gTm90aWZ5aW5nIFVwbG9hZFRoaW5nIHRvIGNvbXBsZXRlIG11bHRpcGFydCB1cGxvYWQuXCJcbiAgICAgICk7XG4gICAgICBjb25zdCBjb21wbGV0aW9uUmVzID0gYXdhaXQgb3B0cy5mZXRjaChcbiAgICAgICAgZ2VuZXJhdGVVcGxvYWRUaGluZ1VSTChcIi9hcGkvY29tcGxldGVNdWx0aXBhcnRcIiksXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIGZpbGVLZXk6IGtleSxcbiAgICAgICAgICAgIHVwbG9hZElkLFxuICAgICAgICAgICAgZXRhZ3NcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBoZWFkZXJzOiBvcHRzLnV0UmVxdWVzdEhlYWRlcnNcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhcIlVwbG9hZFRoaW5nIHJlc3BvbnNlZCB3aXRoIHN0YXR1czpcIiwgY29tcGxldGlvblJlcy5zdGF0dXMpO1xuICAgICAgbG9nZ2VyLmRlYnVnKFwiUG9sbGluZyBmb3IgZmlsZSBkYXRhLi4uXCIpO1xuICAgICAgYXdhaXQgcG9sbEZvckZpbGVEYXRhKHtcbiAgICAgICAgdXJsOiBnZW5lcmF0ZVVwbG9hZFRoaW5nVVJMKGAvYXBpL3BvbGxVcGxvYWQvJHtrZXl9YCksXG4gICAgICAgIGFwaUtleTogb3B0cy51dFJlcXVlc3RIZWFkZXJzW1wieC11cGxvYWR0aGluZy1hcGkta2V5XCJdLFxuICAgICAgICBzZGtWZXJzaW9uOiBVUExPQURUSElOR19WRVJTSU9OLFxuICAgICAgICBmZXRjaDogb3B0cy5mZXRjaFxuICAgICAgfSk7XG4gICAgICBsb2dnZXIuZGVidWcoXCJQb2xsaW5nIGNvbXBsZXRlLlwiKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGtleSxcbiAgICAgICAgdXJsOiBmaWxlVXJsLFxuICAgICAgICBuYW1lOiBmaWxlLm5hbWUsXG4gICAgICAgIHNpemU6IGZpbGUuc2l6ZVxuICAgICAgfTtcbiAgICB9KVxuICApO1xuICBsb2dnZXIuZGVidWcoXCJBbGwgdXBsb2FkcyBjb21wbGV0ZSwgYWdncmVnYXRpbmcgcmVzdWx0cy4uLlwiKTtcbiAgcmV0dXJuIHVwbG9hZHMubWFwKCh1cGxvYWQpID0+IHtcbiAgICBpZiAodXBsb2FkLnN0YXR1cyA9PT0gXCJmdWxmaWxsZWRcIikge1xuICAgICAgY29uc3QgZGF0YTIgPSB1cGxvYWQudmFsdWU7XG4gICAgICByZXR1cm4geyBkYXRhOiBkYXRhMiwgZXJyb3I6IG51bGwgfTtcbiAgICB9XG4gICAgY29uc3QgcmVhc29uID0gdXBsb2FkLnJlYXNvbjtcbiAgICBjb25zdCBlcnJvciA9IFVwbG9hZFRoaW5nRXJyb3IudG9PYmplY3QocmVhc29uKTtcbiAgICByZXR1cm4geyBkYXRhOiBudWxsLCBlcnJvciB9O1xuICB9KTtcbn07XG5mdW5jdGlvbiBwYXJzZVRpbWVUb1NlY29uZHModGltZSkge1xuICBjb25zdCBtYXRjaCA9IHRpbWUudG9TdHJpbmcoKS5zcGxpdCgvKFxcZCspLykuZmlsdGVyKEJvb2xlYW4pO1xuICBjb25zdCBudW0gPSBOdW1iZXIobWF0Y2hbMF0pO1xuICBjb25zdCB1bml0ID0gKG1hdGNoWzFdID8/IFwic1wiKS50cmltKCkuc2xpY2UoMCwgMSk7XG4gIGNvbnN0IG11bHRpcGxpZXIgPSB7XG4gICAgczogMSxcbiAgICBtOiA2MCxcbiAgICBoOiAzNjAwLFxuICAgIGQ6IDg2NDAwXG4gIH1bdW5pdF07XG4gIHJldHVybiBudW0gKiBtdWx0aXBsaWVyO1xufVxuXG4vLyBzcmMvc2RrL2luZGV4LnRzXG52YXIgVVRBcGkgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKG9wdHMpIHtcbiAgICAvKiogQGRlcHJlY2F0ZWQgVXNlIHtAbGluayByZW5hbWVGaWxlc30gaW5zdGVhZC4gKi9cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3VuYm91bmQtbWV0aG9kXG4gICAgdGhpcy5yZW5hbWVGaWxlID0gdGhpcy5yZW5hbWVGaWxlcztcbiAgICB2YXIgX2E7XG4gICAgdGhpcy5mZXRjaCA9IChvcHRzID09IG51bGwgPyB2b2lkIDAgOiBvcHRzLmZldGNoKSA/PyBnbG9iYWxUaGlzLmZldGNoO1xuICAgIHRoaXMuYXBpS2V5ID0gKG9wdHMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdHMuYXBpS2V5KSA/PyBwcm9jZXNzMi5lbnYuVVBMT0FEVEhJTkdfU0VDUkVUO1xuICAgIHRoaXMuZGVmYXVsdEhlYWRlcnMgPSB7XG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIFwieC11cGxvYWR0aGluZy1hcGkta2V5XCI6IHRoaXMuYXBpS2V5LFxuICAgICAgXCJ4LXVwbG9hZHRoaW5nLXZlcnNpb25cIjogVVBMT0FEVEhJTkdfVkVSU0lPTixcbiAgICAgIFwieC11cGxvYWR0aGluZy1iZS1hZGFwdGVyXCI6IFwic2VydmVyLXNka1wiXG4gICAgfTtcbiAgICBpbml0TG9nZ2VyKG9wdHMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdHMubG9nTGV2ZWwpO1xuICAgIGd1YXJkU2VydmVyT25seSgpO1xuICAgIGdldEFwaUtleU9yVGhyb3codGhpcy5hcGlLZXkpO1xuICAgIGlmICghKChfYSA9IHRoaXMuYXBpS2V5KSA9PSBudWxsID8gdm9pZCAwIDogX2Euc3RhcnRzV2l0aChcInNrX1wiKSkpIHtcbiAgICAgIHRocm93IG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgIGNvZGU6IFwiTUlTU0lOR19FTlZcIixcbiAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIEFQSSBrZXkuIEFQSSBrZXlzIG11c3Qgc3RhcnQgd2l0aCBgc2tfYC5cIlxuICAgICAgfSk7XG4gICAgfVxuICAgIGluY29tcGF0aWJsZU5vZGVHdWFyZCgpO1xuICB9XG4gIGFzeW5jIHJlcXVlc3RVcGxvYWRUaGluZyhwYXRobmFtZSwgYm9keSwgZmFsbGJhY2tFcnJvck1lc3NhZ2UpIHtcbiAgICBjb25zdCB1cmwgPSBnZW5lcmF0ZVVwbG9hZFRoaW5nVVJMMihwYXRobmFtZSk7XG4gICAgbG9nZ2VyLmRlYnVnKFwiUmVxdWVzdGluZyBVcGxvYWRUaGluZzpcIiwge1xuICAgICAgdXJsLFxuICAgICAgYm9keSxcbiAgICAgIGhlYWRlcnM6IHRoaXMuZGVmYXVsdEhlYWRlcnNcbiAgICB9KTtcbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmZldGNoKHVybCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGNhY2hlOiBcIm5vLXN0b3JlXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmRlZmF1bHRIZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSlcbiAgICB9KTtcbiAgICBsb2dnZXIuZGVidWcoXCJVcGxvYWRUaGluZyByZXNwb25zZWQgd2l0aCBzdGF0dXM6XCIsIHJlcy5zdGF0dXMpO1xuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgIGlmICghcmVzLm9rIHx8IFwiZXJyb3JcIiBpbiBqc29uKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoXCJFcnJvcjpcIiwganNvbik7XG4gICAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcjIoe1xuICAgICAgICBjb2RlOiBcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLFxuICAgICAgICBtZXNzYWdlOiBcImVycm9yXCIgaW4ganNvbiAmJiB0eXBlb2YganNvbi5lcnJvciA9PT0gXCJzdHJpbmdcIiA/IGpzb24uZXJyb3IgOiBmYWxsYmFja0Vycm9yTWVzc2FnZVxuICAgICAgfSk7XG4gICAgfVxuICAgIGxvZ2dlci5kZWJ1ZyhcIlVwbG9hZFRoaW5nIHJlc3BvbnNlOlwiLCBqc29uKTtcbiAgICByZXR1cm4ganNvbjtcbiAgfVxuICAvKipcbiAgICogVXBsb2FkIGZpbGVzIHRvIFVwbG9hZFRoaW5nIHN0b3JhZ2UuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGF3YWl0IHVwbG9hZEZpbGVzKG5ldyBGaWxlKFtcImZvb1wiXSwgXCJmb28udHh0XCIpKTtcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYXdhaXQgdXBsb2FkRmlsZXMoW1xuICAgKiAgIG5ldyBGaWxlKFtcImZvb1wiXSwgXCJmb28udHh0XCIpLFxuICAgKiAgIG5ldyBGaWxlKFtcImJhclwiXSwgXCJiYXIudHh0XCIpLFxuICAgKiBdKTtcbiAgICovXG4gIGFzeW5jIHVwbG9hZEZpbGVzKGZpbGVzLCBvcHRzKSB7XG4gICAgZ3VhcmRTZXJ2ZXJPbmx5KCk7XG4gICAgY29uc3QgZmlsZXNUb1VwbG9hZCA9IEFycmF5LmlzQXJyYXkoZmlsZXMpID8gZmlsZXMgOiBbZmlsZXNdO1xuICAgIGxvZ2dlci5kZWJ1ZyhcIlVwbG9hZGluZyBmaWxlczpcIiwgZmlsZXNUb1VwbG9hZCk7XG4gICAgY29uc3QgdXBsb2FkcyA9IGF3YWl0IHVwbG9hZEZpbGVzSW50ZXJuYWwoXG4gICAgICB7XG4gICAgICAgIGZpbGVzOiBmaWxlc1RvVXBsb2FkLFxuICAgICAgICBtZXRhZGF0YTogKG9wdHMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdHMubWV0YWRhdGEpID8/IHt9LFxuICAgICAgICBjb250ZW50RGlzcG9zaXRpb246IChvcHRzID09IG51bGwgPyB2b2lkIDAgOiBvcHRzLmNvbnRlbnREaXNwb3NpdGlvbikgPz8gXCJpbmxpbmVcIixcbiAgICAgICAgYWNsOiBvcHRzID09IG51bGwgPyB2b2lkIDAgOiBvcHRzLmFjbFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgZmV0Y2g6IHRoaXMuZmV0Y2gsXG4gICAgICAgIHV0UmVxdWVzdEhlYWRlcnM6IHRoaXMuZGVmYXVsdEhlYWRlcnNcbiAgICAgIH1cbiAgICApO1xuICAgIGNvbnN0IHVwbG9hZEZpbGVSZXNwb25zZSA9IEFycmF5LmlzQXJyYXkoZmlsZXMpID8gdXBsb2FkcyA6IHVwbG9hZHNbMF07XG4gICAgbG9nZ2VyLmRlYnVnKFwiRmluaXNoZWQgdXBsb2FkaW5nOlwiLCB1cGxvYWRGaWxlUmVzcG9uc2UpO1xuICAgIHJldHVybiB1cGxvYWRGaWxlUmVzcG9uc2U7XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIFVSTCBvZiB0aGUgZmlsZSB0byB1cGxvYWRcbiAgICogQHBhcmFtIHtKc29ufSBtZXRhZGF0YSBKU09OLXBhcnNlYWJsZSBtZXRhZGF0YSB0byBhdHRhY2ggdG8gdGhlIHVwbG9hZGVkIGZpbGUocylcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYXdhaXQgdXBsb2FkRmlsZUZyb21VcmwoXCJodHRwczovL3VwbG9hZHRoaW5nLmNvbS9mLzJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOF9pbWFnZS5qcGdcIik7XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGF3YWl0IHVwbG9hZEZpbGVGcm9tVXJsKFtcbiAgICogICBcImh0dHBzOi8vdXBsb2FkdGhpbmcuY29tL2YvMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4X2ltYWdlLmpwZ1wiLFxuICAgKiAgIFwiaHR0cHM6Ly91cGxvYWR0aGluZy5jb20vZi8xNjQ5MzUzYi0wNGVhLTQ4YTItOWRiNy0zMWRlN2Y1NjJjOGRfaW1hZ2UyLmpwZ1wiXG4gICAqIF0pXG4gICAqL1xuICBhc3luYyB1cGxvYWRGaWxlc0Zyb21VcmwodXJscywgb3B0cykge1xuICAgIGd1YXJkU2VydmVyT25seSgpO1xuICAgIGNvbnN0IGZpbGVVcmxzID0gQXJyYXkuaXNBcnJheSh1cmxzKSA/IHVybHMgOiBbdXJsc107XG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICBmb3JtRGF0YS5hcHBlbmQoXCJtZXRhZGF0YVwiLCBKU09OLnN0cmluZ2lmeSgob3B0cyA9PSBudWxsID8gdm9pZCAwIDogb3B0cy5tZXRhZGF0YSkgPz8ge30pKTtcbiAgICBjb25zdCBmaWxlc1RvVXBsb2FkID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICBmaWxlVXJscy5tYXAoYXN5bmMgKHVybCkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIHVybCA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgICB1cmwgPSBuZXcgVVJMKHVybCk7XG4gICAgICAgIGNvbnN0IGZpbGVuYW1lID0gdXJsLnBhdGhuYW1lLnNwbGl0KFwiL1wiKS5wb3AoKSA/PyBcInVua25vd24tZmlsZW5hbWVcIjtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKFwiRG93bmxvYWRpbmcgZmlsZTpcIiwgdXJsKTtcbiAgICAgICAgY29uc3QgZmlsZVJlc3BvbnNlID0gYXdhaXQgdGhpcy5mZXRjaCh1cmwpO1xuICAgICAgICBpZiAoIWZpbGVSZXNwb25zZS5vaykge1xuICAgICAgICAgIHRocm93IG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBkb3dubG9hZCByZXF1ZXN0ZWQgZmlsZS5cIixcbiAgICAgICAgICAgIGNhdXNlOiBmaWxlUmVzcG9uc2VcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIuZGVidWcoXCJGaW5pc2hlZCBkb3dubG9hZGluZyBmaWxlLiBSZWFkaW5nIGJsb2IuLi5cIik7XG4gICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBmaWxlUmVzcG9uc2UuYmxvYigpO1xuICAgICAgICBsb2dnZXIuZGVidWcoXCJGaW5pc2hlZCByZWFkaW5nIGJsb2IuXCIpO1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihibG9iLCB7IG5hbWU6IGZpbGVuYW1lIH0pO1xuICAgICAgfSlcbiAgICApO1xuICAgIGxvZ2dlci5kZWJ1ZyhcIkFsbCBmaWxlcyBkb3dubG9hZGVkLCB1cGxvYWRpbmcuLi5cIik7XG4gICAgY29uc3QgdXBsb2FkcyA9IGF3YWl0IHVwbG9hZEZpbGVzSW50ZXJuYWwoXG4gICAgICB7XG4gICAgICAgIGZpbGVzOiBmaWxlc1RvVXBsb2FkLFxuICAgICAgICBtZXRhZGF0YTogKG9wdHMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdHMubWV0YWRhdGEpID8/IHt9LFxuICAgICAgICBjb250ZW50RGlzcG9zaXRpb246IChvcHRzID09IG51bGwgPyB2b2lkIDAgOiBvcHRzLmNvbnRlbnREaXNwb3NpdGlvbikgPz8gXCJpbmxpbmVcIixcbiAgICAgICAgYWNsOiBvcHRzID09IG51bGwgPyB2b2lkIDAgOiBvcHRzLmFjbFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgZmV0Y2g6IHRoaXMuZmV0Y2gsXG4gICAgICAgIHV0UmVxdWVzdEhlYWRlcnM6IHRoaXMuZGVmYXVsdEhlYWRlcnNcbiAgICAgIH1cbiAgICApO1xuICAgIGNvbnN0IHVwbG9hZEZpbGVSZXNwb25zZSA9IEFycmF5LmlzQXJyYXkodXJscykgPyB1cGxvYWRzIDogdXBsb2Fkc1swXTtcbiAgICBsb2dnZXIuZGVidWcoXCJGaW5pc2hlZCB1cGxvYWRpbmc6XCIsIHVwbG9hZEZpbGVSZXNwb25zZSk7XG4gICAgcmV0dXJuIHVwbG9hZEZpbGVSZXNwb25zZTtcbiAgfVxuICAvKipcbiAgICogUmVxdWVzdCB0byBkZWxldGUgZmlsZXMgZnJvbSBVcGxvYWRUaGluZyBzdG9yYWdlLlxuICAgKiBAcGFyYW0ge3N0cmluZyB8IHN0cmluZ1tdfSBmaWxlS2V5c1xuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBhd2FpdCBkZWxldGVGaWxlcyhcIjJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOF9pbWFnZS5qcGdcIik7XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGF3YWl0IGRlbGV0ZUZpbGVzKFtcIjJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOF9pbWFnZS5qcGdcIixcIjE2NDkzNTNiLTA0ZWEtNDhhMi05ZGI3LTMxZGU3ZjU2MmM4ZF9pbWFnZTIuanBnXCJdKVxuICAgKi9cbiAgYXN5bmMgZGVsZXRlRmlsZXMoZmlsZUtleXMpIHtcbiAgICBndWFyZFNlcnZlck9ubHkoKTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZmlsZUtleXMpKVxuICAgICAgZmlsZUtleXMgPSBbZmlsZUtleXNdO1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3RVcGxvYWRUaGluZyhcbiAgICAgIFwiL2FwaS9kZWxldGVGaWxlXCIsXG4gICAgICB7IGZpbGVLZXlzIH0sXG4gICAgICBcIkFuIHVua25vd24gZXJyb3Igb2NjdXJlZCB3aGlsZSBkZWxldGluZyBmaWxlcy5cIlxuICAgICk7XG4gIH1cbiAgLyoqXG4gICAqIFJlcXVlc3QgZmlsZSBVUkxzIGZyb20gVXBsb2FkVGhpbmcgc3RvcmFnZS5cbiAgICogQHBhcmFtIHtzdHJpbmcgfCBzdHJpbmdbXX0gZmlsZUtleXNcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogY29uc3QgZGF0YSA9IGF3YWl0IGdldEZpbGVVcmxzKFwiMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4X2ltYWdlLmpwZ1wiKTtcbiAgICogY29uc29sZS5sb2coZGF0YSk7IC8vIFt7a2V5OiBcIjJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOF9pbWFnZS5qcGdcIiwgdXJsOiBcImh0dHBzOi8vdXBsb2FkdGhpbmcuY29tL2YvMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4X2ltYWdlLmpwZ1wifV1cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogY29uc3QgZGF0YSA9IGF3YWl0IGdldEZpbGVVcmxzKFtcIjJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOF9pbWFnZS5qcGdcIixcIjE2NDkzNTNiLTA0ZWEtNDhhMi05ZGI3LTMxZGU3ZjU2MmM4ZF9pbWFnZTIuanBnXCJdKVxuICAgKiBjb25zb2xlLmxvZyhkYXRhKSAvLyBbe2tleTogXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIsIHVybDogXCJodHRwczovL3VwbG9hZHRoaW5nLmNvbS9mLzJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOF9pbWFnZS5qcGdcIiB9LHtrZXk6IFwiMTY0OTM1M2ItMDRlYS00OGEyLTlkYjctMzFkZTdmNTYyYzhkX2ltYWdlMi5qcGdcIiwgdXJsOiBcImh0dHBzOi8vdXBsb2FkdGhpbmcuY29tL2YvMTY0OTM1M2ItMDRlYS00OGEyLTlkYjctMzFkZTdmNTYyYzhkX2ltYWdlMi5qcGdcIn1dXG4gICAqL1xuICBhc3luYyBnZXRGaWxlVXJscyhmaWxlS2V5cykge1xuICAgIGd1YXJkU2VydmVyT25seSgpO1xuICAgIGlmICghQXJyYXkuaXNBcnJheShmaWxlS2V5cykpXG4gICAgICBmaWxlS2V5cyA9IFtmaWxlS2V5c107XG4gICAgY29uc3QganNvbiA9IGF3YWl0IHRoaXMucmVxdWVzdFVwbG9hZFRoaW5nKFxuICAgICAgXCIvYXBpL2dldEZpbGVVcmxcIixcbiAgICAgIHsgZmlsZUtleXMgfSxcbiAgICAgIFwiQW4gdW5rbm93biBlcnJvciBvY2N1cmVkIHdoaWxlIHJldHJpZXZpbmcgZmlsZSBVUkxzLlwiXG4gICAgKTtcbiAgICByZXR1cm4ganNvbi5kYXRhO1xuICB9XG4gIC8qKlxuICAgKiBSZXF1ZXN0IGZpbGUgbGlzdCBmcm9tIFVwbG9hZFRoaW5nIHN0b3JhZ2UuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvcHRzLmxpbWl0IFRoZSBtYXhpbXVtIG51bWJlciBvZiBmaWxlcyB0byByZXR1cm5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG9wdHMub2Zmc2V0IFRoZSBudW1iZXIgb2YgZmlsZXMgdG8gc2tpcFxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBjb25zdCBkYXRhID0gYXdhaXQgbGlzdEZpbGVzKHsgbGltaXQ6IDEgfSk7XG4gICAqIGNvbnNvbGUubG9nKGRhdGEpOyAvLyB7IGtleTogXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIsIGlkOiBcIjJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOFwiIH1cbiAgICovXG4gIGFzeW5jIGxpc3RGaWxlcyhvcHRzKSB7XG4gICAgZ3VhcmRTZXJ2ZXJPbmx5KCk7XG4gICAgY29uc3QganNvbiA9IGF3YWl0IHRoaXMucmVxdWVzdFVwbG9hZFRoaW5nKFwiL2FwaS9saXN0RmlsZXNcIiwgb3B0cywgXCJBbiB1bmtub3duIGVycm9yIG9jY3VyZWQgd2hpbGUgbGlzdGluZyBmaWxlcy5cIik7XG4gICAgcmV0dXJuIGpzb24uZmlsZXM7XG4gIH1cbiAgYXN5bmMgcmVuYW1lRmlsZXModXBkYXRlcykge1xuICAgIGd1YXJkU2VydmVyT25seSgpO1xuICAgIGlmICghQXJyYXkuaXNBcnJheSh1cGRhdGVzKSlcbiAgICAgIHVwZGF0ZXMgPSBbdXBkYXRlc107XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdFVwbG9hZFRoaW5nKFxuICAgICAgXCIvYXBpL3JlbmFtZUZpbGVzXCIsXG4gICAgICB7IHVwZGF0ZXMgfSxcbiAgICAgIFwiQW4gdW5rbm93biBlcnJvciBvY2N1cmVkIHdoaWxlIHJlbmFtaW5nIGZpbGVzLlwiXG4gICAgKTtcbiAgfVxuICBhc3luYyBnZXRVc2FnZUluZm8oKSB7XG4gICAgZ3VhcmRTZXJ2ZXJPbmx5KCk7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdFVwbG9hZFRoaW5nKFxuICAgICAgXCIvYXBpL2dldFVzYWdlSW5mb1wiLFxuICAgICAge30sXG4gICAgICBcIkFuIHVua25vd24gZXJyb3Igb2NjdXJlZCB3aGlsZSBnZXR0aW5nIHVzYWdlIGluZm8uXCJcbiAgICApO1xuICB9XG4gIC8qKiBSZXF1ZXN0IGEgcHJlc2lnbmVkIHVybCBmb3IgYSBwcml2YXRlIGZpbGUocykgKi9cbiAgYXN5bmMgZ2V0U2lnbmVkVVJMKGZpbGVLZXksIG9wdHMpIHtcbiAgICBndWFyZFNlcnZlck9ubHkoKTtcbiAgICBjb25zdCBleHBpcmVzSW4gPSAob3B0cyA9PSBudWxsID8gdm9pZCAwIDogb3B0cy5leHBpcmVzSW4pID8gcGFyc2VUaW1lVG9TZWNvbmRzKG9wdHMuZXhwaXJlc0luKSA6IHZvaWQgMDtcbiAgICBpZiAoKG9wdHMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdHMuZXhwaXJlc0luKSAmJiBpc05hTihleHBpcmVzSW4pKSB7XG4gICAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcjIoe1xuICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiZXhwaXJlc0luIG11c3QgYmUgYSB2YWxpZCB0aW1lIHN0cmluZywgZm9yIGV4YW1wbGUgJzFkJywgJzIgZGF5cycsIG9yIGEgbnVtYmVyIG9mIHNlY29uZHMuXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoZXhwaXJlc0luICYmIGV4cGlyZXNJbiA+IDg2NDAwICogNykge1xuICAgICAgdGhyb3cgbmV3IFVwbG9hZFRoaW5nRXJyb3IyKHtcbiAgICAgICAgY29kZTogXCJCQURfUkVRVUVTVFwiLFxuICAgICAgICBtZXNzYWdlOiBcImV4cGlyZXNJbiBtdXN0IGJlIGxlc3MgdGhhbiA3IGRheXMgKDYwNDgwMCBzZWNvbmRzKS5cIlxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IGpzb24gPSBhd2FpdCB0aGlzLnJlcXVlc3RVcGxvYWRUaGluZyhcbiAgICAgIFwiL2FwaS9yZXF1ZXN0RmlsZUFjY2Vzc1wiLFxuICAgICAgeyBmaWxlS2V5LCBleHBpcmVzSW4gfSxcbiAgICAgIFwiQW4gdW5rbm93biBlcnJvciBvY2N1cmVkIHdoaWxlIHJldHJpZXZpbmcgcHJlc2lnbmVkIFVSTHMuXCJcbiAgICApO1xuICAgIHJldHVybiBqc29uLnVybDtcbiAgfVxufTtcblxuLy8gc3JjL3NlcnZlci50c1xudmFyIGNyZWF0ZVVwbG9hZHRoaW5nID0gKG9wdHMpID0+IGNyZWF0ZUJ1aWxkZXIob3B0cyk7XG52YXIgSU5URVJOQUxfRE9fTk9UX1VTRV9jcmVhdGVSb3V0ZUhhbmRsZXJDb3JlID0gKG9wdHMsIGFkYXB0ZXIpID0+IHtcbiAgdmFyIF9hO1xuICBpbml0TG9nZ2VyKChfYSA9IG9wdHMuY29uZmlnKSA9PSBudWxsID8gdm9pZCAwIDogX2EubG9nTGV2ZWwpO1xuICBpbmNvbXBhdGlibGVOb2RlR3VhcmQoKTtcbiAgY29uc3QgcmVxdWVzdEhhbmRsZXIgPSBidWlsZFJlcXVlc3RIYW5kbGVyKFxuICAgIG9wdHMsXG4gICAgYWRhcHRlclxuICApO1xuICBjb25zdCBnZXRCdWlsZFBlcm1zID0gYnVpbGRQZXJtaXNzaW9uc0luZm9IYW5kbGVyKG9wdHMpO1xuICBjb25zdCBQT1NUID0gYXN5bmMgKHJlcXVlc3QpID0+IHtcbiAgICBjb25zdCByZXEgPSByZXF1ZXN0IGluc3RhbmNlb2YgUmVxdWVzdCA/IHJlcXVlc3QgOiByZXF1ZXN0LnJlcXVlc3Q7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0SGFuZGxlcih7XG4gICAgICBuYXRpdmVSZXF1ZXN0OiByZXEsXG4gICAgICBvcmlnaW5hbFJlcXVlc3Q6IHJlcSxcbiAgICAgIGV2ZW50OiB2b2lkIDAsXG4gICAgICByZXM6IHZvaWQgMFxuICAgIH0pO1xuICAgIGlmIChyZXNwb25zZSBpbnN0YW5jZW9mIFVwbG9hZFRoaW5nRXJyb3IzKSB7XG4gICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KGZvcm1hdEVycm9yKHJlc3BvbnNlLCBvcHRzLnJvdXRlcikpLCB7XG4gICAgICAgIHN0YXR1czogZ2V0U3RhdHVzQ29kZUZyb21FcnJvcihyZXNwb25zZSksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIngtdXBsb2FkdGhpbmctdmVyc2lvblwiOiBVUExPQURUSElOR19WRVJTSU9OXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHtcbiAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoXCJBbiB1bmtub3duIGVycm9yIG9jY3VyZWRcIiwge1xuICAgICAgICBzdGF0dXM6IDUwMCxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwieC11cGxvYWR0aGluZy12ZXJzaW9uXCI6IFVQTE9BRFRISU5HX1ZFUlNJT05cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHJlcyA9IG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeShyZXNwb25zZS5ib2R5KSwge1xuICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIFwieC11cGxvYWR0aGluZy12ZXJzaW9uXCI6IFVQTE9BRFRISU5HX1ZFUlNJT05cbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXMuY2xlYW51cCA9IHJlc3BvbnNlLmNsZWFudXA7XG4gICAgcmV0dXJuIHJlcztcbiAgfTtcbiAgY29uc3QgR0VUID0gKHJlcXVlc3QpID0+IHtcbiAgICBjb25zdCBfcmVxID0gcmVxdWVzdCBpbnN0YW5jZW9mIFJlcXVlc3QgPyByZXF1ZXN0IDogcmVxdWVzdC5yZXF1ZXN0O1xuICAgIHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoZ2V0QnVpbGRQZXJtcygpKSwge1xuICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIFwieC11cGxvYWR0aGluZy12ZXJzaW9uXCI6IFVQTE9BRFRISU5HX1ZFUlNJT05cbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbiAgcmV0dXJuIHsgR0VULCBQT1NUIH07XG59O1xudmFyIGNyZWF0ZVJvdXRlSGFuZGxlciA9IChvcHRzKSA9PiBJTlRFUk5BTF9ET19OT1RfVVNFX2NyZWF0ZVJvdXRlSGFuZGxlckNvcmUob3B0cywgXCJzZXJ2ZXJcIik7XG52YXIgZXh0cmFjdFJvdXRlckNvbmZpZyA9IChyb3V0ZXIpID0+IGJ1aWxkUGVybWlzc2lvbnNJbmZvSGFuZGxlcih7IHJvdXRlciB9KSgpO1xudmFyIGNyZWF0ZVNlcnZlckhhbmRsZXIgPSBjcmVhdGVSb3V0ZUhhbmRsZXI7XG5cbmV4cG9ydCB7XG4gIFVUQXBpLFxuICBVcGxvYWRUaGluZ0Vycm9yMyBhcyBVcGxvYWRUaGluZ0Vycm9yLFxuICBjcmVhdGVVcGxvYWR0aGluZyxcbiAgSU5URVJOQUxfRE9fTk9UX1VTRV9jcmVhdGVSb3V0ZUhhbmRsZXJDb3JlLFxuICBjcmVhdGVSb3V0ZUhhbmRsZXIsXG4gIGV4dHJhY3RSb3V0ZXJDb25maWcsXG4gIGNyZWF0ZVNlcnZlckhhbmRsZXJcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaHVuay1IRFNXSkxOUC5tanMubWFwIl0sIm5hbWVzIjpbInVwbG9hZFBhcnQiLCJVUExPQURUSElOR19WRVJTSU9OIiwiYnVpbGRQZXJtaXNzaW9uc0luZm9IYW5kbGVyIiwiYnVpbGRSZXF1ZXN0SGFuZGxlciIsImNyZWF0ZUJ1aWxkZXIiLCJmb3JtYXRFcnJvciIsImluY29tcGF0aWJsZU5vZGVHdWFyZCIsImluaXRMb2dnZXIiLCJsb2dnZXIiLCJnZXRTdGF0dXNDb2RlRnJvbUVycm9yIiwiVXBsb2FkVGhpbmdFcnJvciIsIlVwbG9hZFRoaW5nRXJyb3IzIiwicHJvY2VzcyIsInByb2Nlc3MyIiwiZ2VuZXJhdGVVcGxvYWRUaGluZ1VSTCIsImdlbmVyYXRlVXBsb2FkVGhpbmdVUkwyIiwiVXBsb2FkVGhpbmdFcnJvcjIiLCJwb2xsRm9yRmlsZURhdGEiLCJndWFyZFNlcnZlck9ubHkiLCJjb2RlIiwibWVzc2FnZSIsImdldEFwaUtleU9yVGhyb3ciLCJhcGlLZXkiLCJlbnYiLCJVUExPQURUSElOR19TRUNSRVQiLCJ1cGxvYWRGaWxlc0ludGVybmFsIiwiZGF0YSIsIm9wdHMiLCJmaWxlRGF0YSIsImZpbGVzIiwibWFwIiwiZmlsZSIsIm5hbWUiLCJ0eXBlIiwic2l6ZSIsImRlYnVnIiwicmVzIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwidXRSZXF1ZXN0SGVhZGVycyIsImNhY2hlIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJtZXRhZGF0YSIsImNvbnRlbnREaXNwb3NpdGlvbiIsImFjbCIsIm9rIiwiZXJyb3IiLCJmcm9tUmVzcG9uc2UiLCJqc29uIiwidXBsb2FkcyIsIlByb21pc2UiLCJhbGxTZXR0bGVkIiwiaSIsInByZXNpZ25lZFVybHMiLCJrZXkiLCJmaWxlVXJsIiwidXBsb2FkSWQiLCJjaHVua1NpemUiLCJBcnJheSIsImlzQXJyYXkiLCJjYXVzZSIsImxlbmd0aCIsImV0YWdzIiwiYWxsIiwidXJsIiwiaW5kZXgiLCJvZmZzZXQiLCJlbmQiLCJNYXRoIiwibWluIiwiY2h1bmsiLCJzbGljZSIsImV0YWciLCJjb250ZW50VHlwZSIsImZpbGVOYW1lIiwibWF4UmV0cmllcyIsInRhZyIsInBhcnROdW1iZXIiLCJjb21wbGV0aW9uUmVzIiwiZmlsZUtleSIsInN0YXR1cyIsInNka1ZlcnNpb24iLCJ1cGxvYWQiLCJkYXRhMiIsInZhbHVlIiwicmVhc29uIiwidG9PYmplY3QiLCJwYXJzZVRpbWVUb1NlY29uZHMiLCJ0aW1lIiwibWF0Y2giLCJ0b1N0cmluZyIsInNwbGl0IiwiZmlsdGVyIiwiQm9vbGVhbiIsIm51bSIsIk51bWJlciIsInVuaXQiLCJ0cmltIiwibXVsdGlwbGllciIsInMiLCJtIiwiaCIsImQiLCJVVEFwaSIsImNvbnN0cnVjdG9yIiwicmVuYW1lRmlsZSIsInJlbmFtZUZpbGVzIiwiX2EiLCJnbG9iYWxUaGlzIiwiZGVmYXVsdEhlYWRlcnMiLCJsb2dMZXZlbCIsInN0YXJ0c1dpdGgiLCJyZXF1ZXN0VXBsb2FkVGhpbmciLCJwYXRobmFtZSIsImZhbGxiYWNrRXJyb3JNZXNzYWdlIiwidXBsb2FkRmlsZXMiLCJmaWxlc1RvVXBsb2FkIiwidXBsb2FkRmlsZVJlc3BvbnNlIiwidXBsb2FkRmlsZXNGcm9tVXJsIiwidXJscyIsImZpbGVVcmxzIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImFwcGVuZCIsIlVSTCIsImZpbGVuYW1lIiwicG9wIiwiZmlsZVJlc3BvbnNlIiwiYmxvYiIsIk9iamVjdCIsImFzc2lnbiIsImRlbGV0ZUZpbGVzIiwiZmlsZUtleXMiLCJnZXRGaWxlVXJscyIsImxpc3RGaWxlcyIsInVwZGF0ZXMiLCJnZXRVc2FnZUluZm8iLCJnZXRTaWduZWRVUkwiLCJleHBpcmVzSW4iLCJpc05hTiIsImNyZWF0ZVVwbG9hZHRoaW5nIiwiSU5URVJOQUxfRE9fTk9UX1VTRV9jcmVhdGVSb3V0ZUhhbmRsZXJDb3JlIiwiYWRhcHRlciIsImNvbmZpZyIsInJlcXVlc3RIYW5kbGVyIiwiZ2V0QnVpbGRQZXJtcyIsIlBPU1QiLCJyZXF1ZXN0IiwicmVxIiwiUmVxdWVzdCIsInJlc3BvbnNlIiwibmF0aXZlUmVxdWVzdCIsIm9yaWdpbmFsUmVxdWVzdCIsImV2ZW50IiwiUmVzcG9uc2UiLCJyb3V0ZXIiLCJjbGVhbnVwIiwiR0VUIiwiX3JlcSIsImNyZWF0ZVJvdXRlSGFuZGxlciIsImV4dHJhY3RSb3V0ZXJDb25maWciLCJjcmVhdGVTZXJ2ZXJIYW5kbGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/chunk-HDSWJLNP.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/chunk-JW5CQVQS.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/uploadthing/dist/chunk-JW5CQVQS.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   __require: () => (/* binding */ __require)\n/* harmony export */ });\nvar __require = /* @__PURE__ */ ((x)=>typeof require !== \"undefined\" ? require : typeof Proxy !== \"undefined\" ? new Proxy(x, {\n        get: (a, b)=>(typeof require !== \"undefined\" ? require : a)[b]\n    }) : x)(function(x) {\n    if (typeof require !== \"undefined\") return require.apply(this, arguments);\n    throw new Error('Dynamic require of \"' + x + '\" is not supported');\n});\n //# sourceMappingURL=chunk-JW5CQVQS.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9jaHVuay1KVzVDUVZRUy5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLElBQUlBLFlBQTRCLGFBQUgsR0FBSSxFQUFDQyxJQUFNLE9BQU9DLFlBQVksY0FBY0EsVUFBVSxPQUFPQyxVQUFVLGNBQWMsSUFBSUEsTUFBTUYsR0FBRztRQUM3SEcsS0FBSyxDQUFDQyxHQUFHQyxJQUFNLENBQUMsT0FBT0osWUFBWSxjQUFjQSxVQUFVRyxDQUFBQSxDQUFFLENBQUNDLEVBQUU7SUFDbEUsS0FBS0wsQ0FBQUEsRUFBRyxTQUFTQSxDQUFDO0lBQ2hCLElBQUksT0FBT0MsWUFBWSxhQUNyQixPQUFPQSxRQUFRSyxLQUFLLENBQUMsSUFBSSxFQUFFQztJQUM3QixNQUFNLElBQUlDLE1BQU0seUJBQXlCUixJQUFJO0FBQy9DO0FBSUUsQ0FDRiwyQ0FBMkMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zeW5jY2hhdC8uL25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9kaXN0L2NodW5rLUpXNUNRVlFTLm1qcz8wZDI3Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBfX3JlcXVpcmUgPSAvKiBAX19QVVJFX18gKi8gKCh4KSA9PiB0eXBlb2YgcmVxdWlyZSAhPT0gXCJ1bmRlZmluZWRcIiA/IHJlcXVpcmUgOiB0eXBlb2YgUHJveHkgIT09IFwidW5kZWZpbmVkXCIgPyBuZXcgUHJveHkoeCwge1xuICBnZXQ6IChhLCBiKSA9PiAodHlwZW9mIHJlcXVpcmUgIT09IFwidW5kZWZpbmVkXCIgPyByZXF1aXJlIDogYSlbYl1cbn0pIDogeCkoZnVuY3Rpb24oeCkge1xuICBpZiAodHlwZW9mIHJlcXVpcmUgIT09IFwidW5kZWZpbmVkXCIpXG4gICAgcmV0dXJuIHJlcXVpcmUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgdGhyb3cgbmV3IEVycm9yKCdEeW5hbWljIHJlcXVpcmUgb2YgXCInICsgeCArICdcIiBpcyBub3Qgc3VwcG9ydGVkJyk7XG59KTtcblxuZXhwb3J0IHtcbiAgX19yZXF1aXJlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2h1bmstSlc1Q1FWUVMubWpzLm1hcCJdLCJuYW1lcyI6WyJfX3JlcXVpcmUiLCJ4IiwicmVxdWlyZSIsIlByb3h5IiwiZ2V0IiwiYSIsImIiLCJhcHBseSIsImFyZ3VtZW50cyIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/chunk-JW5CQVQS.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/chunk-S3R3VXRK.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/uploadthing/dist/chunk-S3R3VXRK.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   maybeParseResponseXML: () => (/* binding */ maybeParseResponseXML),\n/* harmony export */   uploadPart: () => (/* binding */ uploadPart),\n/* harmony export */   uploadPartWithProgress: () => (/* binding */ uploadPartWithProgress)\n/* harmony export */ });\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.mjs\");\n// src/internal/multi-part.ts\n\n// src/internal/s3-error-parser.ts\nvar maybeParseResponseXML = (maybeXml)=>{\n    const codeMatch = maybeXml.match(/<Code>(.*?)<\\/Code>/s);\n    const messageMatch = maybeXml.match(/<Message>(.*?)<\\/Message>/s);\n    const code = codeMatch == null ? void 0 : codeMatch[1];\n    const message = messageMatch == null ? void 0 : messageMatch[1];\n    if (!code || !message) return null;\n    return {\n        code: s3CodeToUploadThingCode[code] ?? DEFAULT_ERROR_CODE,\n        message\n    };\n};\nvar DEFAULT_ERROR_CODE = \"UPLOAD_FAILED\";\nvar s3CodeToUploadThingCode = {\n    AccessDenied: \"FORBIDDEN\",\n    // 403 Forbidden\n    EntityTooSmall: \"TOO_SMALL\",\n    // 400 Bad Request\n    EntityTooLarge: \"TOO_LARGE\",\n    // 400 Bad Request\n    ExpiredToken: \"FORBIDDEN\",\n    // 400 Bad Request\n    IncorrectNumberOfFilesInPostRequest: \"TOO_MANY_FILES\",\n    // 400 Bad Request\n    InternalError: \"INTERNAL_SERVER_ERROR\",\n    // 500 Internal Server Error\n    KeyTooLongError: \"KEY_TOO_LONG\",\n    // 400 Bad Request\n    MaxMessageLengthExceeded: \"TOO_LARGE\"\n};\n// src/internal/multi-part.ts\nasync function uploadPart(opts, retryCount = 0) {\n    const s3Res = await opts.fetch(opts.url, {\n        method: \"PUT\",\n        body: opts.chunk,\n        headers: {\n            \"Content-Type\": opts.contentType,\n            \"Content-Disposition\": [\n                opts.contentDisposition,\n                `filename=\"${encodeURI(opts.fileName)}\"`,\n                `filename*=UTF-8''${encodeURI(opts.fileName)}`\n            ].join(\"; \")\n        }\n    });\n    if (s3Res.ok) {\n        const etag = s3Res.headers.get(\"Etag\");\n        if (!etag) {\n            throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                code: \"UPLOAD_FAILED\",\n                message: \"Missing Etag header from uploaded part\"\n            });\n        }\n        return etag.replace(/\"/g, \"\");\n    }\n    if (retryCount < opts.maxRetries) {\n        const delay = 2 ** retryCount * 1e3;\n        await new Promise((r)=>setTimeout(r, delay));\n        return uploadPart(opts, retryCount++);\n    }\n    await opts.fetch((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.generateUploadThingURL)(\"/api/failureCallback\"), {\n        method: \"POST\",\n        body: JSON.stringify({\n            fileKey: opts.key\n        }),\n        headers: opts.utRequestHeaders\n    });\n    const text = await s3Res.text();\n    const parsed = maybeParseResponseXML(text);\n    if (parsed == null ? void 0 : parsed.message) {\n        throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n            code: \"UPLOAD_FAILED\",\n            message: parsed.message\n        });\n    }\n    throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n        code: \"UPLOAD_FAILED\",\n        message: \"Failed to upload file to storage provider\",\n        cause: s3Res\n    });\n}\nasync function uploadPartWithProgress(opts, retryCount = 0) {\n    return new Promise((resolve, reject)=>{\n        const xhr = new XMLHttpRequest();\n        xhr.open(\"PUT\", opts.url, true);\n        xhr.setRequestHeader(\"Content-Type\", opts.fileType);\n        xhr.setRequestHeader(\"Content-Disposition\", [\n            opts.contentDisposition,\n            `filename=\"${encodeURI(opts.fileName)}\"`,\n            `filename*=UTF-8''${encodeURI(opts.fileName)}`\n        ].join(\"; \"));\n        xhr.onload = async ()=>{\n            if (xhr.status >= 200 && xhr.status < 300) {\n                const etag = xhr.getResponseHeader(\"Etag\");\n                etag ? resolve(etag) : reject(\"NO ETAG\");\n            } else if (retryCount < opts.maxRetries) {\n                const delay = Math.pow(2, retryCount) * 1e3;\n                await new Promise((res)=>setTimeout(res, delay));\n                await uploadPartWithProgress(opts, retryCount + 1);\n            } else {\n                reject(\"Max retries exceeded\");\n            }\n        };\n        let lastProgress = 0;\n        xhr.onerror = async ()=>{\n            lastProgress = 0;\n            if (retryCount < opts.maxRetries) {\n                const delay = Math.pow(2, retryCount) * 100;\n                await new Promise((res)=>setTimeout(res, delay));\n                await uploadPartWithProgress(opts, retryCount + 1);\n            } else {\n                reject(\"Max retries exceeded\");\n            }\n        };\n        xhr.upload.onprogress = (e)=>{\n            const delta = e.loaded - lastProgress;\n            lastProgress += delta;\n            opts.onProgress(delta);\n        };\n        xhr.send(opts.chunk);\n    });\n}\n //# sourceMappingURL=chunk-S3R3VXRK.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9jaHVuay1TM1IzVlhSSy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLDZCQUE2QjtBQUNrRDtBQUUvRSxrQ0FBa0M7QUFDbEMsSUFBSUUsd0JBQXdCLENBQUNDO0lBQzNCLE1BQU1DLFlBQVlELFNBQVNFLEtBQUssQ0FBQztJQUNqQyxNQUFNQyxlQUFlSCxTQUFTRSxLQUFLLENBQUM7SUFDcEMsTUFBTUUsT0FBT0gsYUFBYSxPQUFPLEtBQUssSUFBSUEsU0FBUyxDQUFDLEVBQUU7SUFDdEQsTUFBTUksVUFBVUYsZ0JBQWdCLE9BQU8sS0FBSyxJQUFJQSxZQUFZLENBQUMsRUFBRTtJQUMvRCxJQUFJLENBQUNDLFFBQVEsQ0FBQ0MsU0FDWixPQUFPO0lBQ1QsT0FBTztRQUFFRCxNQUFNRSx1QkFBdUIsQ0FBQ0YsS0FBSyxJQUFJRztRQUFvQkY7SUFBUTtBQUM5RTtBQUNBLElBQUlFLHFCQUFxQjtBQUN6QixJQUFJRCwwQkFBMEI7SUFDNUJFLGNBQWM7SUFDZCxnQkFBZ0I7SUFDaEJDLGdCQUFnQjtJQUNoQixrQkFBa0I7SUFDbEJDLGdCQUFnQjtJQUNoQixrQkFBa0I7SUFDbEJDLGNBQWM7SUFDZCxrQkFBa0I7SUFDbEJDLHFDQUFxQztJQUNyQyxrQkFBa0I7SUFDbEJDLGVBQWU7SUFDZiw0QkFBNEI7SUFDNUJDLGlCQUFpQjtJQUNqQixrQkFBa0I7SUFDbEJDLDBCQUEwQjtBQUU1QjtBQUVBLDZCQUE2QjtBQUM3QixlQUFlQyxXQUFXQyxJQUFJLEVBQUVDLGFBQWEsQ0FBQztJQUM1QyxNQUFNQyxRQUFRLE1BQU1GLEtBQUtHLEtBQUssQ0FBQ0gsS0FBS0ksR0FBRyxFQUFFO1FBQ3ZDQyxRQUFRO1FBQ1JDLE1BQU1OLEtBQUtPLEtBQUs7UUFDaEJDLFNBQVM7WUFDUCxnQkFBZ0JSLEtBQUtTLFdBQVc7WUFDaEMsdUJBQXVCO2dCQUNyQlQsS0FBS1Usa0JBQWtCO2dCQUN2QixDQUFDLFVBQVUs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Z0JBQzNDLE1BQU1ZLHVCQUF1Qi9CLE1BQU1DLGFBQWE7WUFDbEQsT0FBTztnQkFDTGdDLE9BQU87WUFDVDtRQUNGO1FBQ0FDLElBQUlhLE1BQU0sQ0FBQ0MsVUFBVSxHQUFHLENBQUNDO1lBQ3ZCLE1BQU1DLFFBQVFELEVBQUVFLE1BQU0sR0FBR047WUFDekJBLGdCQUFnQks7WUFDaEJsRCxLQUFLb0QsVUFBVSxDQUFDRjtRQUNsQjtRQUNBaEIsSUFBSW1CLElBQUksQ0FBQ3JELEtBQUtPLEtBQUs7SUFDckI7QUFDRjtBQU1FLENBQ0YsMkNBQTJDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3luY2NoYXQvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9jaHVuay1TM1IzVlhSSy5tanM/YTQ0ZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvaW50ZXJuYWwvbXVsdGktcGFydC50c1xuaW1wb3J0IHsgZ2VuZXJhdGVVcGxvYWRUaGluZ1VSTCwgVXBsb2FkVGhpbmdFcnJvciB9IGZyb20gXCJAdXBsb2FkdGhpbmcvc2hhcmVkXCI7XG5cbi8vIHNyYy9pbnRlcm5hbC9zMy1lcnJvci1wYXJzZXIudHNcbnZhciBtYXliZVBhcnNlUmVzcG9uc2VYTUwgPSAobWF5YmVYbWwpID0+IHtcbiAgY29uc3QgY29kZU1hdGNoID0gbWF5YmVYbWwubWF0Y2goLzxDb2RlPiguKj8pPFxcL0NvZGU+L3MpO1xuICBjb25zdCBtZXNzYWdlTWF0Y2ggPSBtYXliZVhtbC5tYXRjaCgvPE1lc3NhZ2U+KC4qPyk8XFwvTWVzc2FnZT4vcyk7XG4gIGNvbnN0IGNvZGUgPSBjb2RlTWF0Y2ggPT0gbnVsbCA/IHZvaWQgMCA6IGNvZGVNYXRjaFsxXTtcbiAgY29uc3QgbWVzc2FnZSA9IG1lc3NhZ2VNYXRjaCA9PSBudWxsID8gdm9pZCAwIDogbWVzc2FnZU1hdGNoWzFdO1xuICBpZiAoIWNvZGUgfHwgIW1lc3NhZ2UpXG4gICAgcmV0dXJuIG51bGw7XG4gIHJldHVybiB7IGNvZGU6IHMzQ29kZVRvVXBsb2FkVGhpbmdDb2RlW2NvZGVdID8/IERFRkFVTFRfRVJST1JfQ09ERSwgbWVzc2FnZSB9O1xufTtcbnZhciBERUZBVUxUX0VSUk9SX0NPREUgPSBcIlVQTE9BRF9GQUlMRURcIjtcbnZhciBzM0NvZGVUb1VwbG9hZFRoaW5nQ29kZSA9IHtcbiAgQWNjZXNzRGVuaWVkOiBcIkZPUkJJRERFTlwiLFxuICAvLyA0MDMgRm9yYmlkZGVuXG4gIEVudGl0eVRvb1NtYWxsOiBcIlRPT19TTUFMTFwiLFxuICAvLyA0MDAgQmFkIFJlcXVlc3RcbiAgRW50aXR5VG9vTGFyZ2U6IFwiVE9PX0xBUkdFXCIsXG4gIC8vIDQwMCBCYWQgUmVxdWVzdFxuICBFeHBpcmVkVG9rZW46IFwiRk9SQklEREVOXCIsXG4gIC8vIDQwMCBCYWQgUmVxdWVzdFxuICBJbmNvcnJlY3ROdW1iZXJPZkZpbGVzSW5Qb3N0UmVxdWVzdDogXCJUT09fTUFOWV9GSUxFU1wiLFxuICAvLyA0MDAgQmFkIFJlcXVlc3RcbiAgSW50ZXJuYWxFcnJvcjogXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIixcbiAgLy8gNTAwIEludGVybmFsIFNlcnZlciBFcnJvclxuICBLZXlUb29Mb25nRXJyb3I6IFwiS0VZX1RPT19MT05HXCIsXG4gIC8vIDQwMCBCYWQgUmVxdWVzdFxuICBNYXhNZXNzYWdlTGVuZ3RoRXhjZWVkZWQ6IFwiVE9PX0xBUkdFXCJcbiAgLy8gNDAwIEJhZCBSZXF1ZXN0XG59O1xuXG4vLyBzcmMvaW50ZXJuYWwvbXVsdGktcGFydC50c1xuYXN5bmMgZnVuY3Rpb24gdXBsb2FkUGFydChvcHRzLCByZXRyeUNvdW50ID0gMCkge1xuICBjb25zdCBzM1JlcyA9IGF3YWl0IG9wdHMuZmV0Y2gob3B0cy51cmwsIHtcbiAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgYm9keTogb3B0cy5jaHVuayxcbiAgICBoZWFkZXJzOiB7XG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBvcHRzLmNvbnRlbnRUeXBlLFxuICAgICAgXCJDb250ZW50LURpc3Bvc2l0aW9uXCI6IFtcbiAgICAgICAgb3B0cy5jb250ZW50RGlzcG9zaXRpb24sXG4gICAgICAgIGBmaWxlbmFtZT1cIiR7ZW5jb2RlVVJJKG9wdHMuZmlsZU5hbWUpfVwiYCxcbiAgICAgICAgYGZpbGVuYW1lKj1VVEYtOCcnJHtlbmNvZGVVUkkob3B0cy5maWxlTmFtZSl9YFxuICAgICAgXS5qb2luKFwiOyBcIilcbiAgICB9XG4gIH0pO1xuICBpZiAoczNSZXMub2spIHtcbiAgICBjb25zdCBldGFnID0gczNSZXMuaGVhZGVycy5nZXQoXCJFdGFnXCIpO1xuICAgIGlmICghZXRhZykge1xuICAgICAgdGhyb3cgbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICBjb2RlOiBcIlVQTE9BRF9GQUlMRURcIixcbiAgICAgICAgbWVzc2FnZTogXCJNaXNzaW5nIEV0YWcgaGVhZGVyIGZyb20gdXBsb2FkZWQgcGFydFwiXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGV0YWcucmVwbGFjZSgvXCIvZywgXCJcIik7XG4gIH1cbiAgaWYgKHJldHJ5Q291bnQgPCBvcHRzLm1heFJldHJpZXMpIHtcbiAgICBjb25zdCBkZWxheSA9IDIgKiogcmV0cnlDb3VudCAqIDFlMztcbiAgICBhd2FpdCBuZXcgUHJvbWlzZSgocikgPT4gc2V0VGltZW91dChyLCBkZWxheSkpO1xuICAgIHJldHVybiB1cGxvYWRQYXJ0KG9wdHMsIHJldHJ5Q291bnQrKyk7XG4gIH1cbiAgYXdhaXQgb3B0cy5mZXRjaChnZW5lcmF0ZVVwbG9hZFRoaW5nVVJMKFwiL2FwaS9mYWlsdXJlQ2FsbGJhY2tcIiksIHtcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIGZpbGVLZXk6IG9wdHMua2V5XG4gICAgfSksXG4gICAgaGVhZGVyczogb3B0cy51dFJlcXVlc3RIZWFkZXJzXG4gIH0pO1xuICBjb25zdCB0ZXh0ID0gYXdhaXQgczNSZXMudGV4dCgpO1xuICBjb25zdCBwYXJzZWQgPSBtYXliZVBhcnNlUmVzcG9uc2VYTUwodGV4dCk7XG4gIGlmIChwYXJzZWQgPT0gbnVsbCA/IHZvaWQgMCA6IHBhcnNlZC5tZXNzYWdlKSB7XG4gICAgdGhyb3cgbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgY29kZTogXCJVUExPQURfRkFJTEVEXCIsXG4gICAgICBtZXNzYWdlOiBwYXJzZWQubWVzc2FnZVxuICAgIH0pO1xuICB9XG4gIHRocm93IG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICBjb2RlOiBcIlVQTE9BRF9GQUlMRURcIixcbiAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byB1cGxvYWQgZmlsZSB0byBzdG9yYWdlIHByb3ZpZGVyXCIsXG4gICAgY2F1c2U6IHMzUmVzXG4gIH0pO1xufVxuYXN5bmMgZnVuY3Rpb24gdXBsb2FkUGFydFdpdGhQcm9ncmVzcyhvcHRzLCByZXRyeUNvdW50ID0gMCkge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIHhoci5vcGVuKFwiUFVUXCIsIG9wdHMudXJsLCB0cnVlKTtcbiAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBvcHRzLmZpbGVUeXBlKTtcbiAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcbiAgICAgIFwiQ29udGVudC1EaXNwb3NpdGlvblwiLFxuICAgICAgW1xuICAgICAgICBvcHRzLmNvbnRlbnREaXNwb3NpdGlvbixcbiAgICAgICAgYGZpbGVuYW1lPVwiJHtlbmNvZGVVUkkob3B0cy5maWxlTmFtZSl9XCJgLFxuICAgICAgICBgZmlsZW5hbWUqPVVURi04Jycke2VuY29kZVVSSShvcHRzLmZpbGVOYW1lKX1gXG4gICAgICBdLmpvaW4oXCI7IFwiKVxuICAgICk7XG4gICAgeGhyLm9ubG9hZCA9IGFzeW5jICgpID0+IHtcbiAgICAgIGlmICh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDwgMzAwKSB7XG4gICAgICAgIGNvbnN0IGV0YWcgPSB4aHIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJFdGFnXCIpO1xuICAgICAgICBldGFnID8gcmVzb2x2ZShldGFnKSA6IHJlamVjdChcIk5PIEVUQUdcIik7XG4gICAgICB9IGVsc2UgaWYgKHJldHJ5Q291bnQgPCBvcHRzLm1heFJldHJpZXMpIHtcbiAgICAgICAgY29uc3QgZGVsYXkgPSBNYXRoLnBvdygyLCByZXRyeUNvdW50KSAqIDFlMztcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlcykgPT4gc2V0VGltZW91dChyZXMsIGRlbGF5KSk7XG4gICAgICAgIGF3YWl0IHVwbG9hZFBhcnRXaXRoUHJvZ3Jlc3Mob3B0cywgcmV0cnlDb3VudCArIDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVqZWN0KFwiTWF4IHJldHJpZXMgZXhjZWVkZWRcIik7XG4gICAgICB9XG4gICAgfTtcbiAgICBsZXQgbGFzdFByb2dyZXNzID0gMDtcbiAgICB4aHIub25lcnJvciA9IGFzeW5jICgpID0+IHtcbiAgICAgIGxhc3RQcm9ncmVzcyA9IDA7XG4gICAgICBpZiAocmV0cnlDb3VudCA8IG9wdHMubWF4UmV0cmllcykge1xuICAgICAgICBjb25zdCBkZWxheSA9IE1hdGgucG93KDIsIHJldHJ5Q291bnQpICogMTAwO1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzKSA9PiBzZXRUaW1lb3V0KHJlcywgZGVsYXkpKTtcbiAgICAgICAgYXdhaXQgdXBsb2FkUGFydFdpdGhQcm9ncmVzcyhvcHRzLCByZXRyeUNvdW50ICsgMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZWplY3QoXCJNYXggcmV0cmllcyBleGNlZWRlZFwiKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHhoci51cGxvYWQub25wcm9ncmVzcyA9IChlKSA9PiB7XG4gICAgICBjb25zdCBkZWx0YSA9IGUubG9hZGVkIC0gbGFzdFByb2dyZXNzO1xuICAgICAgbGFzdFByb2dyZXNzICs9IGRlbHRhO1xuICAgICAgb3B0cy5vblByb2dyZXNzKGRlbHRhKTtcbiAgICB9O1xuICAgIHhoci5zZW5kKG9wdHMuY2h1bmspO1xuICB9KTtcbn1cblxuZXhwb3J0IHtcbiAgbWF5YmVQYXJzZVJlc3BvbnNlWE1MLFxuICB1cGxvYWRQYXJ0LFxuICB1cGxvYWRQYXJ0V2l0aFByb2dyZXNzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2h1bmstUzNSM1ZYUksubWpzLm1hcCJdLCJuYW1lcyI6WyJnZW5lcmF0ZVVwbG9hZFRoaW5nVVJMIiwiVXBsb2FkVGhpbmdFcnJvciIsIm1heWJlUGFyc2VSZXNwb25zZVhNTCIsIm1heWJlWG1sIiwiY29kZU1hdGNoIiwibWF0Y2giLCJtZXNzYWdlTWF0Y2giLCJjb2RlIiwibWVzc2FnZSIsInMzQ29kZVRvVXBsb2FkVGhpbmdDb2RlIiwiREVGQVVMVF9FUlJPUl9DT0RFIiwiQWNjZXNzRGVuaWVkIiwiRW50aXR5VG9vU21hbGwiLCJFbnRpdHlUb29MYXJnZSIsIkV4cGlyZWRUb2tlbiIsIkluY29ycmVjdE51bWJlck9mRmlsZXNJblBvc3RSZXF1ZXN0IiwiSW50ZXJuYWxFcnJvciIsIktleVRvb0xvbmdFcnJvciIsIk1heE1lc3NhZ2VMZW5ndGhFeGNlZWRlZCIsInVwbG9hZFBhcnQiLCJvcHRzIiwicmV0cnlDb3VudCIsInMzUmVzIiwiZmV0Y2giLCJ1cmwiLCJtZXRob2QiLCJib2R5IiwiY2h1bmsiLCJoZWFkZXJzIiwiY29udGVudFR5cGUiLCJjb250ZW50RGlzcG9zaXRpb24iLCJlbmNvZGVVUkkiLCJmaWxlTmFtZSIsImpvaW4iLCJvayIsImV0YWciLCJnZXQiLCJyZXBsYWNlIiwibWF4UmV0cmllcyIsImRlbGF5IiwiUHJvbWlzZSIsInIiLCJzZXRUaW1lb3V0IiwiSlNPTiIsInN0cmluZ2lmeSIsImZpbGVLZXkiLCJrZXkiLCJ1dFJlcXVlc3RIZWFkZXJzIiwidGV4dCIsInBhcnNlZCIsImNhdXNlIiwidXBsb2FkUGFydFdpdGhQcm9ncmVzcyIsInJlc29sdmUiLCJyZWplY3QiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJzZXRSZXF1ZXN0SGVhZGVyIiwiZmlsZVR5cGUiLCJvbmxvYWQiLCJzdGF0dXMiLCJnZXRSZXNwb25zZUhlYWRlciIsIk1hdGgiLCJwb3ciLCJyZXMiLCJsYXN0UHJvZ3Jlc3MiLCJvbmVycm9yIiwidXBsb2FkIiwib25wcm9ncmVzcyIsImUiLCJkZWx0YSIsImxvYWRlZCIsIm9uUHJvZ3Jlc3MiLCJzZW5kIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/chunk-S3R3VXRK.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/chunk-VF56OB6T.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/uploadthing/dist/chunk-VF56OB6T.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UPLOADTHING_VERSION: () => (/* binding */ UPLOADTHING_VERSION),\n/* harmony export */   VALID_ACTION_TYPES: () => (/* binding */ VALID_ACTION_TYPES),\n/* harmony export */   buildPermissionsInfoHandler: () => (/* binding */ buildPermissionsInfoHandler),\n/* harmony export */   buildRequestHandler: () => (/* binding */ buildRequestHandler),\n/* harmony export */   createBuilder: () => (/* binding */ createBuilder),\n/* harmony export */   defaultErrorFormatter: () => (/* binding */ defaultErrorFormatter),\n/* harmony export */   formatError: () => (/* binding */ formatError),\n/* harmony export */   incompatibleNodeGuard: () => (/* binding */ incompatibleNodeGuard),\n/* harmony export */   initLogger: () => (/* binding */ initLogger),\n/* harmony export */   logger: () => (/* binding */ logger),\n/* harmony export */   unsetMarker: () => (/* binding */ unsetMarker)\n/* harmony export */ });\n/* harmony import */ var _chunk_4QCB7YXI_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-4QCB7YXI.mjs */ \"(rsc)/./node_modules/uploadthing/dist/chunk-4QCB7YXI.mjs\");\n/* harmony import */ var _chunk_JW5CQVQS_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-JW5CQVQS.mjs */ \"(rsc)/./node_modules/uploadthing/dist/chunk-JW5CQVQS.mjs\");\n/* harmony import */ var consola_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! consola/core */ \"(rsc)/./node_modules/consola/dist/core.mjs\");\n/* harmony import */ var std_env__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! std-env */ \"(rsc)/./node_modules/std-env/dist/index.mjs\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.mjs\");\n\n\n// package.json\nvar package_default = {\n    name: \"uploadthing\",\n    version: \"6.3.3\",\n    engines: {\n        node: \">=18.13.0\"\n    },\n    license: \"MIT\",\n    exports: {\n        \"./package.json\": \"./package.json\",\n        \"./client\": {\n            types: \"./dist/client.d.ts\",\n            import: \"./dist/client.mjs\",\n            require: \"./dist/client.js\"\n        },\n        \"./server\": {\n            types: \"./dist/server.d.ts\",\n            import: \"./dist/server.mjs\",\n            require: \"./dist/server.js\"\n        },\n        \"./next\": {\n            types: \"./dist/next.d.ts\",\n            import: \"./dist/next.mjs\",\n            require: \"./dist/next.js\"\n        },\n        \"./next-legacy\": {\n            types: \"./dist/next-legacy.d.ts\",\n            import: \"./dist/next-legacy.mjs\",\n            require: \"./dist/next-legacy.js\"\n        },\n        \"./express\": {\n            import: \"./dist/express.mjs\",\n            types: \"./dist/express.d.ts\",\n            require: \"./dist/express.js\"\n        },\n        \"./tw\": {\n            types: \"./dist/tw.d.ts\",\n            import: \"./dist/tw.mjs\",\n            require: \"./dist/tw.js\"\n        },\n        \"./fastify\": {\n            types: \"./dist/fastify.d.ts\",\n            import: \"./dist/fastify.mjs\",\n            require: \"./dist/fastify.js\"\n        },\n        \"./h3\": {\n            types: \"./dist/h3.d.ts\",\n            import: \"./dist/h3.mjs\",\n            require: \"./dist/h3.js\"\n        }\n    },\n    files: [\n        \"dist\"\n    ],\n    publishConfig: {\n        access: \"public\"\n    },\n    typesVersions: {\n        \"*\": {\n            client: [\n                \"dist/client.d.ts\"\n            ],\n            server: [\n                \"dist/server.d.ts\"\n            ],\n            next: [\n                \"dist/next.d.ts\"\n            ],\n            \"next-legacy\": [\n                \"dist/next-legacy.d.ts\"\n            ],\n            tw: [\n                \"dist/tw.d.ts\"\n            ],\n            express: [\n                \"dist/express.d.ts\"\n            ],\n            fastify: [\n                \"dist/fastify.d.ts\"\n            ],\n            h3: [\n                \"dist/h3.d.ts\"\n            ]\n        }\n    },\n    scripts: {\n        lint: 'eslint \"**/*.{ts,tsx}\" --max-warnings 0',\n        build: \"tsup\",\n        clean: \"git clean -xdf dist node_modules\",\n        dev: \"tsup --watch\",\n        test: \"vitest run\",\n        \"test:watch\": \"vitest\",\n        typecheck: \"tsc --noEmit\"\n    },\n    dependencies: {\n        \"@uploadthing/mime-types\": \"^0.2.2\",\n        \"@uploadthing/shared\": \"^6.2.1\",\n        consola: \"^3.2.3\",\n        \"std-env\": \"^3.7.0\"\n    },\n    devDependencies: {\n        \"@types/express\": \"^4.17.17\",\n        \"@types/react\": \"18.2.33\",\n        \"@uploadthing/eslint-config\": \"0.2.0\",\n        \"@uploadthing/tsconfig\": \"0.1.0\",\n        \"@uploadthing/tsup-config\": \"0.1.0\",\n        eslint: \"^8.56.0\",\n        express: \"^4.18.2\",\n        fastify: \"^4.23.2\",\n        h3: \"^1.8.1\",\n        next: \"14.0.1\",\n        \"solid-js\": \"^1.7.11\",\n        tailwindcss: \"^3.4.1\",\n        tsup: \"6.7.0\",\n        \"type-fest\": \"^3.11.1\",\n        typescript: \"^5.3.3\",\n        undici: \"^6.5.0\",\n        vitest: \"^1.2.2\",\n        zod: \"^3.22.4\"\n    },\n    eslintConfig: {\n        root: true,\n        extends: [\n            \"@uploadthing/eslint-config/base\"\n        ],\n        rules: {\n            \"no-console\": \"error\",\n            \"no-restricted-globals\": [\n                \"error\",\n                {\n                    name: \"fetch\",\n                    message: \"fetch should be passed as parameter to support overriding default behaviors\"\n                },\n                {\n                    name: \"process\",\n                    message: \"Use `import { process } from 'std-env` instead\"\n                }\n            ]\n        }\n    }\n};\n// src/constants.ts\nif (!package_default.version) throw new Error(\"no version found in package.json\");\nvar UPLOADTHING_VERSION = package_default.version;\n// src/internal/error-formatter.ts\nfunction defaultErrorFormatter(error) {\n    return {\n        message: error.message\n    };\n}\nfunction formatError(error, router) {\n    var _a;\n    const errorFormatter = ((_a = router[Object.keys(router)[0]]) == null ? void 0 : _a._def.errorFormatter) ?? defaultErrorFormatter;\n    return errorFormatter(error);\n}\n// src/internal/logger.ts\n\n\n\nvar colorize = (str, level)=>{\n    switch(level){\n        case \"error\":\n        case \"fatal\":\n            return `\\x1B[41m\\x1B[30m${str}\\x1B[0m`;\n        case \"warn\":\n            return `\\x1B[43m\\x1B[30m${str}\\x1B[0m`;\n        case \"info\":\n        case \"log\":\n            return `\\x1B[44m\\x1B[30m${str}\\x1B[0m`;\n        case \"debug\":\n            return `\\x1B[47m\\x1B[30m${str}\\x1B[0m`;\n        case \"trace\":\n            return `\\x1B[47m\\x1B[30m${str}\\x1B[0m`;\n        case \"success\":\n            return `\\x1B[42m\\x1B[30m${str}\\x1B[0m`;\n        default:\n            return str;\n    }\n};\nvar icons = {\n    fatal: \"\",\n    error: \"\",\n    warn: \"\",\n    info: \"\",\n    log: \"\",\n    debug: \"\",\n    trace: \"\",\n    success: \"\"\n};\nfunction formatStack(stack) {\n    const cwd = \"cwd\" in std_env__WEBPACK_IMPORTED_MODULE_4__.process && typeof std_env__WEBPACK_IMPORTED_MODULE_4__.process.cwd === \"function\" ? std_env__WEBPACK_IMPORTED_MODULE_4__.process.cwd() : \"__UnknownCWD__\";\n    return \"  \" + stack.split(\"\\n\").splice(1).map((l)=>l.trim().replace(\"file://\", \"\").replace(cwd + \"/\", \"\")).join(\"\\n  \");\n}\nfunction formatArgs(args) {\n    const fmtArgs = args.map((arg)=>{\n        if ((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.isObject)(arg) && typeof arg.stack === \"string\") {\n            return arg.message + \"\\n\" + formatStack(arg.stack);\n        }\n        return arg;\n    });\n    return fmtArgs.map((arg)=>{\n        if (typeof arg === \"string\") {\n            return arg;\n        }\n        try {\n            const util = (0,_chunk_JW5CQVQS_mjs__WEBPACK_IMPORTED_MODULE_1__.__require)(\"util\");\n            return util.inspect(arg, {\n                depth: 4\n            });\n        } catch  {\n            return JSON.stringify(arg, null, 4);\n        }\n    });\n}\nvar logger = (0,consola_core__WEBPACK_IMPORTED_MODULE_2__.createConsola)({\n    reporters: [\n        {\n            log: (logObj)=>{\n                const { type, tag, date, args } = logObj;\n                const icon = icons[type];\n                const logPrefix = colorize(` ${icon} ${tag} ${date.toLocaleTimeString()} `, type);\n                const lines = formatArgs(args).join(\" \").split(\"\\n\").map((l)=>logPrefix + \" \" + l).join(\"\\n\");\n                console.log(lines);\n            }\n        }\n    ],\n    defaults: {\n        tag: \"UPLOADTHING\"\n    }\n});\nvar initLogger = (level)=>{\n    logger.level = consola_core__WEBPACK_IMPORTED_MODULE_2__.LogLevels[level ?? \"info\"];\n};\n// src/internal/types.ts\nvar unsetMarker = \"unsetMarker\";\nvar VALID_ACTION_TYPES = [\n    \"upload\",\n    \"failure\",\n    \"multipart-complete\"\n];\n// src/internal/handler.ts\n\n\n// src/internal/dev-hook.ts\n\nvar isValidResponse = (response)=>{\n    if (!response.ok) return false;\n    if (response.status >= 400) return false;\n    if (!response.headers.has(\"x-uploadthing-version\")) return false;\n    return true;\n};\nvar conditionalDevServer = async (opts)=>{\n    const fileData = await (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.pollForFileData)({\n        url: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.generateUploadThingURL)(`/api/pollUpload/${opts.fileKey}`),\n        apiKey: opts.apiKey,\n        sdkVersion: UPLOADTHING_VERSION,\n        fetch: opts.fetch\n    }, async (json)=>{\n        const file = json.fileData;\n        let callbackUrl = file.callbackUrl + `?slug=${file.callbackSlug}`;\n        if (!callbackUrl.startsWith(\"http\")) callbackUrl = \"http://\" + callbackUrl;\n        logger.info(\"SIMULATING FILE UPLOAD WEBHOOK CALLBACK\", callbackUrl);\n        const response = await opts.fetch(callbackUrl, {\n            method: \"POST\",\n            body: JSON.stringify({\n                status: \"uploaded\",\n                metadata: JSON.parse(file.metadata ?? \"{}\"),\n                file: {\n                    url: `https://utfs.io/f/${encodeURIComponent(opts.fileKey)}`,\n                    key: opts.fileKey,\n                    name: file.fileName,\n                    size: file.fileSize\n                }\n            }),\n            headers: {\n                \"uploadthing-hook\": \"callback\"\n            }\n        });\n        if (isValidResponse(response)) {\n            logger.success(\"Successfully simulated callback for file\", opts.fileKey);\n        } else {\n            logger.error(\"Failed to simulate callback for file. Is your webhook configured correctly?\", opts.fileKey);\n        }\n        return file;\n    });\n    if (fileData !== void 0) return fileData;\n    logger.error(`Failed to simulate callback for file ${opts.fileKey}`);\n    throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n        code: \"UPLOAD_FAILED\",\n        message: \"File took too long to upload\"\n    });\n};\n// src/internal/parser.ts\nfunction getParseFn(parser) {\n    if (typeof parser.parse === \"function\") {\n        return parser.parse;\n    }\n    throw new Error(\"Invalid parser\");\n}\n// src/internal/handler.ts\nvar createUTFetch = (apiKey, fetch, fePackage, beAdapter)=>{\n    return async (endpoint, payload)=>{\n        const response = await fetch((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.generateUploadThingURL)(endpoint), {\n            method: \"POST\",\n            body: JSON.stringify(payload),\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"x-uploadthing-api-key\": apiKey,\n                \"x-uploadthing-version\": UPLOADTHING_VERSION,\n                \"x-uploadthing-fe-package\": fePackage,\n                \"x-uploadthing-be-adapter\": beAdapter\n            }\n        });\n        return response;\n    };\n};\nvar fileCountLimitHit = (files, routeConfig)=>{\n    var _a;\n    const counts = {};\n    files.forEach((file)=>{\n        const type = (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.getTypeFromFileName)(file.name, (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.objectKeys)(routeConfig));\n        if (!counts[type]) {\n            counts[type] = 1;\n        } else {\n            counts[type] += 1;\n        }\n    });\n    for(const _key in counts){\n        const key = _key;\n        const count = counts[key];\n        const limit = (_a = routeConfig[key]) == null ? void 0 : _a.maxFileCount;\n        if (!limit) {\n            logger.error(routeConfig, key);\n            throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"Invalid config during file count\",\n                cause: `Expected route config to have a maxFileCount for key ${key} but none was found.`\n            });\n        }\n        if (count > limit) {\n            return {\n                limitHit: true,\n                type: key,\n                limit,\n                count\n            };\n        }\n    }\n    return {\n        limitHit: false\n    };\n};\nvar buildRequestHandler = (opts, adapter)=>{\n    return async (input)=>{\n        var _a, _b;\n        const isDev = ((_a = opts.config) == null ? void 0 : _a.isDev) ?? std_env__WEBPACK_IMPORTED_MODULE_4__.isDevelopment;\n        const fetch = ((_b = opts.config) == null ? void 0 : _b.fetch) ?? globalThis.fetch;\n        if (isDev) {\n            logger.info(\"UploadThing dev server is now running!\");\n        }\n        const { router, config } = opts;\n        const preferredOrEnvSecret = (config == null ? void 0 : config.uploadthingSecret) ?? std_env__WEBPACK_IMPORTED_MODULE_4__.process.env.UPLOADTHING_SECRET;\n        const req = input.nativeRequest;\n        const url = new URL(req.url);\n        const params = url.searchParams;\n        const uploadthingHook = req.headers.get(\"uploadthing-hook\") ?? void 0;\n        const slug = params.get(\"slug\") ?? void 0;\n        const actionType = params.get(\"actionType\") ?? void 0;\n        const utFrontendPackage = req.headers.get(\"x-uploadthing-package\") ?? \"unknown\";\n        if (!slug) {\n            logger.error(\"No slug provided in params:\", params);\n            return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"No slug provided in params\"\n            });\n        }\n        if (slug && typeof slug !== \"string\") {\n            const msg = `Expected slug to be of type 'string', got '${typeof slug}'`;\n            logger.error(msg);\n            return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"`slug` must be a string\",\n                cause: msg\n            });\n        }\n        if (actionType && typeof actionType !== \"string\") {\n            const msg = `Expected actionType to be of type 'string', got '${typeof actionType}'`;\n            logger.error(msg);\n            return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"`actionType` must be a string\",\n                cause: msg\n            });\n        }\n        if (uploadthingHook && typeof uploadthingHook !== \"string\") {\n            const msg = `Expected uploadthingHook to be of type 'string', got '${typeof uploadthingHook}'`;\n            return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"`uploadthingHook` must be a string\",\n                cause: msg\n            });\n        }\n        if (!preferredOrEnvSecret) {\n            const msg = `No secret provided, please set UPLOADTHING_SECRET in your env file or in the config`;\n            logger.error(msg);\n            return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                code: \"MISSING_ENV\",\n                message: `No secret provided`,\n                cause: msg\n            });\n        }\n        if (!preferredOrEnvSecret.startsWith(\"sk_\")) {\n            const msg = `Invalid secret provided, UPLOADTHING_SECRET must start with 'sk_'`;\n            logger.error(msg);\n            return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                code: \"MISSING_ENV\",\n                message: \"Invalid API key. API keys must start with 'sk_'.\",\n                cause: msg\n            });\n        }\n        if (utFrontendPackage && typeof utFrontendPackage !== \"string\") {\n            const msg = `Expected x-uploadthing-package to be of type 'string', got '${typeof utFrontendPackage}'`;\n            logger.error(msg);\n            return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"`x-uploadthing-package` must be a string. eg. '@uploadthing/react'\",\n                cause: msg\n            });\n        }\n        const uploadable = router[slug];\n        if (!uploadable) {\n            const msg = `No file route found for slug ${slug}`;\n            logger.error(msg);\n            return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                code: \"NOT_FOUND\",\n                message: msg\n            });\n        }\n        const utFetch = createUTFetch(preferredOrEnvSecret, fetch, utFrontendPackage, adapter);\n        logger.debug(\"All request input is valid\", {\n            slug,\n            actionType,\n            uploadthingHook\n        });\n        if (uploadthingHook === \"callback\") {\n            const maybeReqBody = await (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.safeParseJSON)(req);\n            logger.debug(\"Handling callback request with input:\", maybeReqBody);\n            if (maybeReqBody instanceof Error) {\n                logger.error(\"Invalid request body\", maybeReqBody);\n                return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                    code: \"BAD_REQUEST\",\n                    message: \"Invalid request body\",\n                    cause: maybeReqBody\n                });\n            }\n            const resolverArgs = {\n                file: maybeReqBody.file,\n                metadata: maybeReqBody.metadata\n            };\n            logger.debug(\"Running 'onUploadComplete' callback with input:\", resolverArgs);\n            const res = await uploadable.resolver(resolverArgs);\n            const payload = {\n                fileKey: maybeReqBody.file.key,\n                callbackData: res ?? null\n            };\n            logger.debug(\"'onUploadComplete' callback finished. Sending response to UploadThing:\", payload);\n            const callbackResponse = await utFetch(\"/api/serverCallback\", payload);\n            logger.debug(\"UploadThing responded with status:\", callbackResponse.status);\n            return {\n                status: 200\n            };\n        }\n        if (!actionType || !VALID_ACTION_TYPES.includes(actionType)) {\n            const msg = `Expected ${VALID_ACTION_TYPES.map((x)=>`\"${x}\"`).join(\", \").replace(/,(?!.*,)/, \" or\")} but got \"${actionType}\"`;\n            logger.error(\"Invalid action type.\", msg);\n            return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                cause: `Invalid action type ${actionType}`,\n                message: msg\n            });\n        }\n        switch(actionType){\n            case \"upload\":\n                {\n                    const maybeInput = await (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.safeParseJSON)(req);\n                    if (maybeInput instanceof Error) {\n                        logger.error(\"Invalid request body\", maybeInput);\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                            code: \"BAD_REQUEST\",\n                            message: \"Invalid request body\",\n                            cause: maybeInput\n                        });\n                    }\n                    logger.debug(\"Handling upload request with input:\", maybeInput);\n                    const { files, input: userInput } = maybeInput;\n                    let parsedInput = {};\n                    try {\n                        logger.debug(\"Parsing input\");\n                        const inputParser = uploadable._def.inputParser;\n                        parsedInput = await getParseFn(inputParser)(userInput);\n                        logger.debug(\"Input parsed successfully\", parsedInput);\n                    } catch (error) {\n                        logger.error(\"An error occured trying to parse input\", error);\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                            code: \"BAD_REQUEST\",\n                            message: \"Invalid input.\",\n                            cause: error\n                        });\n                    }\n                    let metadata = {};\n                    try {\n                        logger.debug(\"Running middleware\");\n                        metadata = await uploadable._def.middleware({\n                            req: input.originalRequest,\n                            res: input.res,\n                            event: input.event,\n                            input: parsedInput,\n                            files\n                        });\n                        logger.debug(\"Middleware finished successfully with:\", metadata);\n                    } catch (error) {\n                        logger.error(\"An error occured in your middleware function\", error);\n                        if (error instanceof _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError) return error;\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                            code: \"INTERNAL_SERVER_ERROR\",\n                            message: \"Failed to run middleware.\",\n                            cause: error\n                        });\n                    }\n                    if (!Array.isArray(files) || !files.every((f)=>(0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.isObject)(f) && typeof f.name === \"string\" && typeof f.size === \"number\")) {\n                        const msg = `Expected files to be of type '{name:string, size:number}[]', got '${JSON.stringify(files)}'`;\n                        logger.error(msg);\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                            code: \"BAD_REQUEST\",\n                            message: \"Files must be an array of objects with name and size\",\n                            cause: msg\n                        });\n                    }\n                    let parsedConfig;\n                    try {\n                        logger.debug(\"Parsing route config\", uploadable._def.routerConfig);\n                        parsedConfig = (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.fillInputRouteConfig)(uploadable._def.routerConfig);\n                        logger.debug(\"Route config parsed successfully\", parsedConfig);\n                    } catch (error) {\n                        logger.error(\"Invalid route config\", error);\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                            code: \"BAD_REQUEST\",\n                            message: \"Invalid config.\",\n                            cause: error\n                        });\n                    }\n                    try {\n                        logger.debug(\"Checking file count limit\", files);\n                        const { limitHit, count, limit, type } = fileCountLimitHit(files, parsedConfig);\n                        if (limitHit) {\n                            const msg = `You uploaded ${count} files of type '${type}', but the limit for that type is ${limit}`;\n                            logger.error(msg);\n                            return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                                code: \"BAD_REQUEST\",\n                                message: \"File limit exceeded\",\n                                cause: msg\n                            });\n                        }\n                        logger.debug(\"File count limit check passed\");\n                    } catch (error) {\n                        logger.error(\"Invalid route config\", error);\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                            code: \"BAD_REQUEST\",\n                            message: \"Invalid config.\",\n                            cause: error\n                        });\n                    }\n                    const callbackUrl = resolveCallbackUrl({\n                        config,\n                        req,\n                        url,\n                        isDev\n                    });\n                    logger.debug(\"Retrieving presigned URLs from UploadThing. Callback URL is:\", callbackUrl.href);\n                    const uploadthingApiResponse = await utFetch(\"/api/prepareUpload\", {\n                        files,\n                        routeConfig: parsedConfig,\n                        metadata,\n                        callbackUrl: callbackUrl.origin + callbackUrl.pathname,\n                        callbackSlug: slug\n                    });\n                    const parsedResponse = await (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.safeParseJSON)(uploadthingApiResponse);\n                    if (!uploadthingApiResponse.ok || parsedResponse instanceof Error) {\n                        logger.error(\"Unable to get presigned URLs\", parsedResponse);\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                            code: \"URL_GENERATION_FAILED\",\n                            message: \"Unable to get presigned urls\",\n                            cause: parsedResponse\n                        });\n                    }\n                    logger.debug(\"UploadThing responded with:\", parsedResponse);\n                    logger.debug(\"Sending presigned URLs to client\");\n                    let promise = void 0;\n                    if (isDev) {\n                        promise = Promise.all(parsedResponse.map((file)=>conditionalDevServer({\n                                fileKey: file.key,\n                                apiKey: preferredOrEnvSecret,\n                                fetch\n                            }).catch((error)=>{\n                                logger.error(\"Err\", error);\n                            })));\n                    }\n                    return {\n                        cleanup: promise,\n                        body: parsedResponse.map((x)=>({\n                                ...x,\n                                pollingUrl: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.generateUploadThingURL)(`/api/serverCallback`)\n                            })),\n                        status: 200\n                    };\n                }\n            case \"multipart-complete\":\n                {\n                    const maybeReqBody = await (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.safeParseJSON)(req);\n                    if (maybeReqBody instanceof Error) {\n                        logger.error(\"Invalid request body\", maybeReqBody);\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                            code: \"BAD_REQUEST\",\n                            message: \"Invalid request body\",\n                            cause: maybeReqBody\n                        });\n                    }\n                    logger.debug(\"Handling multipart-complete request with input:\", maybeReqBody);\n                    logger.debug(\"Notifying UploadThing that multipart upload is complete\");\n                    const completeRes = await utFetch(\"/api/completeMultipart\", {\n                        fileKey: maybeReqBody.fileKey,\n                        uploadId: maybeReqBody.uploadId,\n                        etags: maybeReqBody.etags\n                    });\n                    if (!completeRes.ok) {\n                        logger.error(\"Failed to notify UploadThing that multipart upload is complete\");\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                            code: \"UPLOAD_FAILED\",\n                            message: \"Failed to complete multipart upload\",\n                            cause: completeRes\n                        });\n                    }\n                    logger.debug(\"UploadThing responded with:\", completeRes.status);\n                    return {\n                        status: 200\n                    };\n                }\n            case \"failure\":\n                {\n                    const maybeReqBody = await (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.safeParseJSON)(req);\n                    if (maybeReqBody instanceof Error) {\n                        logger.error(\"Invalid request body\", maybeReqBody);\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                            code: \"BAD_REQUEST\",\n                            message: \"Invalid request body\",\n                            cause: maybeReqBody\n                        });\n                    }\n                    const { fileKey, uploadId } = maybeReqBody;\n                    logger.debug(\"Handling failure request with input:\", maybeReqBody);\n                    logger.debug(\"Notifying UploadThing that upload failed\");\n                    const uploadthingApiResponse = await utFetch(\"/api/failureCallback\", {\n                        fileKey,\n                        uploadId\n                    });\n                    if (!uploadthingApiResponse.ok) {\n                        const parsedResponse = await (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.safeParseJSON)(uploadthingApiResponse);\n                        logger.error(\"Failed to mark upload as failed\", parsedResponse);\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                            code: \"INTERNAL_SERVER_ERROR\",\n                            message: \"Unable to mark upload as failed\",\n                            cause: parsedResponse\n                        });\n                    }\n                    logger.debug(\"UploadThing responded with:\", uploadthingApiResponse);\n                    logger.debug(\"Running 'onUploadError' callback\");\n                    try {\n                        uploadable._def.onUploadError({\n                            error: new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                                code: \"UPLOAD_FAILED\",\n                                message: `Upload failed for ${fileKey}`\n                            }),\n                            fileKey\n                        });\n                    } catch (error) {\n                        logger.error(\"Failed to run onUploadError callback. You probably shouldn't be throwing errors in your callback.\", error);\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                            code: \"INTERNAL_SERVER_ERROR\",\n                            message: \"Failed to run onUploadError callback\",\n                            cause: error\n                        });\n                    }\n                    return {\n                        status: 200\n                    };\n                }\n            default:\n                {\n                    return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                        code: \"BAD_REQUEST\",\n                        message: `Invalid action type`\n                    });\n                }\n        }\n    };\n};\nfunction resolveCallbackUrl(opts) {\n    var _a;\n    let callbackUrl = opts.url;\n    if ((_a = opts.config) == null ? void 0 : _a.callbackUrl) {\n        callbackUrl = (0,_chunk_4QCB7YXI_mjs__WEBPACK_IMPORTED_MODULE_0__.getFullApiUrl)(opts.config.callbackUrl);\n    } else if (std_env__WEBPACK_IMPORTED_MODULE_4__.process.env.UPLOADTHING_URL) {\n        callbackUrl = (0,_chunk_4QCB7YXI_mjs__WEBPACK_IMPORTED_MODULE_0__.getFullApiUrl)(std_env__WEBPACK_IMPORTED_MODULE_4__.process.env.UPLOADTHING_URL);\n    }\n    if (opts.isDev || !callbackUrl.host.includes(\"localhost\")) {\n        return callbackUrl;\n    }\n    const headers = opts.req.headers;\n    let parsedFromHeaders = headers.get(\"origin\") ?? headers.get(\"referer\") ?? headers.get(\"host\") ?? headers.get(\"x-forwarded-host\");\n    if (parsedFromHeaders && !parsedFromHeaders.includes(\"http\")) {\n        parsedFromHeaders = (headers.get(\"x-forwarded-proto\") ?? \"https\") + \"://\" + parsedFromHeaders;\n    }\n    if (!parsedFromHeaders || parsedFromHeaders.includes(\"localhost\")) {\n        logger.warn(\"You are using a localhost callback url in production which is not supported.\", \"Read more and learn how to fix it here: https://docs.uploadthing.com/faq#my-callback-runs-in-development-but-not-in-production\");\n        return callbackUrl;\n    }\n    return (0,_chunk_4QCB7YXI_mjs__WEBPACK_IMPORTED_MODULE_0__.getFullApiUrl)(parsedFromHeaders);\n}\nvar buildPermissionsInfoHandler = (opts)=>{\n    return ()=>{\n        const r = opts.router;\n        const permissions = Object.keys(r).map((k)=>{\n            const route = r[k];\n            const config = (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.fillInputRouteConfig)(route._def.routerConfig);\n            return {\n                slug: k,\n                config\n            };\n        });\n        return permissions;\n    };\n};\n// src/internal/incompat-node-guard.ts\n\nfunction incompatibleNodeGuard() {\n    var _a, _b, _c, _d, _e, _f;\n    if (typeof std_env__WEBPACK_IMPORTED_MODULE_4__.process === \"undefined\") return;\n    let major;\n    let minor;\n    const maybeNodeVersion = (_b = (_a = std_env__WEBPACK_IMPORTED_MODULE_4__.process.versions) == null ? void 0 : _a.node) == null ? void 0 : _b.split(\".\");\n    if (maybeNodeVersion) {\n        [major, minor] = maybeNodeVersion.map((v)=>parseInt(v, 10));\n    }\n    const maybeNodePath = (_c = std_env__WEBPACK_IMPORTED_MODULE_4__.process.env) == null ? void 0 : _c.NODE;\n    if (!major && maybeNodePath) {\n        const nodeVersion = (_d = /v(\\d+)\\.(\\d+)\\.(\\d+)/.exec(maybeNodePath)) == null ? void 0 : _d[0];\n        if (nodeVersion) {\n            [major, minor] = nodeVersion.substring(1).split(\".\").map((v)=>parseInt(v, 10));\n        }\n    }\n    if (!major || !minor) return;\n    if (major > 18) return;\n    if (major === 18 && minor >= 13) return;\n    logger.fatal(`YOU ARE USING A LEGACY (${major}.${minor}) NODE VERSION WHICH ISN'T OFFICIALLY SUPPORTED. PLEASE UPGRADE TO NODE ^18.13.`);\n    (_f = (_e = std_env__WEBPACK_IMPORTED_MODULE_4__.process).exit) == null ? void 0 : _f.call(_e, 1);\n}\n// src/internal/upload-builder.ts\nfunction internalCreateBuilder(initDef = {}) {\n    const _def = {\n        // Default router config\n        routerConfig: {\n            image: {\n                maxFileSize: \"4MB\"\n            }\n        },\n        inputParser: {\n            parse: ()=>({}),\n            _input: {},\n            _output: {}\n        },\n        middleware: ()=>({}),\n        onUploadError: ()=>({}),\n        errorFormatter: initDef.errorFormatter ?? defaultErrorFormatter,\n        // Overload with properties passed in\n        ...initDef\n    };\n    return {\n        input (userParser) {\n            return internalCreateBuilder({\n                ..._def,\n                inputParser: userParser\n            });\n        },\n        middleware (userMiddleware) {\n            return internalCreateBuilder({\n                ..._def,\n                middleware: userMiddleware\n            });\n        },\n        onUploadComplete (userUploadComplete) {\n            return {\n                _def,\n                resolver: userUploadComplete\n            };\n        },\n        onUploadError (userOnUploadError) {\n            return internalCreateBuilder({\n                ..._def,\n                onUploadError: userOnUploadError\n            });\n        }\n    };\n}\nfunction createBuilder(opts) {\n    return (input)=>{\n        return internalCreateBuilder({\n            routerConfig: input,\n            ...opts\n        });\n    };\n}\n //# sourceMappingURL=chunk-VF56OB6T.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9jaHVuay1WRjU2T0I2VC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUU4QjtBQUdBO0FBRTlCLGVBQWU7QUFDZixJQUFJRSxrQkFBa0I7SUFDcEJDLE1BQU07SUFDTkMsU0FBUztJQUNUQyxTQUFTO1FBQ1BDLE1BQU07SUFDUjtJQUNBQyxTQUFTO0lBQ1RDLFNBQVM7UUFDUCxrQkFBa0I7UUFDbEIsWUFBWTtZQUNWQyxPQUFPO1lBQ1BDLFFBQVE7WUFDUkMsU0FBUztRQUNYO1FBQ0EsWUFBWTtZQUNWRixPQUFPO1lBQ1BDLFFBQVE7WUFDUkMsU0FBUztRQUNYO1FBQ0EsVUFBVTtZQUNSRixPQUFPO1lBQ1BDLFFBQVE7WUFDUkMsU0FBUztRQUNYO1FBQ0EsaUJBQWlCO1lBQ2ZGLE9BQU87WUFDUEMsUUFBUTtZQUNSQyxTQUFTO1FBQ1g7UUFDQSxhQUFhO1lBQ1hELFFBQVE7WUFDUkQsT0FBTztZQUNQRSxTQUFTO1FBQ1g7UUFDQSxRQUFRO1lBQ05GLE9BQU87WUFDUEMsUUFBUTtZQUNSQyxTQUFTO1FBQ1g7UUFDQSxhQUFhO1lBQ1hGLE9BQU87WUFDUEMsUUFBUTtZQUNSQyxTQUFTO1FBQ1g7UUFDQSxRQUFRO1lBQ05GLE9BQU87WUFDUEMsUUFBUTtZQUNSQyxTQUFTO1FBQ1g7SUFDRjtJQUNBQyxPQUFPO1FBQ0w7S0FDRDtJQUNEQyxlQUFlO1FBQ2JDLFFBQVE7SUFDVjtJQUNBQyxlQUFlO1FBQ2IsS0FBSztZQUNIQyxRQUFRO2dCQUNOO2FBQ0Q7WUFDREMsUUFBUTtnQkFDTjthQUNEO1lBQ0RDLE1BQU07Z0JBQ0o7YUFDRDtZQUNELGVBQWU7Z0JBQ2I7YUFDRDtZQUNEQyxJQUFJO2dCQUNGO2FBQ0Q7WUFDREMsU0FBUztnQkFDUDthQUNEO1lBQ0RDLFNBQVM7Z0JBQ1A7YUFDRDtZQUNEQyxJQUFJO2dCQUNGO2FBQ0Q7UUFDSDtJQUNGO0lBQ0FDLFNBQVM7UUFDUEMsTUFB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Olsid2VicGFjazovL3N5bmNjaGF0Ly4vbm9kZV9tb2R1bGVzL3VwbG9hZHRoaW5nL2Rpc3QvY2h1bmstVkY1Nk9CNlQubWpzP2Y2ZTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgZ2V0RnVsbEFwaVVybFxufSBmcm9tIFwiLi9jaHVuay00UUNCN1lYSS5tanNcIjtcbmltcG9ydCB7XG4gIF9fcmVxdWlyZVxufSBmcm9tIFwiLi9jaHVuay1KVzVDUVZRUy5tanNcIjtcblxuLy8gcGFja2FnZS5qc29uXG52YXIgcGFja2FnZV9kZWZhdWx0ID0ge1xuICBuYW1lOiBcInVwbG9hZHRoaW5nXCIsXG4gIHZlcnNpb246IFwiNi4zLjNcIixcbiAgZW5naW5lczoge1xuICAgIG5vZGU6IFwiPj0xOC4xMy4wXCJcbiAgfSxcbiAgbGljZW5zZTogXCJNSVRcIixcbiAgZXhwb3J0czoge1xuICAgIFwiLi9wYWNrYWdlLmpzb25cIjogXCIuL3BhY2thZ2UuanNvblwiLFxuICAgIFwiLi9jbGllbnRcIjoge1xuICAgICAgdHlwZXM6IFwiLi9kaXN0L2NsaWVudC5kLnRzXCIsXG4gICAgICBpbXBvcnQ6IFwiLi9kaXN0L2NsaWVudC5tanNcIixcbiAgICAgIHJlcXVpcmU6IFwiLi9kaXN0L2NsaWVudC5qc1wiXG4gICAgfSxcbiAgICBcIi4vc2VydmVyXCI6IHtcbiAgICAgIHR5cGVzOiBcIi4vZGlzdC9zZXJ2ZXIuZC50c1wiLFxuICAgICAgaW1wb3J0OiBcIi4vZGlzdC9zZXJ2ZXIubWpzXCIsXG4gICAgICByZXF1aXJlOiBcIi4vZGlzdC9zZXJ2ZXIuanNcIlxuICAgIH0sXG4gICAgXCIuL25leHRcIjoge1xuICAgICAgdHlwZXM6IFwiLi9kaXN0L25leHQuZC50c1wiLFxuICAgICAgaW1wb3J0OiBcIi4vZGlzdC9uZXh0Lm1qc1wiLFxuICAgICAgcmVxdWlyZTogXCIuL2Rpc3QvbmV4dC5qc1wiXG4gICAgfSxcbiAgICBcIi4vbmV4dC1sZWdhY3lcIjoge1xuICAgICAgdHlwZXM6IFwiLi9kaXN0L25leHQtbGVnYWN5LmQudHNcIixcbiAgICAgIGltcG9ydDogXCIuL2Rpc3QvbmV4dC1sZWdhY3kubWpzXCIsXG4gICAgICByZXF1aXJlOiBcIi4vZGlzdC9uZXh0LWxlZ2FjeS5qc1wiXG4gICAgfSxcbiAgICBcIi4vZXhwcmVzc1wiOiB7XG4gICAgICBpbXBvcnQ6IFwiLi9kaXN0L2V4cHJlc3MubWpzXCIsXG4gICAgICB0eXBlczogXCIuL2Rpc3QvZXhwcmVzcy5kLnRzXCIsXG4gICAgICByZXF1aXJlOiBcIi4vZGlzdC9leHByZXNzLmpzXCJcbiAgICB9LFxuICAgIFwiLi90d1wiOiB7XG4gICAgICB0eXBlczogXCIuL2Rpc3QvdHcuZC50c1wiLFxuICAgICAgaW1wb3J0OiBcIi4vZGlzdC90dy5tanNcIixcbiAgICAgIHJlcXVpcmU6IFwiLi9kaXN0L3R3LmpzXCJcbiAgICB9LFxuICAgIFwiLi9mYXN0aWZ5XCI6IHtcbiAgICAgIHR5cGVzOiBcIi4vZGlzdC9mYXN0aWZ5LmQudHNcIixcbiAgICAgIGltcG9ydDogXCIuL2Rpc3QvZmFzdGlmeS5tanNcIixcbiAgICAgIHJlcXVpcmU6IFwiLi9kaXN0L2Zhc3RpZnkuanNcIlxuICAgIH0sXG4gICAgXCIuL2gzXCI6IHtcbiAgICAgIHR5cGVzOiBcIi4vZGlzdC9oMy5kLnRzXCIsXG4gICAgICBpbXBvcnQ6IFwiLi9kaXN0L2gzLm1qc1wiLFxuICAgICAgcmVxdWlyZTogXCIuL2Rpc3QvaDMuanNcIlxuICAgIH1cbiAgfSxcbiAgZmlsZXM6IFtcbiAgICBcImRpc3RcIlxuICBdLFxuICBwdWJsaXNoQ29uZmlnOiB7XG4gICAgYWNjZXNzOiBcInB1YmxpY1wiXG4gIH0sXG4gIHR5cGVzVmVyc2lvbnM6IHtcbiAgICBcIipcIjoge1xuICAgICAgY2xpZW50OiBbXG4gICAgICAgIFwiZGlzdC9jbGllbnQuZC50c1wiXG4gICAgICBdLFxuICAgICAgc2VydmVyOiBbXG4gICAgICAgIFwiZGlzdC9zZXJ2ZXIuZC50c1wiXG4gICAgICBdLFxuICAgICAgbmV4dDogW1xuICAgICAgICBcImRpc3QvbmV4dC5kLnRzXCJcbiAgICAgIF0sXG4gICAgICBcIm5leHQtbGVnYWN5XCI6IFtcbiAgICAgICAgXCJkaXN0L25leHQtbGVnYWN5LmQudHNcIlxuICAgICAgXSxcbiAgICAgIHR3OiBbXG4gICAgICAgIFwiZGlzdC90dy5kLnRzXCJcbiAgICAgIF0sXG4gICAgICBleHByZXNzOiBbXG4gICAgICAgIFwiZGlzdC9leHByZXNzLmQudHNcIlxuICAgICAgXSxcbiAgICAgIGZhc3RpZnk6IFtcbiAgICAgICAgXCJkaXN0L2Zhc3RpZnkuZC50c1wiXG4gICAgICBdLFxuICAgICAgaDM6IFtcbiAgICAgICAgXCJkaXN0L2gzLmQudHNcIlxuICAgICAgXVxuICAgIH1cbiAgfSxcbiAgc2NyaXB0czoge1xuICAgIGxpbnQ6ICdlc2xpbnQgXCIqKi8qLnt0cyx0c3h9XCIgLS1tYXgtd2FybmluZ3MgMCcsXG4gICAgYnVpbGQ6IFwidHN1cFwiLFxuICAgIGNsZWFuOiBcImdpdCBjbGVhbiAteGRmIGRpc3Qgbm9kZV9tb2R1bGVzXCIsXG4gICAgZGV2OiBcInRzdXAgLS13YXRjaFwiLFxuICAgIHRlc3Q6IFwidml0ZXN0IHJ1blwiLFxuICAgIFwidGVzdDp3YXRjaFwiOiBcInZpdGVzdFwiLFxuICAgIHR5cGVjaGVjazogXCJ0c2MgLS1ub0VtaXRcIlxuICB9LFxuICBkZXBlbmRlbmNpZXM6IHtcbiAgICBcIkB1cGxvYWR0aGluZy9taW1lLXR5cGVzXCI6IFwiXjAuMi4yXCIsXG4gICAgXCJAdXBsb2FkdGhpbmcvc2hhcmVkXCI6IFwiXjYuMi4xXCIsXG4gICAgY29uc29sYTogXCJeMy4yLjNcIixcbiAgICBcInN0ZC1lbnZcIjogXCJeMy43LjBcIlxuICB9LFxuICBkZXZEZXBlbmRlbmNpZXM6IHtcbiAgICBcIkB0eXBlcy9leHByZXNzXCI6IFwiXjQuMTcuMTdcIixcbiAgICBcIkB0eXBlcy9yZWFjdFwiOiBcIjE4LjIuMzNcIixcbiAgICBcIkB1cGxvYWR0aGluZy9lc2xpbnQtY29uZmlnXCI6IFwiMC4yLjBcIixcbiAgICBcIkB1cGxvYWR0aGluZy90c2NvbmZpZ1wiOiBcIjAuMS4wXCIsXG4gICAgXCJAdXBsb2FkdGhpbmcvdHN1cC1jb25maWdcIjogXCIwLjEuMFwiLFxuICAgIGVzbGludDogXCJeOC41Ni4wXCIsXG4gICAgZXhwcmVzczogXCJeNC4xOC4yXCIsXG4gICAgZmFzdGlmeTogXCJeNC4yMy4yXCIsXG4gICAgaDM6IFwiXjEuOC4xXCIsXG4gICAgbmV4dDogXCIxNC4wLjFcIixcbiAgICBcInNvbGlkLWpzXCI6IFwiXjEuNy4xMVwiLFxuICAgIHRhaWx3aW5kY3NzOiBcIl4zLjQuMVwiLFxuICAgIHRzdXA6IFwiNi43LjBcIixcbiAgICBcInR5cGUtZmVzdFwiOiBcIl4zLjExLjFcIixcbiAgICB0eXBlc2NyaXB0OiBcIl41LjMuM1wiLFxuICAgIHVuZGljaTogXCJeNi41LjBcIixcbiAgICB2aXRlc3Q6IFwiXjEuMi4yXCIsXG4gICAgem9kOiBcIl4zLjIyLjRcIlxuICB9LFxuICBlc2xpbnRDb25maWc6IHtcbiAgICByb290OiB0cnVlLFxuICAgIGV4dGVuZHM6IFtcbiAgICAgIFwiQHVwbG9hZHRoaW5nL2VzbGludC1jb25maWcvYmFzZVwiXG4gICAgXSxcbiAgICBydWxlczoge1xuICAgICAgXCJuby1jb25zb2xlXCI6IFwiZXJyb3JcIixcbiAgICAgIFwibm8tcmVzdHJpY3RlZC1nbG9iYWxzXCI6IFtcbiAgICAgICAgXCJlcnJvclwiLFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogXCJmZXRjaFwiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiZmV0Y2ggc2hvdWxkIGJlIHBhc3NlZCBhcyBwYXJhbWV0ZXIgdG8gc3VwcG9ydCBvdmVycmlkaW5nIGRlZmF1bHQgYmVoYXZpb3JzXCJcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6IFwicHJvY2Vzc1wiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiVXNlIGBpbXBvcnQgeyBwcm9jZXNzIH0gZnJvbSAnc3RkLWVudmAgaW5zdGVhZFwiXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9jb25zdGFudHMudHNcbmlmICghcGFja2FnZV9kZWZhdWx0LnZlcnNpb24pXG4gIHRocm93IG5ldyBFcnJvcihcIm5vIHZlcnNpb24gZm91bmQgaW4gcGFja2FnZS5qc29uXCIpO1xudmFyIFVQTE9BRFRISU5HX1ZFUlNJT04gPSBwYWNrYWdlX2RlZmF1bHQudmVyc2lvbjtcblxuLy8gc3JjL2ludGVybmFsL2Vycm9yLWZvcm1hdHRlci50c1xuZnVuY3Rpb24gZGVmYXVsdEVycm9yRm9ybWF0dGVyKGVycm9yKSB7XG4gIHJldHVybiB7XG4gICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxuICB9O1xufVxuZnVuY3Rpb24gZm9ybWF0RXJyb3IoZXJyb3IsIHJvdXRlcikge1xuICB2YXIgX2E7XG4gIGNvbnN0IGVycm9yRm9ybWF0dGVyID0gKChfYSA9IHJvdXRlcltPYmplY3Qua2V5cyhyb3V0ZXIpWzBdXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLl9kZWYuZXJyb3JGb3JtYXR0ZXIpID8/IGRlZmF1bHRFcnJvckZvcm1hdHRlcjtcbiAgcmV0dXJuIGVycm9yRm9ybWF0dGVyKGVycm9yKTtcbn1cblxuLy8gc3JjL2ludGVybmFsL2xvZ2dlci50c1xuaW1wb3J0IHsgY3JlYXRlQ29uc29sYSwgTG9nTGV2ZWxzIH0gZnJvbSBcImNvbnNvbGEvY29yZVwiO1xuaW1wb3J0IHsgcHJvY2VzcyB9IGZyb20gXCJzdGQtZW52XCI7XG5pbXBvcnQgeyBpc09iamVjdCB9IGZyb20gXCJAdXBsb2FkdGhpbmcvc2hhcmVkXCI7XG52YXIgY29sb3JpemUgPSAoc3RyLCBsZXZlbCkgPT4ge1xuICBzd2l0Y2ggKGxldmVsKSB7XG4gICAgY2FzZSBcImVycm9yXCI6XG4gICAgY2FzZSBcImZhdGFsXCI6XG4gICAgICByZXR1cm4gYFxceDFCWzQxbVxceDFCWzMwbSR7c3RyfVxceDFCWzBtYDtcbiAgICBjYXNlIFwid2FyblwiOlxuICAgICAgcmV0dXJuIGBcXHgxQls0M21cXHgxQlszMG0ke3N0cn1cXHgxQlswbWA7XG4gICAgY2FzZSBcImluZm9cIjpcbiAgICBjYXNlIFwibG9nXCI6XG4gICAgICByZXR1cm4gYFxceDFCWzQ0bVxceDFCWzMwbSR7c3RyfVxceDFCWzBtYDtcbiAgICBjYXNlIFwiZGVidWdcIjpcbiAgICAgIHJldHVybiBgXFx4MUJbNDdtXFx4MUJbMzBtJHtzdHJ9XFx4MUJbMG1gO1xuICAgIGNhc2UgXCJ0cmFjZVwiOlxuICAgICAgcmV0dXJuIGBcXHgxQls0N21cXHgxQlszMG0ke3N0cn1cXHgxQlswbWA7XG4gICAgY2FzZSBcInN1Y2Nlc3NcIjpcbiAgICAgIHJldHVybiBgXFx4MUJbNDJtXFx4MUJbMzBtJHtzdHJ9XFx4MUJbMG1gO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gc3RyO1xuICB9XG59O1xudmFyIGljb25zID0ge1xuICBmYXRhbDogXCJcXHUyQTJGXCIsXG4gIGVycm9yOiBcIlxcdTJBMkZcIixcbiAgd2FybjogXCJcXHUyNkEwXFx1RkUwRlwiLFxuICBpbmZvOiBcIlxcdTIxMzlcIixcbiAgbG9nOiBcIlxcdTIxMzlcIixcbiAgZGVidWc6IFwiXFx1MjY5OVwiLFxuICB0cmFjZTogXCJcXHUyMTkyXCIsXG4gIHN1Y2Nlc3M6IFwiXFx1MjcxM1wiXG59O1xuZnVuY3Rpb24gZm9ybWF0U3RhY2soc3RhY2spIHtcbiAgY29uc3QgY3dkID0gXCJjd2RcIiBpbiBwcm9jZXNzICYmIHR5cGVvZiBwcm9jZXNzLmN3ZCA9PT0gXCJmdW5jdGlvblwiID8gcHJvY2Vzcy5jd2QoKSA6IFwiX19Vbmtub3duQ1dEX19cIjtcbiAgcmV0dXJuIFwiICBcIiArIHN0YWNrLnNwbGl0KFwiXFxuXCIpLnNwbGljZSgxKS5tYXAoXG4gICAgKGwpID0+IGwudHJpbSgpLnJlcGxhY2UoXCJmaWxlOi8vXCIsIFwiXCIpLnJlcGxhY2UoY3dkICsgXCIvXCIsIFwiXCIpXG4gICkuam9pbihcIlxcbiAgXCIpO1xufVxuZnVuY3Rpb24gZm9ybWF0QXJncyhhcmdzKSB7XG4gIGNvbnN0IGZtdEFyZ3MgPSBhcmdzLm1hcCgoYXJnKSA9PiB7XG4gICAgaWYgKGlzT2JqZWN0KGFyZykgJiYgdHlwZW9mIGFyZy5zdGFjayA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgcmV0dXJuIGFyZy5tZXNzYWdlICsgXCJcXG5cIiArIGZvcm1hdFN0YWNrKGFyZy5zdGFjayk7XG4gICAgfVxuICAgIHJldHVybiBhcmc7XG4gIH0pO1xuICByZXR1cm4gZm10QXJncy5tYXAoKGFyZykgPT4ge1xuICAgIGlmICh0eXBlb2YgYXJnID09PSBcInN0cmluZ1wiKSB7XG4gICAgICByZXR1cm4gYXJnO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgY29uc3QgdXRpbCA9IF9fcmVxdWlyZShcInV0aWxcIik7XG4gICAgICByZXR1cm4gdXRpbC5pbnNwZWN0KGFyZywgeyBkZXB0aDogNCB9KTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShhcmcsIG51bGwsIDQpO1xuICAgIH1cbiAgfSk7XG59XG52YXIgbG9nZ2VyID0gY3JlYXRlQ29uc29sYSh7XG4gIHJlcG9ydGVyczogW1xuICAgIHtcbiAgICAgIGxvZzogKGxvZ09iaikgPT4ge1xuICAgICAgICBjb25zdCB7IHR5cGUsIHRhZywgZGF0ZSwgYXJncyB9ID0gbG9nT2JqO1xuICAgICAgICBjb25zdCBpY29uID0gaWNvbnNbdHlwZV07XG4gICAgICAgIGNvbnN0IGxvZ1ByZWZpeCA9IGNvbG9yaXplKFxuICAgICAgICAgIGAgJHtpY29ufSAke3RhZ30gJHtkYXRlLnRvTG9jYWxlVGltZVN0cmluZygpfSBgLFxuICAgICAgICAgIHR5cGVcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgbGluZXMgPSBmb3JtYXRBcmdzKGFyZ3MpLmpvaW4oXCIgXCIpLnNwbGl0KFwiXFxuXCIpLm1hcCgobCkgPT4gbG9nUHJlZml4ICsgXCIgXCIgKyBsKS5qb2luKFwiXFxuXCIpO1xuICAgICAgICBjb25zb2xlLmxvZyhsaW5lcyk7XG4gICAgICB9XG4gICAgfVxuICBdLFxuICBkZWZhdWx0czoge1xuICAgIHRhZzogXCJVUExPQURUSElOR1wiXG4gIH1cbn0pO1xudmFyIGluaXRMb2dnZXIgPSAobGV2ZWwpID0+IHtcbiAgbG9nZ2VyLmxldmVsID0gTG9nTGV2ZWxzW2xldmVsID8/IFwiaW5mb1wiXTtcbn07XG5cbi8vIHNyYy9pbnRlcm5hbC90eXBlcy50c1xudmFyIHVuc2V0TWFya2VyID0gXCJ1bnNldE1hcmtlclwiO1xudmFyIFZBTElEX0FDVElPTl9UWVBFUyA9IFtcbiAgXCJ1cGxvYWRcIixcbiAgXCJmYWlsdXJlXCIsXG4gIFwibXVsdGlwYXJ0LWNvbXBsZXRlXCJcbl07XG5cbi8vIHNyYy9pbnRlcm5hbC9oYW5kbGVyLnRzXG5pbXBvcnQgeyBpc0RldmVsb3BtZW50LCBwcm9jZXNzIGFzIHByb2Nlc3MyIH0gZnJvbSBcInN0ZC1lbnZcIjtcbmltcG9ydCB7XG4gIGdlbmVyYXRlVXBsb2FkVGhpbmdVUkwgYXMgZ2VuZXJhdGVVcGxvYWRUaGluZ1VSTDIsXG4gIGdldFR5cGVGcm9tRmlsZU5hbWUsXG4gIGlzT2JqZWN0IGFzIGlzT2JqZWN0MixcbiAgb2JqZWN0S2V5cyxcbiAgZmlsbElucHV0Um91dGVDb25maWcgYXMgcGFyc2VBbmRFeHBhbmRJbnB1dENvbmZpZyxcbiAgc2FmZVBhcnNlSlNPTixcbiAgVXBsb2FkVGhpbmdFcnJvciBhcyBVcGxvYWRUaGluZ0Vycm9yMlxufSBmcm9tIFwiQHVwbG9hZHRoaW5nL3NoYXJlZFwiO1xuXG4vLyBzcmMvaW50ZXJuYWwvZGV2LWhvb2sudHNcbmltcG9ydCB7XG4gIGdlbmVyYXRlVXBsb2FkVGhpbmdVUkwsXG4gIHBvbGxGb3JGaWxlRGF0YSxcbiAgVXBsb2FkVGhpbmdFcnJvclxufSBmcm9tIFwiQHVwbG9hZHRoaW5nL3NoYXJlZFwiO1xudmFyIGlzVmFsaWRSZXNwb25zZSA9IChyZXNwb25zZSkgPT4ge1xuICBpZiAoIXJlc3BvbnNlLm9rKVxuICAgIHJldHVybiBmYWxzZTtcbiAgaWYgKHJlc3BvbnNlLnN0YXR1cyA+PSA0MDApXG4gICAgcmV0dXJuIGZhbHNlO1xuICBpZiAoIXJlc3BvbnNlLmhlYWRlcnMuaGFzKFwieC11cGxvYWR0aGluZy12ZXJzaW9uXCIpKVxuICAgIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIHRydWU7XG59O1xudmFyIGNvbmRpdGlvbmFsRGV2U2VydmVyID0gYXN5bmMgKG9wdHMpID0+IHtcbiAgY29uc3QgZmlsZURhdGEgPSBhd2FpdCBwb2xsRm9yRmlsZURhdGEoXG4gICAge1xuICAgICAgdXJsOiBnZW5lcmF0ZVVwbG9hZFRoaW5nVVJMKGAvYXBpL3BvbGxVcGxvYWQvJHtvcHRzLmZpbGVLZXl9YCksXG4gICAgICBhcGlLZXk6IG9wdHMuYXBpS2V5LFxuICAgICAgc2RrVmVyc2lvbjogVVBMT0FEVEhJTkdfVkVSU0lPTixcbiAgICAgIGZldGNoOiBvcHRzLmZldGNoXG4gICAgfSxcbiAgICBhc3luYyAoanNvbikgPT4ge1xuICAgICAgY29uc3QgZmlsZSA9IGpzb24uZmlsZURhdGE7XG4gICAgICBsZXQgY2FsbGJhY2tVcmwgPSBmaWxlLmNhbGxiYWNrVXJsICsgYD9zbHVnPSR7ZmlsZS5jYWxsYmFja1NsdWd9YDtcbiAgICAgIGlmICghY2FsbGJhY2tVcmwuc3RhcnRzV2l0aChcImh0dHBcIikpXG4gICAgICAgIGNhbGxiYWNrVXJsID0gXCJodHRwOi8vXCIgKyBjYWxsYmFja1VybDtcbiAgICAgIGxvZ2dlci5pbmZvKFwiU0lNVUxBVElORyBGSUxFIFVQTE9BRCBXRUJIT09LIENBTExCQUNLXCIsIGNhbGxiYWNrVXJsKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgb3B0cy5mZXRjaChjYWxsYmFja1VybCwge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgc3RhdHVzOiBcInVwbG9hZGVkXCIsXG4gICAgICAgICAgbWV0YWRhdGE6IEpTT04ucGFyc2UoZmlsZS5tZXRhZGF0YSA/PyBcInt9XCIpLFxuICAgICAgICAgIGZpbGU6IHtcbiAgICAgICAgICAgIHVybDogYGh0dHBzOi8vdXRmcy5pby9mLyR7ZW5jb2RlVVJJQ29tcG9uZW50KG9wdHMuZmlsZUtleSl9YCxcbiAgICAgICAgICAgIGtleTogb3B0cy5maWxlS2V5LFxuICAgICAgICAgICAgbmFtZTogZmlsZS5maWxlTmFtZSxcbiAgICAgICAgICAgIHNpemU6IGZpbGUuZmlsZVNpemVcbiAgICAgICAgICB9XG4gICAgICAgIH0pLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJ1cGxvYWR0aGluZy1ob29rXCI6IFwiY2FsbGJhY2tcIlxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmIChpc1ZhbGlkUmVzcG9uc2UocmVzcG9uc2UpKSB7XG4gICAgICAgIGxvZ2dlci5zdWNjZXNzKFxuICAgICAgICAgIFwiU3VjY2Vzc2Z1bGx5IHNpbXVsYXRlZCBjYWxsYmFjayBmb3IgZmlsZVwiLFxuICAgICAgICAgIG9wdHMuZmlsZUtleVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFxuICAgICAgICAgIFwiRmFpbGVkIHRvIHNpbXVsYXRlIGNhbGxiYWNrIGZvciBmaWxlLiBJcyB5b3VyIHdlYmhvb2sgY29uZmlndXJlZCBjb3JyZWN0bHk/XCIsXG4gICAgICAgICAgb3B0cy5maWxlS2V5XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmlsZTtcbiAgICB9XG4gICk7XG4gIGlmIChmaWxlRGF0YSAhPT0gdm9pZCAwKVxuICAgIHJldHVybiBmaWxlRGF0YTtcbiAgbG9nZ2VyLmVycm9yKGBGYWlsZWQgdG8gc2ltdWxhdGUgY2FsbGJhY2sgZm9yIGZpbGUgJHtvcHRzLmZpbGVLZXl9YCk7XG4gIHRocm93IG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICBjb2RlOiBcIlVQTE9BRF9GQUlMRURcIixcbiAgICBtZXNzYWdlOiBcIkZpbGUgdG9vayB0b28gbG9uZyB0byB1cGxvYWRcIlxuICB9KTtcbn07XG5cbi8vIHNyYy9pbnRlcm5hbC9wYXJzZXIudHNcbmZ1bmN0aW9uIGdldFBhcnNlRm4ocGFyc2VyKSB7XG4gIGlmICh0eXBlb2YgcGFyc2VyLnBhcnNlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICByZXR1cm4gcGFyc2VyLnBhcnNlO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcGFyc2VyXCIpO1xufVxuXG4vLyBzcmMvaW50ZXJuYWwvaGFuZGxlci50c1xudmFyIGNyZWF0ZVVURmV0Y2ggPSAoYXBpS2V5LCBmZXRjaCwgZmVQYWNrYWdlLCBiZUFkYXB0ZXIpID0+IHtcbiAgcmV0dXJuIGFzeW5jIChlbmRwb2ludCwgcGF5bG9hZCkgPT4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goZ2VuZXJhdGVVcGxvYWRUaGluZ1VSTDIoZW5kcG9pbnQpLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZCksXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICBcIngtdXBsb2FkdGhpbmctYXBpLWtleVwiOiBhcGlLZXksXG4gICAgICAgIFwieC11cGxvYWR0aGluZy12ZXJzaW9uXCI6IFVQTE9BRFRISU5HX1ZFUlNJT04sXG4gICAgICAgIFwieC11cGxvYWR0aGluZy1mZS1wYWNrYWdlXCI6IGZlUGFja2FnZSxcbiAgICAgICAgXCJ4LXVwbG9hZHRoaW5nLWJlLWFkYXB0ZXJcIjogYmVBZGFwdGVyXG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9O1xufTtcbnZhciBmaWxlQ291bnRMaW1pdEhpdCA9IChmaWxlcywgcm91dGVDb25maWcpID0+IHtcbiAgdmFyIF9hO1xuICBjb25zdCBjb3VudHMgPSB7fTtcbiAgZmlsZXMuZm9yRWFjaCgoZmlsZSkgPT4ge1xuICAgIGNvbnN0IHR5cGUgPSBnZXRUeXBlRnJvbUZpbGVOYW1lKGZpbGUubmFtZSwgb2JqZWN0S2V5cyhyb3V0ZUNvbmZpZykpO1xuICAgIGlmICghY291bnRzW3R5cGVdKSB7XG4gICAgICBjb3VudHNbdHlwZV0gPSAxO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb3VudHNbdHlwZV0gKz0gMTtcbiAgICB9XG4gIH0pO1xuICBmb3IgKGNvbnN0IF9rZXkgaW4gY291bnRzKSB7XG4gICAgY29uc3Qga2V5ID0gX2tleTtcbiAgICBjb25zdCBjb3VudCA9IGNvdW50c1trZXldO1xuICAgIGNvbnN0IGxpbWl0ID0gKF9hID0gcm91dGVDb25maWdba2V5XSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLm1heEZpbGVDb3VudDtcbiAgICBpZiAoIWxpbWl0KSB7XG4gICAgICBsb2dnZXIuZXJyb3Iocm91dGVDb25maWcsIGtleSk7XG4gICAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcjIoe1xuICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiSW52YWxpZCBjb25maWcgZHVyaW5nIGZpbGUgY291bnRcIixcbiAgICAgICAgY2F1c2U6IGBFeHBlY3RlZCByb3V0ZSBjb25maWcgdG8gaGF2ZSBhIG1heEZpbGVDb3VudCBmb3Iga2V5ICR7a2V5fSBidXQgbm9uZSB3YXMgZm91bmQuYFxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChjb3VudCA+IGxpbWl0KSB7XG4gICAgICByZXR1cm4geyBsaW1pdEhpdDogdHJ1ZSwgdHlwZToga2V5LCBsaW1pdCwgY291bnQgfTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHsgbGltaXRIaXQ6IGZhbHNlIH07XG59O1xudmFyIGJ1aWxkUmVxdWVzdEhhbmRsZXIgPSAob3B0cywgYWRhcHRlcikgPT4ge1xuICByZXR1cm4gYXN5bmMgKGlucHV0KSA9PiB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICBjb25zdCBpc0RldiA9ICgoX2EgPSBvcHRzLmNvbmZpZykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmlzRGV2KSA/PyBpc0RldmVsb3BtZW50O1xuICAgIGNvbnN0IGZldGNoID0gKChfYiA9IG9wdHMuY29uZmlnKSA9PSBudWxsID8gdm9pZCAwIDogX2IuZmV0Y2gpID8/IGdsb2JhbFRoaXMuZmV0Y2g7XG4gICAgaWYgKGlzRGV2KSB7XG4gICAgICBsb2dnZXIuaW5mbyhcIlVwbG9hZFRoaW5nIGRldiBzZXJ2ZXIgaXMgbm93IHJ1bm5pbmchXCIpO1xuICAgIH1cbiAgICBjb25zdCB7IHJvdXRlciwgY29uZmlnIH0gPSBvcHRzO1xuICAgIGNvbnN0IHByZWZlcnJlZE9yRW52U2VjcmV0ID0gKGNvbmZpZyA9PSBudWxsID8gdm9pZCAwIDogY29uZmlnLnVwbG9hZHRoaW5nU2VjcmV0KSA/PyBwcm9jZXNzMi5lbnYuVVBMT0FEVEhJTkdfU0VDUkVUO1xuICAgIGNvbnN0IHJlcSA9IGlucHV0Lm5hdGl2ZVJlcXVlc3Q7XG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChyZXEudXJsKTtcbiAgICBjb25zdCBwYXJhbXMgPSB1cmwuc2VhcmNoUGFyYW1zO1xuICAgIGNvbnN0IHVwbG9hZHRoaW5nSG9vayA9IHJlcS5oZWFkZXJzLmdldChcInVwbG9hZHRoaW5nLWhvb2tcIikgPz8gdm9pZCAwO1xuICAgIGNvbnN0IHNsdWcgPSBwYXJhbXMuZ2V0KFwic2x1Z1wiKSA/PyB2b2lkIDA7XG4gICAgY29uc3QgYWN0aW9uVHlwZSA9IHBhcmFtcy5nZXQoXCJhY3Rpb25UeXBlXCIpID8/IHZvaWQgMDtcbiAgICBjb25zdCB1dEZyb250ZW5kUGFja2FnZSA9IHJlcS5oZWFkZXJzLmdldChcIngtdXBsb2FkdGhpbmctcGFja2FnZVwiKSA/PyBcInVua25vd25cIjtcbiAgICBpZiAoIXNsdWcpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIk5vIHNsdWcgcHJvdmlkZWQgaW4gcGFyYW1zOlwiLCBwYXJhbXMpO1xuICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgbWVzc2FnZTogXCJObyBzbHVnIHByb3ZpZGVkIGluIHBhcmFtc1wiXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHNsdWcgJiYgdHlwZW9mIHNsdWcgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGNvbnN0IG1zZyA9IGBFeHBlY3RlZCBzbHVnIHRvIGJlIG9mIHR5cGUgJ3N0cmluZycsIGdvdCAnJHt0eXBlb2Ygc2x1Z30nYDtcbiAgICAgIGxvZ2dlci5lcnJvcihtc2cpO1xuICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgbWVzc2FnZTogXCJgc2x1Z2AgbXVzdCBiZSBhIHN0cmluZ1wiLFxuICAgICAgICBjYXVzZTogbXNnXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGFjdGlvblR5cGUgJiYgdHlwZW9mIGFjdGlvblR5cGUgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGNvbnN0IG1zZyA9IGBFeHBlY3RlZCBhY3Rpb25UeXBlIHRvIGJlIG9mIHR5cGUgJ3N0cmluZycsIGdvdCAnJHt0eXBlb2YgYWN0aW9uVHlwZX0nYDtcbiAgICAgIGxvZ2dlci5lcnJvcihtc2cpO1xuICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgbWVzc2FnZTogXCJgYWN0aW9uVHlwZWAgbXVzdCBiZSBhIHN0cmluZ1wiLFxuICAgICAgICBjYXVzZTogbXNnXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHVwbG9hZHRoaW5nSG9vayAmJiB0eXBlb2YgdXBsb2FkdGhpbmdIb29rICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICBjb25zdCBtc2cgPSBgRXhwZWN0ZWQgdXBsb2FkdGhpbmdIb29rIHRvIGJlIG9mIHR5cGUgJ3N0cmluZycsIGdvdCAnJHt0eXBlb2YgdXBsb2FkdGhpbmdIb29rfSdgO1xuICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgbWVzc2FnZTogXCJgdXBsb2FkdGhpbmdIb29rYCBtdXN0IGJlIGEgc3RyaW5nXCIsXG4gICAgICAgIGNhdXNlOiBtc2dcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoIXByZWZlcnJlZE9yRW52U2VjcmV0KSB7XG4gICAgICBjb25zdCBtc2cgPSBgTm8gc2VjcmV0IHByb3ZpZGVkLCBwbGVhc2Ugc2V0IFVQTE9BRFRISU5HX1NFQ1JFVCBpbiB5b3VyIGVudiBmaWxlIG9yIGluIHRoZSBjb25maWdgO1xuICAgICAgbG9nZ2VyLmVycm9yKG1zZyk7XG4gICAgICByZXR1cm4gbmV3IFVwbG9hZFRoaW5nRXJyb3IyKHtcbiAgICAgICAgY29kZTogXCJNSVNTSU5HX0VOVlwiLFxuICAgICAgICBtZXNzYWdlOiBgTm8gc2VjcmV0IHByb3ZpZGVkYCxcbiAgICAgICAgY2F1c2U6IG1zZ1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICghcHJlZmVycmVkT3JFbnZTZWNyZXQuc3RhcnRzV2l0aChcInNrX1wiKSkge1xuICAgICAgY29uc3QgbXNnID0gYEludmFsaWQgc2VjcmV0IHByb3ZpZGVkLCBVUExPQURUSElOR19TRUNSRVQgbXVzdCBzdGFydCB3aXRoICdza18nYDtcbiAgICAgIGxvZ2dlci5lcnJvcihtc2cpO1xuICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgIGNvZGU6IFwiTUlTU0lOR19FTlZcIixcbiAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIEFQSSBrZXkuIEFQSSBrZXlzIG11c3Qgc3RhcnQgd2l0aCAnc2tfJy5cIixcbiAgICAgICAgY2F1c2U6IG1zZ1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICh1dEZyb250ZW5kUGFja2FnZSAmJiB0eXBlb2YgdXRGcm9udGVuZFBhY2thZ2UgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGNvbnN0IG1zZyA9IGBFeHBlY3RlZCB4LXVwbG9hZHRoaW5nLXBhY2thZ2UgdG8gYmUgb2YgdHlwZSAnc3RyaW5nJywgZ290ICcke3R5cGVvZiB1dEZyb250ZW5kUGFja2FnZX0nYDtcbiAgICAgIGxvZ2dlci5lcnJvcihtc2cpO1xuICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgbWVzc2FnZTogXCJgeC11cGxvYWR0aGluZy1wYWNrYWdlYCBtdXN0IGJlIGEgc3RyaW5nLiBlZy4gJ0B1cGxvYWR0aGluZy9yZWFjdCdcIixcbiAgICAgICAgY2F1c2U6IG1zZ1xuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHVwbG9hZGFibGUgPSByb3V0ZXJbc2x1Z107XG4gICAgaWYgKCF1cGxvYWRhYmxlKSB7XG4gICAgICBjb25zdCBtc2cgPSBgTm8gZmlsZSByb3V0ZSBmb3VuZCBmb3Igc2x1ZyAke3NsdWd9YDtcbiAgICAgIGxvZ2dlci5lcnJvcihtc2cpO1xuICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgIGNvZGU6IFwiTk9UX0ZPVU5EXCIsXG4gICAgICAgIG1lc3NhZ2U6IG1zZ1xuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHV0RmV0Y2ggPSBjcmVhdGVVVEZldGNoKFxuICAgICAgcHJlZmVycmVkT3JFbnZTZWNyZXQsXG4gICAgICBmZXRjaCxcbiAgICAgIHV0RnJvbnRlbmRQYWNrYWdlLFxuICAgICAgYWRhcHRlclxuICAgICk7XG4gICAgbG9nZ2VyLmRlYnVnKFwiQWxsIHJlcXVlc3QgaW5wdXQgaXMgdmFsaWRcIiwge1xuICAgICAgc2x1ZyxcbiAgICAgIGFjdGlvblR5cGUsXG4gICAgICB1cGxvYWR0aGluZ0hvb2tcbiAgICB9KTtcbiAgICBpZiAodXBsb2FkdGhpbmdIb29rID09PSBcImNhbGxiYWNrXCIpIHtcbiAgICAgIGNvbnN0IG1heWJlUmVxQm9keSA9IGF3YWl0IHNhZmVQYXJzZUpTT04ocmVxKTtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhcIkhhbmRsaW5nIGNhbGxiYWNrIHJlcXVlc3Qgd2l0aCBpbnB1dDpcIiwgbWF5YmVSZXFCb2R5KTtcbiAgICAgIGlmIChtYXliZVJlcUJvZHkgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJJbnZhbGlkIHJlcXVlc3QgYm9keVwiLCBtYXliZVJlcUJvZHkpO1xuICAgICAgICByZXR1cm4gbmV3IFVwbG9hZFRoaW5nRXJyb3IyKHtcbiAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIHJlcXVlc3QgYm9keVwiLFxuICAgICAgICAgIGNhdXNlOiBtYXliZVJlcUJvZHlcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCByZXNvbHZlckFyZ3MgPSB7XG4gICAgICAgIGZpbGU6IG1heWJlUmVxQm9keS5maWxlLFxuICAgICAgICBtZXRhZGF0YTogbWF5YmVSZXFCb2R5Lm1ldGFkYXRhXG4gICAgICB9O1xuICAgICAgbG9nZ2VyLmRlYnVnKFxuICAgICAgICBcIlJ1bm5pbmcgJ29uVXBsb2FkQ29tcGxldGUnIGNhbGxiYWNrIHdpdGggaW5wdXQ6XCIsXG4gICAgICAgIHJlc29sdmVyQXJnc1xuICAgICAgKTtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHVwbG9hZGFibGUucmVzb2x2ZXIocmVzb2x2ZXJBcmdzKTtcbiAgICAgIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgICAgIGZpbGVLZXk6IG1heWJlUmVxQm9keS5maWxlLmtleSxcbiAgICAgICAgY2FsbGJhY2tEYXRhOiByZXMgPz8gbnVsbFxuICAgICAgfTtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhcbiAgICAgICAgXCInb25VcGxvYWRDb21wbGV0ZScgY2FsbGJhY2sgZmluaXNoZWQuIFNlbmRpbmcgcmVzcG9uc2UgdG8gVXBsb2FkVGhpbmc6XCIsXG4gICAgICAgIHBheWxvYWRcbiAgICAgICk7XG4gICAgICBjb25zdCBjYWxsYmFja1Jlc3BvbnNlID0gYXdhaXQgdXRGZXRjaChcIi9hcGkvc2VydmVyQ2FsbGJhY2tcIiwgcGF5bG9hZCk7XG4gICAgICBsb2dnZXIuZGVidWcoXG4gICAgICAgIFwiVXBsb2FkVGhpbmcgcmVzcG9uZGVkIHdpdGggc3RhdHVzOlwiLFxuICAgICAgICBjYWxsYmFja1Jlc3BvbnNlLnN0YXR1c1xuICAgICAgKTtcbiAgICAgIHJldHVybiB7IHN0YXR1czogMjAwIH07XG4gICAgfVxuICAgIGlmICghYWN0aW9uVHlwZSB8fCAhVkFMSURfQUNUSU9OX1RZUEVTLmluY2x1ZGVzKGFjdGlvblR5cGUpKSB7XG4gICAgICBjb25zdCBtc2cgPSBgRXhwZWN0ZWQgJHtWQUxJRF9BQ1RJT05fVFlQRVMubWFwKCh4KSA9PiBgXCIke3h9XCJgKS5qb2luKFwiLCBcIikucmVwbGFjZSgvLCg/IS4qLCkvLCBcIiBvclwiKX0gYnV0IGdvdCBcIiR7YWN0aW9uVHlwZX1cImA7XG4gICAgICBsb2dnZXIuZXJyb3IoXCJJbnZhbGlkIGFjdGlvbiB0eXBlLlwiLCBtc2cpO1xuICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgY2F1c2U6IGBJbnZhbGlkIGFjdGlvbiB0eXBlICR7YWN0aW9uVHlwZX1gLFxuICAgICAgICBtZXNzYWdlOiBtc2dcbiAgICAgIH0pO1xuICAgIH1cbiAgICBzd2l0Y2ggKGFjdGlvblR5cGUpIHtcbiAgICAgIGNhc2UgXCJ1cGxvYWRcIjoge1xuICAgICAgICBjb25zdCBtYXliZUlucHV0ID0gYXdhaXQgc2FmZVBhcnNlSlNPTihyZXEpO1xuICAgICAgICBpZiAobWF5YmVJbnB1dCBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgbG9nZ2VyLmVycm9yKFwiSW52YWxpZCByZXF1ZXN0IGJvZHlcIiwgbWF5YmVJbnB1dCk7XG4gICAgICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgcmVxdWVzdCBib2R5XCIsXG4gICAgICAgICAgICBjYXVzZTogbWF5YmVJbnB1dFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhcIkhhbmRsaW5nIHVwbG9hZCByZXF1ZXN0IHdpdGggaW5wdXQ6XCIsIG1heWJlSW5wdXQpO1xuICAgICAgICBjb25zdCB7IGZpbGVzLCBpbnB1dDogdXNlcklucHV0IH0gPSBtYXliZUlucHV0O1xuICAgICAgICBsZXQgcGFyc2VkSW5wdXQgPSB7fTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBsb2dnZXIuZGVidWcoXCJQYXJzaW5nIGlucHV0XCIpO1xuICAgICAgICAgIGNvbnN0IGlucHV0UGFyc2VyID0gdXBsb2FkYWJsZS5fZGVmLmlucHV0UGFyc2VyO1xuICAgICAgICAgIHBhcnNlZElucHV0ID0gYXdhaXQgZ2V0UGFyc2VGbihpbnB1dFBhcnNlcikodXNlcklucHV0KTtcbiAgICAgICAgICBsb2dnZXIuZGVidWcoXCJJbnB1dCBwYXJzZWQgc3VjY2Vzc2Z1bGx5XCIsIHBhcnNlZElucHV0KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJBbiBlcnJvciBvY2N1cmVkIHRyeWluZyB0byBwYXJzZSBpbnB1dFwiLCBlcnJvcik7XG4gICAgICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgaW5wdXQuXCIsXG4gICAgICAgICAgICBjYXVzZTogZXJyb3JcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbWV0YWRhdGEgPSB7fTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBsb2dnZXIuZGVidWcoXCJSdW5uaW5nIG1pZGRsZXdhcmVcIik7XG4gICAgICAgICAgbWV0YWRhdGEgPSBhd2FpdCB1cGxvYWRhYmxlLl9kZWYubWlkZGxld2FyZSh7XG4gICAgICAgICAgICByZXE6IGlucHV0Lm9yaWdpbmFsUmVxdWVzdCxcbiAgICAgICAgICAgIHJlczogaW5wdXQucmVzLFxuICAgICAgICAgICAgZXZlbnQ6IGlucHV0LmV2ZW50LFxuICAgICAgICAgICAgaW5wdXQ6IHBhcnNlZElucHV0LFxuICAgICAgICAgICAgZmlsZXNcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBsb2dnZXIuZGVidWcoXCJNaWRkbGV3YXJlIGZpbmlzaGVkIHN1Y2Nlc3NmdWxseSB3aXRoOlwiLCBtZXRhZGF0YSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgbG9nZ2VyLmVycm9yKFwiQW4gZXJyb3Igb2NjdXJlZCBpbiB5b3VyIG1pZGRsZXdhcmUgZnVuY3Rpb25cIiwgZXJyb3IpO1xuICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFVwbG9hZFRoaW5nRXJyb3IyKVxuICAgICAgICAgICAgcmV0dXJuIGVycm9yO1xuICAgICAgICAgIHJldHVybiBuZXcgVXBsb2FkVGhpbmdFcnJvcjIoe1xuICAgICAgICAgICAgY29kZTogXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHJ1biBtaWRkbGV3YXJlLlwiLFxuICAgICAgICAgICAgY2F1c2U6IGVycm9yXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGZpbGVzKSB8fCAhZmlsZXMuZXZlcnkoXG4gICAgICAgICAgKGYpID0+IGlzT2JqZWN0MihmKSAmJiB0eXBlb2YgZi5uYW1lID09PSBcInN0cmluZ1wiICYmIHR5cGVvZiBmLnNpemUgPT09IFwibnVtYmVyXCJcbiAgICAgICAgKSkge1xuICAgICAgICAgIGNvbnN0IG1zZyA9IGBFeHBlY3RlZCBmaWxlcyB0byBiZSBvZiB0eXBlICd7bmFtZTpzdHJpbmcsIHNpemU6bnVtYmVyfVtdJywgZ290ICcke0pTT04uc3RyaW5naWZ5KFxuICAgICAgICAgICAgZmlsZXNcbiAgICAgICAgICApfSdgO1xuICAgICAgICAgIGxvZ2dlci5lcnJvcihtc2cpO1xuICAgICAgICAgIHJldHVybiBuZXcgVXBsb2FkVGhpbmdFcnJvcjIoe1xuICAgICAgICAgICAgY29kZTogXCJCQURfUkVRVUVTVFwiLFxuICAgICAgICAgICAgbWVzc2FnZTogXCJGaWxlcyBtdXN0IGJlIGFuIGFycmF5IG9mIG9iamVjdHMgd2l0aCBuYW1lIGFuZCBzaXplXCIsXG4gICAgICAgICAgICBjYXVzZTogbXNnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHBhcnNlZENvbmZpZztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBsb2dnZXIuZGVidWcoXCJQYXJzaW5nIHJvdXRlIGNvbmZpZ1wiLCB1cGxvYWRhYmxlLl9kZWYucm91dGVyQ29uZmlnKTtcbiAgICAgICAgICBwYXJzZWRDb25maWcgPSBwYXJzZUFuZEV4cGFuZElucHV0Q29uZmlnKFxuICAgICAgICAgICAgdXBsb2FkYWJsZS5fZGVmLnJvdXRlckNvbmZpZ1xuICAgICAgICAgICk7XG4gICAgICAgICAgbG9nZ2VyLmRlYnVnKFwiUm91dGUgY29uZmlnIHBhcnNlZCBzdWNjZXNzZnVsbHlcIiwgcGFyc2VkQ29uZmlnKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJJbnZhbGlkIHJvdXRlIGNvbmZpZ1wiLCBlcnJvcik7XG4gICAgICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgY29uZmlnLlwiLFxuICAgICAgICAgICAgY2F1c2U6IGVycm9yXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBsb2dnZXIuZGVidWcoXCJDaGVja2luZyBmaWxlIGNvdW50IGxpbWl0XCIsIGZpbGVzKTtcbiAgICAgICAgICBjb25zdCB7IGxpbWl0SGl0LCBjb3VudCwgbGltaXQsIHR5cGUgfSA9IGZpbGVDb3VudExpbWl0SGl0KFxuICAgICAgICAgICAgZmlsZXMsXG4gICAgICAgICAgICBwYXJzZWRDb25maWdcbiAgICAgICAgICApO1xuICAgICAgICAgIGlmIChsaW1pdEhpdCkge1xuICAgICAgICAgICAgY29uc3QgbXNnID0gYFlvdSB1cGxvYWRlZCAke2NvdW50fSBmaWxlcyBvZiB0eXBlICcke3R5cGV9JywgYnV0IHRoZSBsaW1pdCBmb3IgdGhhdCB0eXBlIGlzICR7bGltaXR9YDtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihtc2cpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgICAgICAgbWVzc2FnZTogXCJGaWxlIGxpbWl0IGV4Y2VlZGVkXCIsXG4gICAgICAgICAgICAgIGNhdXNlOiBtc2dcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsb2dnZXIuZGVidWcoXCJGaWxlIGNvdW50IGxpbWl0IGNoZWNrIHBhc3NlZFwiKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJJbnZhbGlkIHJvdXRlIGNvbmZpZ1wiLCBlcnJvcik7XG4gICAgICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgY29uZmlnLlwiLFxuICAgICAgICAgICAgY2F1c2U6IGVycm9yXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2FsbGJhY2tVcmwgPSByZXNvbHZlQ2FsbGJhY2tVcmwoeyBjb25maWcsIHJlcSwgdXJsLCBpc0RldiB9KTtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKFxuICAgICAgICAgIFwiUmV0cmlldmluZyBwcmVzaWduZWQgVVJMcyBmcm9tIFVwbG9hZFRoaW5nLiBDYWxsYmFjayBVUkwgaXM6XCIsXG4gICAgICAgICAgY2FsbGJhY2tVcmwuaHJlZlxuICAgICAgICApO1xuICAgICAgICBjb25zdCB1cGxvYWR0aGluZ0FwaVJlc3BvbnNlID0gYXdhaXQgdXRGZXRjaChcIi9hcGkvcHJlcGFyZVVwbG9hZFwiLCB7XG4gICAgICAgICAgZmlsZXMsXG4gICAgICAgICAgcm91dGVDb25maWc6IHBhcnNlZENvbmZpZyxcbiAgICAgICAgICBtZXRhZGF0YSxcbiAgICAgICAgICBjYWxsYmFja1VybDogY2FsbGJhY2tVcmwub3JpZ2luICsgY2FsbGJhY2tVcmwucGF0aG5hbWUsXG4gICAgICAgICAgY2FsbGJhY2tTbHVnOiBzbHVnXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBwYXJzZWRSZXNwb25zZSA9IGF3YWl0IHNhZmVQYXJzZUpTT04oXG4gICAgICAgICAgdXBsb2FkdGhpbmdBcGlSZXNwb25zZVxuICAgICAgICApO1xuICAgICAgICBpZiAoIXVwbG9hZHRoaW5nQXBpUmVzcG9uc2Uub2sgfHwgcGFyc2VkUmVzcG9uc2UgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgIGxvZ2dlci5lcnJvcihcIlVuYWJsZSB0byBnZXQgcHJlc2lnbmVkIFVSTHNcIiwgcGFyc2VkUmVzcG9uc2UpO1xuICAgICAgICAgIHJldHVybiBuZXcgVXBsb2FkVGhpbmdFcnJvcjIoe1xuICAgICAgICAgICAgY29kZTogXCJVUkxfR0VORVJBVElPTl9GQUlMRURcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiVW5hYmxlIHRvIGdldCBwcmVzaWduZWQgdXJsc1wiLFxuICAgICAgICAgICAgY2F1c2U6IHBhcnNlZFJlc3BvbnNlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmRlYnVnKFwiVXBsb2FkVGhpbmcgcmVzcG9uZGVkIHdpdGg6XCIsIHBhcnNlZFJlc3BvbnNlKTtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKFwiU2VuZGluZyBwcmVzaWduZWQgVVJMcyB0byBjbGllbnRcIik7XG4gICAgICAgIGxldCBwcm9taXNlID0gdm9pZCAwO1xuICAgICAgICBpZiAoaXNEZXYpIHtcbiAgICAgICAgICBwcm9taXNlID0gUHJvbWlzZS5hbGwoXG4gICAgICAgICAgICBwYXJzZWRSZXNwb25zZS5tYXAoXG4gICAgICAgICAgICAgIChmaWxlKSA9PiBjb25kaXRpb25hbERldlNlcnZlcih7XG4gICAgICAgICAgICAgICAgZmlsZUtleTogZmlsZS5rZXksXG4gICAgICAgICAgICAgICAgYXBpS2V5OiBwcmVmZXJyZWRPckVudlNlY3JldCxcbiAgICAgICAgICAgICAgICBmZXRjaFxuICAgICAgICAgICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJFcnJcIiwgZXJyb3IpO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBjbGVhbnVwOiBwcm9taXNlLFxuICAgICAgICAgIGJvZHk6IHBhcnNlZFJlc3BvbnNlLm1hcCgoeCkgPT4gKHtcbiAgICAgICAgICAgIC4uLngsXG4gICAgICAgICAgICBwb2xsaW5nVXJsOiBnZW5lcmF0ZVVwbG9hZFRoaW5nVVJMMihgL2FwaS9zZXJ2ZXJDYWxsYmFja2ApXG4gICAgICAgICAgfSkpLFxuICAgICAgICAgIHN0YXR1czogMjAwXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBjYXNlIFwibXVsdGlwYXJ0LWNvbXBsZXRlXCI6IHtcbiAgICAgICAgY29uc3QgbWF5YmVSZXFCb2R5ID0gYXdhaXQgc2FmZVBhcnNlSlNPTihyZXEpO1xuICAgICAgICBpZiAobWF5YmVSZXFCb2R5IGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJJbnZhbGlkIHJlcXVlc3QgYm9keVwiLCBtYXliZVJlcUJvZHkpO1xuICAgICAgICAgIHJldHVybiBuZXcgVXBsb2FkVGhpbmdFcnJvcjIoe1xuICAgICAgICAgICAgY29kZTogXCJCQURfUkVRVUVTVFwiLFxuICAgICAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIHJlcXVlc3QgYm9keVwiLFxuICAgICAgICAgICAgY2F1c2U6IG1heWJlUmVxQm9keVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhcbiAgICAgICAgICBcIkhhbmRsaW5nIG11bHRpcGFydC1jb21wbGV0ZSByZXF1ZXN0IHdpdGggaW5wdXQ6XCIsXG4gICAgICAgICAgbWF5YmVSZXFCb2R5XG4gICAgICAgICk7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhcIk5vdGlmeWluZyBVcGxvYWRUaGluZyB0aGF0IG11bHRpcGFydCB1cGxvYWQgaXMgY29tcGxldGVcIik7XG4gICAgICAgIGNvbnN0IGNvbXBsZXRlUmVzID0gYXdhaXQgdXRGZXRjaChcIi9hcGkvY29tcGxldGVNdWx0aXBhcnRcIiwge1xuICAgICAgICAgIGZpbGVLZXk6IG1heWJlUmVxQm9keS5maWxlS2V5LFxuICAgICAgICAgIHVwbG9hZElkOiBtYXliZVJlcUJvZHkudXBsb2FkSWQsXG4gICAgICAgICAgZXRhZ3M6IG1heWJlUmVxQm9keS5ldGFnc1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFjb21wbGV0ZVJlcy5vaykge1xuICAgICAgICAgIGxvZ2dlci5lcnJvcihcbiAgICAgICAgICAgIFwiRmFpbGVkIHRvIG5vdGlmeSBVcGxvYWRUaGluZyB0aGF0IG11bHRpcGFydCB1cGxvYWQgaXMgY29tcGxldGVcIlxuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgICAgICBjb2RlOiBcIlVQTE9BRF9GQUlMRURcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGNvbXBsZXRlIG11bHRpcGFydCB1cGxvYWRcIixcbiAgICAgICAgICAgIGNhdXNlOiBjb21wbGV0ZVJlc1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhcIlVwbG9hZFRoaW5nIHJlc3BvbmRlZCB3aXRoOlwiLCBjb21wbGV0ZVJlcy5zdGF0dXMpO1xuICAgICAgICByZXR1cm4geyBzdGF0dXM6IDIwMCB9O1xuICAgICAgfVxuICAgICAgY2FzZSBcImZhaWx1cmVcIjoge1xuICAgICAgICBjb25zdCBtYXliZVJlcUJvZHkgPSBhd2FpdCBzYWZlUGFyc2VKU09OKHJlcSk7XG4gICAgICAgIGlmIChtYXliZVJlcUJvZHkgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkludmFsaWQgcmVxdWVzdCBib2R5XCIsIG1heWJlUmVxQm9keSk7XG4gICAgICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgcmVxdWVzdCBib2R5XCIsXG4gICAgICAgICAgICBjYXVzZTogbWF5YmVSZXFCb2R5XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBmaWxlS2V5LCB1cGxvYWRJZCB9ID0gbWF5YmVSZXFCb2R5O1xuICAgICAgICBsb2dnZXIuZGVidWcoXCJIYW5kbGluZyBmYWlsdXJlIHJlcXVlc3Qgd2l0aCBpbnB1dDpcIiwgbWF5YmVSZXFCb2R5KTtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKFwiTm90aWZ5aW5nIFVwbG9hZFRoaW5nIHRoYXQgdXBsb2FkIGZhaWxlZFwiKTtcbiAgICAgICAgY29uc3QgdXBsb2FkdGhpbmdBcGlSZXNwb25zZSA9IGF3YWl0IHV0RmV0Y2goXCIvYXBpL2ZhaWx1cmVDYWxsYmFja1wiLCB7XG4gICAgICAgICAgZmlsZUtleSxcbiAgICAgICAgICB1cGxvYWRJZFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCF1cGxvYWR0aGluZ0FwaVJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgY29uc3QgcGFyc2VkUmVzcG9uc2UgPSBhd2FpdCBzYWZlUGFyc2VKU09OKFxuICAgICAgICAgICAgdXBsb2FkdGhpbmdBcGlSZXNwb25zZVxuICAgICAgICAgICk7XG4gICAgICAgICAgbG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIG1hcmsgdXBsb2FkIGFzIGZhaWxlZFwiLCBwYXJzZWRSZXNwb25zZSk7XG4gICAgICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgICAgICBjb2RlOiBcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLFxuICAgICAgICAgICAgbWVzc2FnZTogXCJVbmFibGUgdG8gbWFyayB1cGxvYWQgYXMgZmFpbGVkXCIsXG4gICAgICAgICAgICBjYXVzZTogcGFyc2VkUmVzcG9uc2VcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIuZGVidWcoXCJVcGxvYWRUaGluZyByZXNwb25kZWQgd2l0aDpcIiwgdXBsb2FkdGhpbmdBcGlSZXNwb25zZSk7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhcIlJ1bm5pbmcgJ29uVXBsb2FkRXJyb3InIGNhbGxiYWNrXCIpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHVwbG9hZGFibGUuX2RlZi5vblVwbG9hZEVycm9yKHtcbiAgICAgICAgICAgIGVycm9yOiBuZXcgVXBsb2FkVGhpbmdFcnJvcjIoe1xuICAgICAgICAgICAgICBjb2RlOiBcIlVQTE9BRF9GQUlMRURcIixcbiAgICAgICAgICAgICAgbWVzc2FnZTogYFVwbG9hZCBmYWlsZWQgZm9yICR7ZmlsZUtleX1gXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGZpbGVLZXlcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBsb2dnZXIuZXJyb3IoXG4gICAgICAgICAgICBcIkZhaWxlZCB0byBydW4gb25VcGxvYWRFcnJvciBjYWxsYmFjay4gWW91IHByb2JhYmx5IHNob3VsZG4ndCBiZSB0aHJvd2luZyBlcnJvcnMgaW4geW91ciBjYWxsYmFjay5cIixcbiAgICAgICAgICAgIGVycm9yXG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXR1cm4gbmV3IFVwbG9hZFRoaW5nRXJyb3IyKHtcbiAgICAgICAgICAgIGNvZGU6IFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBydW4gb25VcGxvYWRFcnJvciBjYWxsYmFja1wiLFxuICAgICAgICAgICAgY2F1c2U6IGVycm9yXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiAyMDAgfTtcbiAgICAgIH1cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgICAgY29kZTogXCJCQURfUkVRVUVTVFwiLFxuICAgICAgICAgIG1lc3NhZ2U6IGBJbnZhbGlkIGFjdGlvbiB0eXBlYFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59O1xuZnVuY3Rpb24gcmVzb2x2ZUNhbGxiYWNrVXJsKG9wdHMpIHtcbiAgdmFyIF9hO1xuICBsZXQgY2FsbGJhY2tVcmwgPSBvcHRzLnVybDtcbiAgaWYgKChfYSA9IG9wdHMuY29uZmlnKSA9PSBudWxsID8gdm9pZCAwIDogX2EuY2FsbGJhY2tVcmwpIHtcbiAgICBjYWxsYmFja1VybCA9IGdldEZ1bGxBcGlVcmwob3B0cy5jb25maWcuY2FsbGJhY2tVcmwpO1xuICB9IGVsc2UgaWYgKHByb2Nlc3MyLmVudi5VUExPQURUSElOR19VUkwpIHtcbiAgICBjYWxsYmFja1VybCA9IGdldEZ1bGxBcGlVcmwocHJvY2VzczIuZW52LlVQTE9BRFRISU5HX1VSTCk7XG4gIH1cbiAgaWYgKG9wdHMuaXNEZXYgfHwgIWNhbGxiYWNrVXJsLmhvc3QuaW5jbHVkZXMoXCJsb2NhbGhvc3RcIikpIHtcbiAgICByZXR1cm4gY2FsbGJhY2tVcmw7XG4gIH1cbiAgY29uc3QgaGVhZGVycyA9IG9wdHMucmVxLmhlYWRlcnM7XG4gIGxldCBwYXJzZWRGcm9tSGVhZGVycyA9IGhlYWRlcnMuZ2V0KFwib3JpZ2luXCIpID8/IGhlYWRlcnMuZ2V0KFwicmVmZXJlclwiKSA/PyBoZWFkZXJzLmdldChcImhvc3RcIikgPz8gaGVhZGVycy5nZXQoXCJ4LWZvcndhcmRlZC1ob3N0XCIpO1xuICBpZiAocGFyc2VkRnJvbUhlYWRlcnMgJiYgIXBhcnNlZEZyb21IZWFkZXJzLmluY2x1ZGVzKFwiaHR0cFwiKSkge1xuICAgIHBhcnNlZEZyb21IZWFkZXJzID0gKGhlYWRlcnMuZ2V0KFwieC1mb3J3YXJkZWQtcHJvdG9cIikgPz8gXCJodHRwc1wiKSArIFwiOi8vXCIgKyBwYXJzZWRGcm9tSGVhZGVycztcbiAgfVxuICBpZiAoIXBhcnNlZEZyb21IZWFkZXJzIHx8IHBhcnNlZEZyb21IZWFkZXJzLmluY2x1ZGVzKFwibG9jYWxob3N0XCIpKSB7XG4gICAgbG9nZ2VyLndhcm4oXG4gICAgICBcIllvdSBhcmUgdXNpbmcgYSBsb2NhbGhvc3QgY2FsbGJhY2sgdXJsIGluIHByb2R1Y3Rpb24gd2hpY2ggaXMgbm90IHN1cHBvcnRlZC5cIixcbiAgICAgIFwiUmVhZCBtb3JlIGFuZCBsZWFybiBob3cgdG8gZml4IGl0IGhlcmU6IGh0dHBzOi8vZG9jcy51cGxvYWR0aGluZy5jb20vZmFxI215LWNhbGxiYWNrLXJ1bnMtaW4tZGV2ZWxvcG1lbnQtYnV0LW5vdC1pbi1wcm9kdWN0aW9uXCJcbiAgICApO1xuICAgIHJldHVybiBjYWxsYmFja1VybDtcbiAgfVxuICByZXR1cm4gZ2V0RnVsbEFwaVVybChwYXJzZWRGcm9tSGVhZGVycyk7XG59XG52YXIgYnVpbGRQZXJtaXNzaW9uc0luZm9IYW5kbGVyID0gKG9wdHMpID0+IHtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBjb25zdCByID0gb3B0cy5yb3V0ZXI7XG4gICAgY29uc3QgcGVybWlzc2lvbnMgPSBPYmplY3Qua2V5cyhyKS5tYXAoKGspID0+IHtcbiAgICAgIGNvbnN0IHJvdXRlID0gcltrXTtcbiAgICAgIGNvbnN0IGNvbmZpZyA9IHBhcnNlQW5kRXhwYW5kSW5wdXRDb25maWcocm91dGUuX2RlZi5yb3V0ZXJDb25maWcpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc2x1ZzogayxcbiAgICAgICAgY29uZmlnXG4gICAgICB9O1xuICAgIH0pO1xuICAgIHJldHVybiBwZXJtaXNzaW9ucztcbiAgfTtcbn07XG5cbi8vIHNyYy9pbnRlcm5hbC9pbmNvbXBhdC1ub2RlLWd1YXJkLnRzXG5pbXBvcnQgeyBwcm9jZXNzIGFzIHByb2Nlc3MzIH0gZnJvbSBcInN0ZC1lbnZcIjtcbmZ1bmN0aW9uIGluY29tcGF0aWJsZU5vZGVHdWFyZCgpIHtcbiAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2Y7XG4gIGlmICh0eXBlb2YgcHJvY2VzczMgPT09IFwidW5kZWZpbmVkXCIpXG4gICAgcmV0dXJuO1xuICBsZXQgbWFqb3I7XG4gIGxldCBtaW5vcjtcbiAgY29uc3QgbWF5YmVOb2RlVmVyc2lvbiA9IChfYiA9IChfYSA9IHByb2Nlc3MzLnZlcnNpb25zKSA9PSBudWxsID8gdm9pZCAwIDogX2Eubm9kZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnNwbGl0KFwiLlwiKTtcbiAgaWYgKG1heWJlTm9kZVZlcnNpb24pIHtcbiAgICBbbWFqb3IsIG1pbm9yXSA9IG1heWJlTm9kZVZlcnNpb24ubWFwKCh2KSA9PiBwYXJzZUludCh2LCAxMCkpO1xuICB9XG4gIGNvbnN0IG1heWJlTm9kZVBhdGggPSAoX2MgPSBwcm9jZXNzMy5lbnYpID09IG51bGwgPyB2b2lkIDAgOiBfYy5OT0RFO1xuICBpZiAoIW1ham9yICYmIG1heWJlTm9kZVBhdGgpIHtcbiAgICBjb25zdCBub2RlVmVyc2lvbiA9IChfZCA9IC92KFxcZCspXFwuKFxcZCspXFwuKFxcZCspLy5leGVjKG1heWJlTm9kZVBhdGgpKSA9PSBudWxsID8gdm9pZCAwIDogX2RbMF07XG4gICAgaWYgKG5vZGVWZXJzaW9uKSB7XG4gICAgICBbbWFqb3IsIG1pbm9yXSA9IG5vZGVWZXJzaW9uLnN1YnN0cmluZygxKS5zcGxpdChcIi5cIikubWFwKCh2KSA9PiBwYXJzZUludCh2LCAxMCkpO1xuICAgIH1cbiAgfVxuICBpZiAoIW1ham9yIHx8ICFtaW5vcilcbiAgICByZXR1cm47XG4gIGlmIChtYWpvciA+IDE4KVxuICAgIHJldHVybjtcbiAgaWYgKG1ham9yID09PSAxOCAmJiBtaW5vciA+PSAxMylcbiAgICByZXR1cm47XG4gIGxvZ2dlci5mYXRhbChcbiAgICBgWU9VIEFSRSBVU0lORyBBIExFR0FDWSAoJHttYWpvcn0uJHttaW5vcn0pIE5PREUgVkVSU0lPTiBXSElDSCBJU04nVCBPRkZJQ0lBTExZIFNVUFBPUlRFRC4gUExFQVNFIFVQR1JBREUgVE8gTk9ERSBeMTguMTMuYFxuICApO1xuICAoX2YgPSAoX2UgPSBwcm9jZXNzMykuZXhpdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9mLmNhbGwoX2UsIDEpO1xufVxuXG4vLyBzcmMvaW50ZXJuYWwvdXBsb2FkLWJ1aWxkZXIudHNcbmZ1bmN0aW9uIGludGVybmFsQ3JlYXRlQnVpbGRlcihpbml0RGVmID0ge30pIHtcbiAgY29uc3QgX2RlZiA9IHtcbiAgICAvLyBEZWZhdWx0IHJvdXRlciBjb25maWdcbiAgICByb3V0ZXJDb25maWc6IHtcbiAgICAgIGltYWdlOiB7XG4gICAgICAgIG1heEZpbGVTaXplOiBcIjRNQlwiXG4gICAgICB9XG4gICAgfSxcbiAgICBpbnB1dFBhcnNlcjogeyBwYXJzZTogKCkgPT4gKHt9KSwgX2lucHV0OiB7fSwgX291dHB1dDoge30gfSxcbiAgICBtaWRkbGV3YXJlOiAoKSA9PiAoe30pLFxuICAgIG9uVXBsb2FkRXJyb3I6ICgpID0+ICh7fSksXG4gICAgZXJyb3JGb3JtYXR0ZXI6IGluaXREZWYuZXJyb3JGb3JtYXR0ZXIgPz8gZGVmYXVsdEVycm9yRm9ybWF0dGVyLFxuICAgIC8vIE92ZXJsb2FkIHdpdGggcHJvcGVydGllcyBwYXNzZWQgaW5cbiAgICAuLi5pbml0RGVmXG4gIH07XG4gIHJldHVybiB7XG4gICAgaW5wdXQodXNlclBhcnNlcikge1xuICAgICAgcmV0dXJuIGludGVybmFsQ3JlYXRlQnVpbGRlcih7XG4gICAgICAgIC4uLl9kZWYsXG4gICAgICAgIGlucHV0UGFyc2VyOiB1c2VyUGFyc2VyXG4gICAgICB9KTtcbiAgICB9LFxuICAgIG1pZGRsZXdhcmUodXNlck1pZGRsZXdhcmUpIHtcbiAgICAgIHJldHVybiBpbnRlcm5hbENyZWF0ZUJ1aWxkZXIoe1xuICAgICAgICAuLi5fZGVmLFxuICAgICAgICBtaWRkbGV3YXJlOiB1c2VyTWlkZGxld2FyZVxuICAgICAgfSk7XG4gICAgfSxcbiAgICBvblVwbG9hZENvbXBsZXRlKHVzZXJVcGxvYWRDb21wbGV0ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgX2RlZixcbiAgICAgICAgcmVzb2x2ZXI6IHVzZXJVcGxvYWRDb21wbGV0ZVxuICAgICAgfTtcbiAgICB9LFxuICAgIG9uVXBsb2FkRXJyb3IodXNlck9uVXBsb2FkRXJyb3IpIHtcbiAgICAgIHJldHVybiBpbnRlcm5hbENyZWF0ZUJ1aWxkZXIoe1xuICAgICAgICAuLi5fZGVmLFxuICAgICAgICBvblVwbG9hZEVycm9yOiB1c2VyT25VcGxvYWRFcnJvclxuICAgICAgfSk7XG4gICAgfVxuICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlQnVpbGRlcihvcHRzKSB7XG4gIHJldHVybiAoaW5wdXQpID0+IHtcbiAgICByZXR1cm4gaW50ZXJuYWxDcmVhdGVCdWlsZGVyKHtcbiAgICAgIHJvdXRlckNvbmZpZzogaW5wdXQsXG4gICAgICAuLi5vcHRzXG4gICAgfSk7XG4gIH07XG59XG5cbmV4cG9ydCB7XG4gIFVQTE9BRFRISU5HX1ZFUlNJT04sXG4gIGRlZmF1bHRFcnJvckZvcm1hdHRlcixcbiAgZm9ybWF0RXJyb3IsXG4gIGxvZ2dlcixcbiAgaW5pdExvZ2dlcixcbiAgdW5zZXRNYXJrZXIsXG4gIFZBTElEX0FDVElPTl9UWVBFUyxcbiAgYnVpbGRSZXF1ZXN0SGFuZGxlcixcbiAgYnVpbGRQZXJtaXNzaW9uc0luZm9IYW5kbGVyLFxuICBpbmNvbXBhdGlibGVOb2RlR3VhcmQsXG4gIGNyZWF0ZUJ1aWxkZXJcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaHVuay1WRjU2T0I2VC5tanMubWFwIl0sIm5hbWVzIjpbImdldEZ1bGxBcGlVcmwiLCJfX3JlcXVpcmUiLCJwYWNrYWdlX2RlZmF1bHQiLCJuYW1lIiwidmVyc2lvbiIsImVuZ2luZXMiLCJub2RlIiwibGljZW5zZSIsImV4cG9ydHMiLCJ0eXBlcyIsImltcG9ydCIsInJlcXVpcmUiLCJmaWxlcyIsInB1Ymxpc2hDb25maWciLCJhY2Nlc3MiLCJ0eXBlc1ZlcnNpb25zIiwiY2xpZW50Iiwic2VydmVyIiwibmV4dCIsInR3IiwiZXhwcmVzcyIsImZhc3RpZnkiLCJoMyIsInNjcmlwdHMiLCJsaW50IiwiYnVpbGQiLCJjbGVhbiIsImRldiIsInRlc3QiLCJ0eXBlY2hlY2siLCJkZXBlbmRlbmNpZXMiLCJjb25zb2xhIiwiZGV2RGVwZW5kZW5jaWVzIiwiZXNsaW50IiwidGFpbHdpbmRjc3MiLCJ0c3VwIiwidHlwZXNjcmlwdCIsInVuZGljaSIsInZpdGVzdCIsInpvZCIsImVzbGludENvbmZpZyIsInJvb3QiLCJleHRlbmRzIiwicnVsZXMiLCJtZXNzYWdlIiwiRXJyb3IiLCJVUExPQURUSElOR19WRVJTSU9OIiwiZGVmYXVsdEVycm9yRm9ybWF0dGVyIiwiZXJyb3IiLCJmb3JtYXRFcnJvciIsInJvdXRlciIsIl9hIiwiZXJyb3JGb3JtYXR0ZXIiLCJPYmplY3QiLCJrZXlzIiwiX2RlZiIsImNyZWF0ZUNvbnNvbGEiLCJMb2dMZXZlbHMiLCJwcm9jZXNzIiwiaXNPYmplY3QiLCJjb2xvcml6ZSIsInN0ciIsImxldmVsIiwiaWNvbnMiLCJmYXRhbCIsIndhcm4iLCJpbmZvIiwibG9nIiwiZGVidWciLCJ0cmFjZSIsInN1Y2Nlc3MiLCJmb3JtYXRTdGFjayIsInN0YWNrIiwiY3dkIiwic3BsaXQiLCJzcGxpY2UiLCJtYXAiLCJsIiwidHJpbSIsInJlcGxhY2UiLCJqb2luIiwiZm9ybWF0QXJncyIsImFyZ3MiLCJmbXRBcmdzIiwiYXJnIiwidXRpbCIsImluc3BlY3QiLCJkZXB0aCIsIkpTT04iLCJzdHJpbmdpZnkiLCJsb2dnZXIiLCJyZXBvcnRlcnMiLCJsb2dPYmoiLCJ0eXBlIiwidGFnIiwiZGF0ZSIsImljb24iLCJsb2dQcmVmaXgiLCJ0b0xvY2FsZVRpbWVTdHJpbmciLCJsaW5lcyIsImNvbnNvbGUiLCJkZWZhdWx0cyIsImluaXRMb2dnZXIiLCJ1bnNldE1hcmtlciIsIlZBTElEX0FDVElPTl9UWVBFUyIsImlzRGV2ZWxvcG1lbnQiLCJwcm9jZXNzMiIsImdlbmVyYXRlVXBsb2FkVGhpbmdVUkwiLCJnZW5lcmF0ZVVwbG9hZFRoaW5nVVJMMiIsImdldFR5cGVGcm9tRmlsZU5hbWUiLCJpc09iamVjdDIiLCJvYmplY3RLZXlzIiwiZmlsbElucHV0Um91dGVDb25maWciLCJwYXJzZUFuZEV4cGFuZElucHV0Q29uZmlnIiwic2FmZVBhcnNlSlNPTiIsIlVwbG9hZFRoaW5nRXJyb3IiLCJVcGxvYWRUaGluZ0Vycm9yMiIsInBvbGxGb3JGaWxlRGF0YSIsImlzVmFsaWRSZXNwb25zZSIsInJlc3BvbnNlIiwib2siLCJzdGF0dXMiLCJoZWFkZXJzIiwiaGFzIiwiY29uZGl0aW9uYWxEZXZTZXJ2ZXIiLCJvcHRzIiwiZmlsZURhdGEiLCJ1cmwiLCJmaWxlS2V5IiwiYXBpS2V5Iiwic2RrVmVyc2lvbiIsImZldGNoIiwianNvbiIsImZpbGUiLCJjYWxsYmFja1VybCIsImNhbGxiYWNrU2x1ZyIsInN0YXJ0c1dpdGgiLCJtZXRob2QiLCJib2R5IiwibWV0YWRhdGEiLCJwYXJzZSIsImVuY29kZVVSSUNvbXBvbmVudCIsImtleSIsImZpbGVOYW1lIiwic2l6ZSIsImZpbGVTaXplIiwiY29kZSIsImdldFBhcnNlRm4iLCJwYXJzZXIiLCJjcmVhdGVVVEZldGNoIiwiZmVQYWNrYWdlIiwiYmVBZGFwdGVyIiwiZW5kcG9pbnQiLCJwYXlsb2FkIiwiZmlsZUNvdW50TGltaXRIaXQiLCJyb3V0ZUNvbmZpZyIsImNvdW50cyIsImZvckVhY2giLCJfa2V5IiwiY291bnQiLCJsaW1pdCIsIm1heEZpbGVDb3VudCIsImNhdXNlIiwibGltaXRIaXQiLCJidWlsZFJlcXVlc3RIYW5kbGVyIiwiYWRhcHRlciIsImlucHV0IiwiX2IiLCJpc0RldiIsImNvbmZpZyIsImdsb2JhbFRoaXMiLCJwcmVmZXJyZWRPckVudlNlY3JldCIsInVwbG9hZHRoaW5nU2VjcmV0IiwiZW52IiwiVVBMT0FEVEhJTkdfU0VDUkVUIiwicmVxIiwibmF0aXZlUmVxdWVzdCIsIlVSTCIsInBhcmFtcyIsInNlYXJjaFBhcmFtcyIsInVwbG9hZHRoaW5nSG9vayIsImdldCIsInNsdWciLCJhY3Rpb25UeXBlIiwidXRGcm9udGVuZFBhY2thZ2UiLCJtc2ciLCJ1cGxvYWRhYmxlIiwidXRGZXRjaCIsIm1heWJlUmVxQm9keSIsInJlc29sdmVyQXJncyIsInJlcyIsInJlc29sdmVyIiwiY2FsbGJhY2tEYXRhIiwiY2FsbGJhY2tSZXNwb25zZSIsImluY2x1ZGVzIiwieCIsIm1heWJlSW5wdXQiLCJ1c2VySW5wdXQiLCJwYXJzZWRJbnB1dCIsImlucHV0UGFyc2VyIiwibWlkZGxld2FyZSIsIm9yaWdpbmFsUmVxdWVzdCIsImV2ZW50IiwiQXJyYXkiLCJpc0FycmF5IiwiZXZlcnkiLCJmIiwicGFyc2VkQ29uZmlnIiwicm91dGVyQ29uZmlnIiwicmVzb2x2ZUNhbGxiYWNrVXJsIiwiaHJlZiIsInVwbG9hZHRoaW5nQXBpUmVzcG9uc2UiLCJvcmlnaW4iLCJwYXRobmFtZSIsInBhcnNlZFJlc3BvbnNlIiwicHJvbWlzZSIsIlByb21pc2UiLCJhbGwiLCJjYXRjaCIsImNsZWFudXAiLCJwb2xsaW5nVXJsIiwiY29tcGxldGVSZXMiLCJ1cGxvYWRJZCIsImV0YWdzIiwib25VcGxvYWRFcnJvciIsIlVQTE9BRFRISU5HX1VSTCIsImhvc3QiLCJwYXJzZWRGcm9tSGVhZGVycyIsImJ1aWxkUGVybWlzc2lvbnNJbmZvSGFuZGxlciIsInIiLCJwZXJtaXNzaW9ucyIsImsiLCJyb3V0ZSIsInByb2Nlc3MzIiwiaW5jb21wYXRpYmxlTm9kZUd1YXJkIiwiX2MiLCJfZCIsIl9lIiwiX2YiLCJtYWpvciIsIm1pbm9yIiwibWF5YmVOb2RlVmVyc2lvbiIsInZlcnNpb25zIiwidiIsInBhcnNlSW50IiwibWF5YmVOb2RlUGF0aCIsIk5PREUiLCJub2RlVmVyc2lvbiIsImV4ZWMiLCJzdWJzdHJpbmciLCJleGl0IiwiY2FsbCIsImludGVybmFsQ3JlYXRlQnVpbGRlciIsImluaXREZWYiLCJpbWFnZSIsIm1heEZpbGVTaXplIiwiX2lucHV0IiwiX291dHB1dCIsInVzZXJQYXJzZXIiLCJ1c2VyTWlkZGxld2FyZSIsIm9uVXBsb2FkQ29tcGxldGUiLCJ1c2VyVXBsb2FkQ29tcGxldGUiLCJ1c2VyT25VcGxvYWRFcnJvciIsImNyZWF0ZUJ1aWxkZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/chunk-VF56OB6T.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/next.mjs":
/*!************************************************!*\
  !*** ./node_modules/uploadthing/dist/next.mjs ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createNextRouteHandler: () => (/* binding */ createNextRouteHandler),\n/* harmony export */   createRouteHandler: () => (/* binding */ createRouteHandler),\n/* harmony export */   createUploadthing: () => (/* binding */ createUploadthing)\n/* harmony export */ });\n/* harmony import */ var _chunk_HDSWJLNP_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-HDSWJLNP.mjs */ \"(rsc)/./node_modules/uploadthing/dist/chunk-HDSWJLNP.mjs\");\n/* harmony import */ var _chunk_S3R3VXRK_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-S3R3VXRK.mjs */ \"(rsc)/./node_modules/uploadthing/dist/chunk-S3R3VXRK.mjs\");\n/* harmony import */ var _chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chunk-VF56OB6T.mjs */ \"(rsc)/./node_modules/uploadthing/dist/chunk-VF56OB6T.mjs\");\n/* harmony import */ var _chunk_4QCB7YXI_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./chunk-4QCB7YXI.mjs */ \"(rsc)/./node_modules/uploadthing/dist/chunk-4QCB7YXI.mjs\");\n/* harmony import */ var _chunk_JW5CQVQS_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./chunk-JW5CQVQS.mjs */ \"(rsc)/./node_modules/uploadthing/dist/chunk-JW5CQVQS.mjs\");\n\n\n\n\n\n// src/next.ts\nvar createUploadthing = (opts)=>(0,_chunk_VF56OB6T_mjs__WEBPACK_IMPORTED_MODULE_2__.createBuilder)(opts);\nvar createRouteHandler = (opts)=>{\n    const handlers = (0,_chunk_HDSWJLNP_mjs__WEBPACK_IMPORTED_MODULE_0__.INTERNAL_DO_NOT_USE_createRouteHandlerCore)(opts, \"nextjs-app\");\n    return {\n        POST: (req)=>handlers.POST(req),\n        GET: (req)=>handlers.GET(req)\n    };\n};\nvar createNextRouteHandler = createRouteHandler;\n //# sourceMappingURL=next.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9uZXh0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUU4QjtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRTlCLGNBQWM7QUFDZCxJQUFJRSxvQkFBb0IsQ0FBQ0MsT0FBU0Ysa0VBQWFBLENBQUNFO0FBQ2hELElBQUlDLHFCQUFxQixDQUFDRDtJQUN4QixNQUFNRSxXQUFXTCwrRkFBMENBLENBQ3pERyxNQUNBO0lBRUYsT0FBTztRQUNMRyxNQUFNLENBQUNDLE1BQVFGLFNBQVNDLElBQUksQ0FBQ0M7UUFDN0JDLEtBQUssQ0FBQ0QsTUFBUUYsU0FBU0csR0FBRyxDQUFDRDtJQUM3QjtBQUNGO0FBQ0EsSUFBSUUseUJBQXlCTDtBQUszQixDQUNGLGlDQUFpQyIsInNvdXJjZXMiOlsid2VicGFjazovL3N5bmNjaGF0Ly4vbm9kZV9tb2R1bGVzL3VwbG9hZHRoaW5nL2Rpc3QvbmV4dC5tanM/YzU1ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBJTlRFUk5BTF9ET19OT1RfVVNFX2NyZWF0ZVJvdXRlSGFuZGxlckNvcmVcbn0gZnJvbSBcIi4vY2h1bmstSERTV0pMTlAubWpzXCI7XG5pbXBvcnQgXCIuL2NodW5rLVMzUjNWWFJLLm1qc1wiO1xuaW1wb3J0IHtcbiAgY3JlYXRlQnVpbGRlclxufSBmcm9tIFwiLi9jaHVuay1WRjU2T0I2VC5tanNcIjtcbmltcG9ydCBcIi4vY2h1bmstNFFDQjdZWEkubWpzXCI7XG5pbXBvcnQgXCIuL2NodW5rLUpXNUNRVlFTLm1qc1wiO1xuXG4vLyBzcmMvbmV4dC50c1xudmFyIGNyZWF0ZVVwbG9hZHRoaW5nID0gKG9wdHMpID0+IGNyZWF0ZUJ1aWxkZXIob3B0cyk7XG52YXIgY3JlYXRlUm91dGVIYW5kbGVyID0gKG9wdHMpID0+IHtcbiAgY29uc3QgaGFuZGxlcnMgPSBJTlRFUk5BTF9ET19OT1RfVVNFX2NyZWF0ZVJvdXRlSGFuZGxlckNvcmUoXG4gICAgb3B0cyxcbiAgICBcIm5leHRqcy1hcHBcIlxuICApO1xuICByZXR1cm4ge1xuICAgIFBPU1Q6IChyZXEpID0+IGhhbmRsZXJzLlBPU1QocmVxKSxcbiAgICBHRVQ6IChyZXEpID0+IGhhbmRsZXJzLkdFVChyZXEpXG4gIH07XG59O1xudmFyIGNyZWF0ZU5leHRSb3V0ZUhhbmRsZXIgPSBjcmVhdGVSb3V0ZUhhbmRsZXI7XG5leHBvcnQge1xuICBjcmVhdGVOZXh0Um91dGVIYW5kbGVyLFxuICBjcmVhdGVSb3V0ZUhhbmRsZXIsXG4gIGNyZWF0ZVVwbG9hZHRoaW5nXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bmV4dC5tanMubWFwIl0sIm5hbWVzIjpbIklOVEVSTkFMX0RPX05PVF9VU0VfY3JlYXRlUm91dGVIYW5kbGVyQ29yZSIsImNyZWF0ZUJ1aWxkZXIiLCJjcmVhdGVVcGxvYWR0aGluZyIsIm9wdHMiLCJjcmVhdGVSb3V0ZUhhbmRsZXIiLCJoYW5kbGVycyIsIlBPU1QiLCJyZXEiLCJHRVQiLCJjcmVhdGVOZXh0Um91dGVIYW5kbGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/next.mjs\n");

/***/ })

};
;